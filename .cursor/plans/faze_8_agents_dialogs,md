ФАЗА 8: Диалог между агентами
Цель: Реализовать полноценные диалоги между агентами для совместного решения задач.

Этап 8.1: Система диалога агентов
Шаг 8.1.1: Создать модель AgentConversation
Файлы:

backend/app/models/agent_conversation.py (новый)
Миграция 025_add_agent_conversations.py
Задача:

Модель для хранения диалогов между агентами
Поля: participants, messages, context, goal
Связь с задачами
Тесты:

Частный: backend/tests/test_agent_conversation_model.py
Общий: Интеграция
Документация: Создать docs/guides/AGENT_DIALOGS.md

Коммит: feat(phase8.1.1): модель AgentConversation

Шаг 8.1.2: Реализовать AgentDialogService
Файлы:

backend/app/services/agent_dialog_service.py (новый)
Задача:

Создание диалога между агентами
Добавление сообщений в диалог
Управление контекстом диалога
Определение завершения диалога
Тесты:

Частный: backend/tests/test_agent_dialog_service.py
Общий: Полный цикл диалога
Документация: Обновить документацию

Коммит: feat(phase8.1.2): AgentDialogService

Тест этапа 8.1: backend/tests/integration/test_agent_dialogs.py

Документация этапа: Обновить docs/guides/AGENT_DIALOGS.md

Коммит этапа: feat(phase8.1): система диалога агентов

---

Этап 8.2: Интеграция диалогов в workflow
Шаг 8.2.1: Интегрировать диалоги в PlanningService
Файлы:

backend/app/services/planning_service.py
Использование диалогов для сложных задач
Задача:

Для сложных задач инициировать диалог между агентами
Использовать результаты диалога для создания плана
Сохранять контекст диалога в Digital Twin
Тесты:

Частный: Тесты интеграции
Общий: Полный цикл планирования с диалогом
Документация: Обновить документацию

Коммит: feat(phase8.2.1): интеграция диалогов в PlanningService

Шаг 8.2.2: Создать API для управления диалогами
Файлы:

backend/app/api/routes/agent_dialogs.py (новый)
Задача:

POST /api/agent-dialogs/ - создание диалога
POST /api/agent-dialogs/{dialog_id}/message - добавление сообщения
GET /api/agent-dialogs/{dialog_id} - получение диалога
Тесты:

Частный: backend/tests/test_agent_dialog_api.py
Общий: Интеграция
Документация: Обновить API документацию

Коммит: feat(phase8.2.2): API для управления диалогами

Тест этапа 8.2: backend/tests/integration/test_agent_dialog_workflow.py

Документация этапа: Обновить документацию

Коммит этапа: feat(phase8.2): интеграция диалогов в workflow

---

Тест фазы 8: backend/tests/integration/test_agent_dialogs_complete.py

Документация фазы: Создать docs/guides/AGENT_DIALOGS.md (полный обзор)

Коммит фазы: feat(phase8): диалог между агентами

Правила выполнения плана
После каждого ШАГА:
Частный тест: Тест конкретной функции/метода
Общий тест: Интеграционный или комплексный тест
Документация: Обновить соответствующую документацию
Коммит: Создать коммит с описанием изменений
После каждого ЭТАПА:
Этапный тест: Комплексный тест всего этапа
Документация этапа: Создать/обновить документацию этапа
Коммит этапа: Коммит с префиксом feat(phaseX.Y):
После каждой ФАЗЫ:
Фазный тест: Полный тест всей фазы
Документация фазы: Полная документация фазы
Коммит фазы: Коммит с префиксом feat(phaseX):
Согласование между элементами:
Каждый шаг должен быть независим и тестируем
Зависимости между шагами явно указаны
Тесты каждого уровня проверяют согласованность с предыдущими уровнями
Документация обновляется на каждом уровне
Поддерживается целостность архитектуры проекта