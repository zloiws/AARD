ФАЗА 3: Саморефлексия проекта
Цель: Создать систему самоанализа проекта на всех уровнях.

Этап 3.1: Система метрик проекта
Шаг 3.1.1: Создать ProjectMetricsService
Файлы:

backend/app/services/project_metrics_service.py (новый)
Модель ProjectMetric (новый)
Задача:

Сбор метрик на уровне проекта:
Общая производительность системы
Успешность выполнения задач
Среднее время выполнения
Распределение по типам задач
Тренды во времени
Тесты:

Частный: backend/tests/test_project_metrics_service.py
Общий: Интеграция с существующими сервисами
Документация: Создать docs/guides/PROJECT_REFLECTION.md

Коммит: feat(phase3.1.1): ProjectMetricsService

Шаг 3.1.2: Реализовать сбор метрик в реальном времени
Файлы:

Интеграция в PlanningService, ExecutionService, PromptService
Задача:

Автоматический сбор метрик при выполнении операций
Хранение метрик в БД
Агрегация метрик по периодам (час, день, неделя)
Тесты:

Частный: Тесты сбора метрик
Общий: Интеграция с workflow
Документация: Обновить документацию

Коммит: feat(phase3.1.2): сбор метрик в реальном времени

Шаг 3.1.3: Создать API для метрик проекта
Файлы:

backend/app/api/routes/project_metrics.py (новый)
Задача:

GET /api/metrics/project/overview - обзор метрик
GET /api/metrics/project/trends - тренды метрик
GET /api/metrics/project/comparison - сравнение периодов
Тесты:

Частный: backend/tests/test_project_metrics_api.py
Общий: Интеграция
Документация: Обновить API документацию

Коммит: feat(phase3.1.3): API для метрик проекта

Тест этапа 3.1: backend/tests/integration/test_project_metrics.py

Документация этапа: Обновить docs/guides/PROJECT_REFLECTION.md

Коммит этапа: feat(phase3.1): система метрик проекта

---

Этап 3.2: Регулярный самоаудит
Шаг 3.2.1: Реализовать SelfAuditService
Файлы:

backend/app/services/self_audit_service.py (новый)
Задача:

Методы для самоанализа:
audit_performance() - анализ производительности
audit_quality() - анализ качества планов
audit_prompts() - анализ эффективности промптов
audit_errors() - анализ ошибок и паттернов
generate_report() - генерация отчета
Тесты:

Частный: backend/tests/test_self_audit_service.py
Общий: Полный цикл аудита
Документация: Обновить docs/guides/PROJECT_REFLECTION.md

Коммит: feat(phase3.2.1): SelfAuditService

Шаг 3.2.2: Создать планировщик регулярных аудитов
Файлы:

backend/app/services/self_audit_service.py
Интеграция с фоновыми задачами
Задача:

Планировщик для запуска аудитов по расписанию (ежедневно, еженедельно)
Автоматическая генерация отчетов
Сохранение истории аудитов
Тесты:

Частный: Тесты планировщика
Общий: Тест автоматического запуска
Документация: Обновить документацию

Коммит: feat(phase3.2.2): планировщик регулярных аудитов

Шаг 3.2.3: Реализовать анализ трендов и рекомендации
Файлы:

backend/app/services/self_audit_service.py
Использование LLM для анализа
Задача:

Анализ трендов производительности
Определение улучшений и деградаций
Генерация автоматических рекомендаций по улучшению
Использование ReflectionService для глубокого анализа
Тесты:

Частный: Тесты анализа трендов
Общий: Полный цикл анализа и рекомендаций
Документация: Обновить документацию

Коммит: feat(phase3.2.3): анализ трендов и рекомендации

Тест этапа 3.2: backend/tests/integration/test_self_audit_complete.py

Документация этапа: Обновить документацию

Коммит этапа: feat(phase3.2): регулярный самоаудит

---

Этап 3.3: Dashboard метрик проекта
Шаг 3.3.1: Создать страницу метрик проекта
Файлы:

frontend/templates/metrics/project.html (новый)
backend/app/api/routes/pages.py - добавить роут
Задача:

Dashboard с ключевыми метриками
Графики трендов
Сводная статистика
Тесты:

Частный: Мануальное тестирование
Общий: E2E тест dashboard
Документация: Обновить docs/WEB_INTERFACE.md

Коммит: feat(phase3.3.1): страница метрик проекта

Шаг 3.3.2: Интегрировать отчеты самоаудита в UI
Файлы:

frontend/templates/metrics/audit_reports.html (новый)
Задача:

Просмотр истории аудитов
Детальные отчеты с рекомендациями
Фильтрация по периоду
Тесты:

Частный: Мануальное тестирование
Общий: E2E тест просмотра отчетов
Документация: Обновить документацию

Коммит: feat(phase3.3.2): UI для отчетов самоаудита

Тест этапа 3.3: E2E тест dashboard метрик

Документация этапа: Обновить документацию

Коммит этапа: feat(phase3.3): Dashboard метрик проекта

---

Тест фазы 3: backend/tests/integration/test_project_reflection_system.py

Документация фазы: Создать docs/guides/PROJECT_REFLECTION.md (полный обзор)

Коммит фазы: feat(phase3): саморефлексия проекта

Правила выполнения плана
После каждого ШАГА:
Частный тест: Тест конкретной функции/метода
Общий тест: Интеграционный или комплексный тест
Документация: Обновить соответствующую документацию
Коммит: Создать коммит с описанием изменений
После каждого ЭТАПА:
Этапный тест: Комплексный тест всего этапа
Документация этапа: Создать/обновить документацию этапа
Коммит этапа: Коммит с префиксом feat(phaseX.Y):
После каждой ФАЗЫ:
Фазный тест: Полный тест всей фазы
Документация фазы: Полная документация фазы
Коммит фазы: Коммит с префиксом feat(phaseX):
Согласование между элементами:
Каждый шаг должен быть независим и тестируем
Зависимости между шагами явно указаны
Тесты каждого уровня проверяют согласованность с предыдущими уровнями
Документация обновляется на каждом уровне
Поддерживается целостность архитектуры проекта