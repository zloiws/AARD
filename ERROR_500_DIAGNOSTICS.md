# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ 500 - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ `chat.py`:
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (—Å–∞–º–æ–µ –ø–µ—Ä–≤–æ–µ)
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –º–æ–¥–µ–ª–∏
   - –ü–æ–ª–Ω—ã–π traceback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

2. **–î–æ–±–∞–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π** –≤ `main.py`:
   - –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
   - –í—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π traceback
   - –ù–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç HTTPException (FastAPI –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö —Å–∞–º)

3. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π flush stdout/stderr –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ª–æ–≥–æ–≤

## –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
cd backend
python main.py
```

### 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å —Å–Ω–æ–≤–∞
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "2+2*2"

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:

**–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —Ñ—É–Ω–∫—Ü–∏–∏:**
```
[CHAT] DEBUG: Received request - message='2+2*2...', server_id=..., model=...
[CHAT] DEBUG: Using server ... –∏–ª–∏ [CHAT] Auto-selected server ...
[CHAT] DEBUG: Explicitly selected model ... –∏–ª–∏ [CHAT] DEBUG: Auto-selected model ...
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```
[CHAT] ERROR: ...
[CHAT] TRACEBACK:
...
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è:**
```
[GLOBAL ERROR] Unhandled exception: ...
[GLOBAL ERROR] Traceback:
...
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic –º–æ–¥–µ–ª–∏
**–°–∏–º–ø—Ç–æ–º:** –ù–µ—Ç –ª–æ–≥–æ–≤ `[CHAT] DEBUG: Received request`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

### 2. –û—à–∏–±–∫–∞ –ø—Ä–∏ dependency injection
**–°–∏–º–ø—Ç–æ–º:** –ù–µ—Ç –ª–æ–≥–æ–≤ –≤–æ–æ–±—â–µ
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `get_ollama_client()`, `get_session_manager()`, `get_db()`

### 3. –û—à–∏–±–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
**–°–∏–º–ø—Ç–æ–º:** `[CHAT] ERROR: Database error...`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL

### 4. –û—à–∏–±–∫–∞ –≤ OllamaClient
**–°–∏–º–ø—Ç–æ–º:** `[CHAT] ERROR: Error generating response...`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - —Ç–∞–º –±—É–¥–µ—Ç –ø–æ–ª–Ω—ã–π traceback

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** (–≤–∞–∂–Ω–æ!)
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å**
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–ï –ª–æ–≥–∏** –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. **–ü—Ä–∏—à–ª–∏—Ç–µ –ª–æ–≥–∏** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

–õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏ 500.

