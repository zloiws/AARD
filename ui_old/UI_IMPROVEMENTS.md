# Улучшения UI - Упрощение интерфейса

## Проблемы

1. **Граф не строится** - события есть (5), но граф не отображается
2. **Интерфейс перегружен** - все элементы свалены в кучу, неудобно использовать
3. **Компактный режим слишком сложный** - вкладки Timeline/Graph в чате занимают много места

## Решения

### 1. Упрощен компактный режим WorkflowView
- Убраны вкладки Timeline/Graph из компактного режима
- Показывается только краткая информация и ссылка на полный граф
- Timeline показывается в свернутом виде как превью

### 2. Улучшена структура сообщений в чате
- Reasoning свернут по умолчанию (details)
- Workflow View вынесен в отдельную секцию с границей
- Более компактное отображение

### 3. Исправлена проблема с рендерингом графа
- Добавлена дополнительная проверка валидности позиций узлов
- Улучшена обработка fallback позиций
- Добавлено больше debug логирования для диагностики
- Увеличен таймаут для fitView (500ms вместо 300ms)

### 4. Улучшена обработка ошибок
- Более информативные сообщения об ошибках
- Правильная обработка ошибок бэкенда
- Логирование только в dev режиме

## Изменения в файлах

- `components/chat/workflow-view.tsx` - упрощен компактный режим
- `components/workflow/enhanced-workflow-graph.tsx` - исправлен рендеринг графа
- `app/chat/page.tsx` - улучшена структура сообщений
- `lib/api/client.ts` - улучшена обработка ошибок API

## Следующие шаги

1. Проверить почему граф не строится - возможно проблема с данными от API
2. Добавить модальное окно для просмотра графа из чата
3. Улучшить визуальное разделение секций в сообщениях
