{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/lib/api/client.ts"],"sourcesContent":["// Base API configuration\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000'\r\n\r\nexport class ApiError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public status: number,\r\n    public data?: any\r\n  ) {\r\n    super(message)\r\n    this.name = 'ApiError'\r\n  }\r\n}\r\n\r\nasync function fetchApi<T>(\r\n  endpoint: string,\r\n  options?: RequestInit\r\n): Promise<T> {\r\n  const url = `${API_BASE_URL}${endpoint}`\r\n  const isDev = process.env.NODE_ENV === 'development'\r\n  \r\n  if (isDev) {\r\n    console.log('fetchApi: Starting request', { url, endpoint, method: options?.method || 'GET' })\r\n  }\r\n  \r\n  try {\r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...options?.headers,\r\n      },\r\n    })\r\n\r\n    if (isDev) {\r\n      console.log('fetchApi: Response received', { \r\n        url, \r\n        status: response.status, \r\n        statusText: response.statusText,\r\n        ok: response.ok \r\n      })\r\n    }\r\n\r\n    if (!response.ok) {\r\n      let errorData: any = {}\r\n      let errorMessage = `API request failed: ${response.status} ${response.statusText}`\r\n      \r\n      try {\r\n        const contentType = response.headers.get('content-type')\r\n        if (contentType && contentType.includes('application/json')) {\r\n          errorData = await response.json()\r\n          \r\n          // Extract error message from various possible formats\r\n          if (errorData.message) {\r\n            errorMessage = errorData.message\r\n          } else if (errorData.detail) {\r\n            // FastAPI format\r\n            if (typeof errorData.detail === 'string') {\r\n              errorMessage = errorData.detail\r\n            } else if (Array.isArray(errorData.detail)) {\r\n              // FastAPI validation errors\r\n              errorMessage = errorData.detail.map((e: any) => e.msg || e.message || JSON.stringify(e)).join(', ')\r\n            } else if (typeof errorData.detail === 'object') {\r\n              errorMessage = JSON.stringify(errorData.detail)\r\n            }\r\n          } else if (errorData.error) {\r\n            errorMessage = typeof errorData.error === 'string' ? errorData.error : JSON.stringify(errorData.error)\r\n          } else if (Object.keys(errorData).length > 0) {\r\n            // If errorData has content but no standard fields, stringify it\r\n            errorMessage = JSON.stringify(errorData)\r\n          }\r\n        } else {\r\n          const text = await response.text()\r\n          errorData = { message: text || errorMessage }\r\n          errorMessage = text || errorMessage\r\n        }\r\n      } catch (parseError) {\r\n        errorData = { message: errorMessage }\r\n      }\r\n      \r\n      // Log error with full context\r\n      if (isDev) {\r\n        console.error('fetchApi: Error response', { \r\n          url, \r\n          endpoint,\r\n          status: response.status, \r\n          statusText: response.statusText,\r\n          errorData: Object.keys(errorData).length > 0 ? errorData : 'No error data',\r\n          errorMessage \r\n        })\r\n      }\r\n      \r\n      throw new ApiError(\r\n        errorMessage,\r\n        response.status,\r\n        errorData\r\n      )\r\n    }\r\n\r\n    const contentType = response.headers.get('content-type')\r\n    let data: T\r\n    \r\n    if (contentType && contentType.includes('application/json')) {\r\n      data = await response.json()\r\n    } else {\r\n      // Handle non-JSON responses\r\n      const text = await response.text()\r\n      data = text as any\r\n    }\r\n    \r\n    if (isDev) {\r\n      console.log('fetchApi: Data parsed', { url, dataKeys: typeof data === 'object' && data !== null ? Object.keys(data) : 'non-object' })\r\n    }\r\n    \r\n    return data\r\n  } catch (error) {\r\n    // Handle network errors (Failed to fetch)\r\n    if (error instanceof TypeError && error.message === 'Failed to fetch') {\r\n      const networkError = new ApiError(\r\n        `Network error: Unable to connect to API at ${API_BASE_URL}. Please check if the backend server is running.`,\r\n        0,\r\n        { \r\n          type: 'NetworkError',\r\n          originalError: error.message,\r\n          url,\r\n          endpoint \r\n        }\r\n      )\r\n      console.error('fetchApi: Network error', { \r\n        url, \r\n        endpoint,\r\n        apiBaseUrl: API_BASE_URL,\r\n        message: 'Backend server may be down or unreachable'\r\n      })\r\n      throw networkError\r\n    }\r\n    \r\n    // Handle other fetch errors\r\n    if (error instanceof Error && error.name === 'TypeError') {\r\n      const fetchError = new ApiError(\r\n        `Request failed: ${error.message}. Check your network connection and API server status.`,\r\n        0,\r\n        { \r\n          type: 'FetchError',\r\n          originalError: error.message,\r\n          url,\r\n          endpoint \r\n        }\r\n      )\r\n      console.error('fetchApi: Fetch error', { \r\n        url, \r\n        endpoint,\r\n        error: error.message,\r\n        name: error.name\r\n      })\r\n      throw fetchError\r\n    }\r\n    \r\n    // Only log if it's not an ApiError (which already has the message)\r\n    if (!(error instanceof ApiError)) {\r\n      const errorMessage = error instanceof Error ? error.message : String(error)\r\n      console.error('fetchApi: Request failed', { url, error: errorMessage })\r\n    }\r\n    throw error\r\n  }\r\n}\r\n\r\n// Types\r\nexport interface Task {\r\n  task_id: string\r\n  description: string\r\n  status: string\r\n  created_at: string\r\n  updated_at: string\r\n  current_stage: string\r\n  progress_percent: number\r\n  plan_version?: number\r\n  current_step?: {\r\n    step_id: string\r\n    step_number: number\r\n    description: string\r\n    status: string\r\n    started_at?: string\r\n  }\r\n  total_steps: number\r\n  completed_steps: number\r\n  latest_logs: Array<{\r\n    timestamp: string\r\n    stage: string\r\n    model: string\r\n    content_preview: string\r\n  }>\r\n  agents_in_use: string[]\r\n  tools_in_use: string[]\r\n}\r\n\r\nexport interface TasksResponse {\r\n  tasks: Task[]\r\n  total: number\r\n}\r\n\r\nexport interface Plan {\r\n  id: string\r\n  task_id: string\r\n  version: number\r\n  goal: string\r\n  strategy?: string | {\r\n    approach?: string\r\n    assumptions?: string\r\n    constraints?: string\r\n    success_criteria?: string\r\n  }\r\n  steps: PlanStep[]\r\n  alternatives?: any[]\r\n  status: string\r\n  current_step?: number\r\n  estimated_duration?: number\r\n  actual_duration?: number\r\n  created_at: string\r\n  approved_at?: string\r\n}\r\n\r\nexport interface PlanStep {\r\n  step_id?: string\r\n  description: string\r\n  status?: string\r\n  assigned_agent?: string\r\n}\r\n\r\nexport interface Agent {\r\n  id: string\r\n  name: string\r\n  description?: string\r\n  status: string\r\n  capabilities?: string[]\r\n  version: number\r\n  created_at: string\r\n  updated_at: string\r\n  total_tasks_executed: number\r\n  successful_tasks: number\r\n  failed_tasks: number\r\n}\r\n\r\nexport interface Message {\r\n  id: string\r\n  task_id?: string\r\n  role: 'user' | 'assistant' | 'system'\r\n  content: string\r\n  created_at: string\r\n  session_id?: string\r\n  response?: string\r\n}\r\n\r\nexport interface Prompt {\r\n  id: string\r\n  name: string\r\n  prompt_text: string\r\n  prompt_type: string\r\n  level: number\r\n  version: number\r\n  status: string\r\n  success_rate?: number\r\n  usage_count: number\r\n  created_at: string\r\n  parent_prompt_id?: string\r\n  avg_execution_time?: number\r\n  user_rating?: number\r\n}\r\n\r\nexport interface PromptMetrics {\r\n  prompt_id: string\r\n  prompt_name: string\r\n  version: number\r\n  usage_count: number\r\n  success_rate?: number\r\n  avg_execution_time?: number\r\n  user_rating?: number\r\n  usage_history: any[]\r\n  total_history_entries: number\r\n}\r\n\r\nexport interface AgentMemory {\r\n  id: string\r\n  agent_id: string\r\n  memory_type: string\r\n  content: any\r\n  summary?: string\r\n  importance: number\r\n  access_count: number\r\n  last_accessed_at?: string\r\n  tags?: string[]\r\n  source?: string\r\n  created_at: string\r\n  expires_at?: string\r\n}\r\n\r\nexport interface AgentContext {\r\n  id: string\r\n  agent_id: string\r\n  session_id?: string\r\n  context_key: string\r\n  content: any\r\n  ttl_seconds?: number\r\n  created_at: string\r\n  expires_at?: string\r\n}\r\n\r\n// API Client\r\nexport const api = {\r\n  // Tasks (using current-work endpoint)\r\n  tasks: {\r\n    list: (includeAll: boolean = true) => \r\n      fetchApi<TasksResponse>(`/api/current-work/tasks?include_all=${includeAll}`).then(res => res.tasks),\r\n    get: (id: string, includeAll: boolean = true) => \r\n      fetchApi<Task>(`/api/current-work/task/${id}?include_all=${includeAll}`),\r\n  },\r\n\r\n  // Plans\r\n  plans: {\r\n    list: (taskId?: string) => {\r\n      // Ensure taskId is a string, not an object\r\n      if (taskId !== undefined && taskId !== null) {\r\n        if (typeof taskId !== 'string') {\r\n          console.error('plans.list received non-string taskId:', taskId, typeof taskId)\r\n          // If it's an object, try to extract id\r\n          if (typeof taskId === 'object') {\r\n            const id = (taskId as any)?.id || (taskId as any)?.task_id\r\n            if (id && typeof id === 'string') {\r\n              return fetchApi<Plan[]>(`/api/plans?task_id=${id}`)\r\n            }\r\n          }\r\n          // Return all plans if invalid taskId\r\n          return fetchApi<Plan[]>('/api/plans')\r\n        }\r\n        // Valid string taskId\r\n        return fetchApi<Plan[]>(`/api/plans?task_id=${taskId}`)\r\n      }\r\n      // No taskId provided\r\n      return fetchApi<Plan[]>('/api/plans')\r\n    },\r\n    get: (id: string) => fetchApi<Plan>(`/api/plans/${id}`),\r\n    create: (taskId: string) =>\r\n      fetchApi<Plan>('/api/plans', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ task_id: taskId }),\r\n      }),\r\n  },\r\n\r\n  // Agents\r\n  agents: {\r\n    list: () => fetchApi<Agent[]>('/api/agents'),\r\n    get: (id: string) => fetchApi<Agent>(`/api/agents/${id}`),\r\n    create: (data: {\r\n      name: string\r\n      description?: string\r\n      system_prompt?: string\r\n      capabilities?: string[]\r\n      model_preference?: string\r\n      temperature?: string\r\n      max_concurrent_tasks?: number\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<Agent>('/api/agents', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (id: string, data: {\r\n      description?: string\r\n      system_prompt?: string\r\n      capabilities?: string[]\r\n      model_preference?: string\r\n      temperature?: string\r\n      max_concurrent_tasks?: number\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<Agent>(`/api/agents/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    activate: (id: string) =>\r\n      fetchApi<Agent>(`/api/agents/${id}/activate`, {\r\n        method: 'POST',\r\n      }),\r\n    pause: (id: string) =>\r\n      fetchApi<Agent>(`/api/agents/${id}/pause`, {\r\n        method: 'POST',\r\n      }),\r\n    deprecate: (id: string) =>\r\n      fetchApi<Agent>(`/api/agents/${id}/deprecate`, {\r\n        method: 'POST',\r\n      }),\r\n  },\r\n\r\n  // Messages/Chat\r\n  chat: {\r\n    sendMessage: (taskId: string, content: string, options?: {\r\n      sessionId?: string\r\n      model?: string\r\n      serverId?: string\r\n      temperature?: number\r\n      taskType?: string\r\n      systemPrompt?: string\r\n    }) => {\r\n      // taskId can be 'general' for general chat or actual task ID\r\n      const body: any = {\r\n        message: content,\r\n        task_type: options?.taskType || 'general_chat',\r\n      }\r\n      if (options?.sessionId) {\r\n        body.session_id = options.sessionId\r\n      }\r\n      if (options?.model) {\r\n        body.model = options.model\r\n      }\r\n      if (options?.serverId) {\r\n        body.server_id = options.serverId\r\n      }\r\n      if (options?.temperature !== undefined) {\r\n        body.temperature = options.temperature\r\n      }\r\n      if (options?.systemPrompt) {\r\n        body.system_prompt = options.systemPrompt\r\n      }\r\n      return fetchApi<{\r\n        response: string\r\n        model: string\r\n        task_type: string\r\n        duration_ms?: number\r\n        session_id?: string\r\n        trace_id?: string\r\n        reasoning?: string\r\n        workflow_id?: string\r\n      }>('/api/chat', {\r\n        method: 'POST',\r\n        body: JSON.stringify(body),\r\n      })\r\n    },\r\n    getHistory: (taskId: string) => {\r\n      // For now, return empty array as chat history is session-based\r\n      // TODO: Implement proper session management\r\n      return Promise.resolve([] as Message[])\r\n    },\r\n    getSession: (sessionId: string) =>\r\n      fetchApi<{\r\n        session_id: string\r\n        created_at: string\r\n        title: string | null\r\n        messages: Array<{\r\n          id: string\r\n          role: string\r\n          content: string\r\n          model: string | null\r\n          timestamp: string\r\n          metadata: any\r\n        }>\r\n      }>(`/api/chat/session/${sessionId}`),\r\n    deleteSession: (sessionId: string) =>\r\n      fetchApi<{ status: string; message: string }>(`/api/chat/session/${sessionId}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    createSession: (title?: string, systemPrompt?: string) =>\r\n      fetchApi<{\r\n        session_id: string\r\n        created_at: string\r\n        title: string | null\r\n        system_prompt: string | null\r\n      }>('/api/chat/session', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ title, system_prompt: systemPrompt }),\r\n      }),\r\n  },\r\n\r\n  // Prompts\r\n  prompts: {\r\n    list: (params?: {\r\n      prompt_type?: string\r\n      status?: string\r\n      level?: number\r\n      name?: string\r\n      limit?: number\r\n      offset?: number\r\n    }) => {\r\n      const queryParams = new URLSearchParams()\r\n      if (params?.prompt_type) queryParams.append('prompt_type', params.prompt_type)\r\n      if (params?.status) queryParams.append('status', params.status)\r\n      if (params?.level !== undefined) queryParams.append('level', String(params.level))\r\n      if (params?.name) queryParams.append('name', params.name)\r\n      if (params?.limit) queryParams.append('limit', String(params.limit))\r\n      if (params?.offset) queryParams.append('offset', String(params.offset))\r\n      \r\n      const query = queryParams.toString()\r\n      return fetchApi<Prompt[]>(`/api/prompts${query ? `?${query}` : ''}`)\r\n    },\r\n    get: (id: string) => fetchApi<Prompt>(`/api/prompts/${id}`),\r\n    create: (data: {\r\n      name: string\r\n      prompt_text: string\r\n      prompt_type: string\r\n      level?: number\r\n    }) =>\r\n      fetchApi<Prompt>('/api/prompts', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (id: string, data: {\r\n      name?: string\r\n      prompt_text?: string\r\n      status?: string\r\n    }) =>\r\n      fetchApi<Prompt>(`/api/prompts/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    delete: (id: string) =>\r\n      fetchApi<{ status: string; prompt_id: string }>(`/api/prompts/${id}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    createVersion: (id: string, prompt_text: string) =>\r\n      fetchApi<Prompt>(`/api/prompts/${id}/version`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({ prompt_text }),\r\n      }),\r\n    getVersions: (id: string) => fetchApi<Prompt[]>(`/api/prompts/${id}/versions`),\r\n    getMetrics: (id: string) => fetchApi<PromptMetrics>(`/api/prompts/${id}/metrics`),\r\n    deprecate: (id: string) =>\r\n      fetchApi<Prompt>(`/api/prompts/${id}/deprecate`, {\r\n        method: 'POST',\r\n      }),\r\n  },\r\n\r\n  // Agent Memory\r\n  agentMemory: {\r\n    list: (agentId: string, params?: {\r\n      memory_type?: string\r\n      min_importance?: number\r\n      tags?: string\r\n      limit?: number\r\n    }) => {\r\n      const queryParams = new URLSearchParams()\r\n      if (params?.memory_type) queryParams.append('memory_type', params.memory_type)\r\n      if (params?.min_importance !== undefined) queryParams.append('min_importance', String(params.min_importance))\r\n      if (params?.tags) queryParams.append('tags', params.tags)\r\n      if (params?.limit) queryParams.append('limit', String(params.limit))\r\n      \r\n      const query = queryParams.toString()\r\n      return fetchApi<AgentMemory[]>(`/api/agents/${agentId}/memory${query ? `?${query}` : ''}`)\r\n    },\r\n    get: (agentId: string, memoryId: string) =>\r\n      fetchApi<AgentMemory>(`/api/agents/${agentId}/memory/${memoryId}`),\r\n    create: (agentId: string, data: {\r\n      memory_type: string\r\n      content: any\r\n      summary?: string\r\n      importance?: number\r\n      tags?: string[]\r\n      source?: string\r\n    }) =>\r\n      fetchApi<AgentMemory>(`/api/agents/${agentId}/memory`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (agentId: string, memoryId: string, data: {\r\n      content?: any\r\n      summary?: string\r\n      importance?: number\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<AgentMemory>(`/api/agents/${agentId}/memory/${memoryId}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    delete: (agentId: string, memoryId: string) =>\r\n      fetchApi<{ status: string; memory_id: string }>(`/api/agents/${agentId}/memory/${memoryId}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    search: (agentId: string, query: {\r\n      query_text?: string\r\n      content_query?: any\r\n      memory_type?: string\r\n      limit?: number\r\n    }) =>\r\n      fetchApi<AgentMemory[]>(`/api/agents/${agentId}/memory/search`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(query),\r\n      }),\r\n    // Short-term memory (context)\r\n    saveContext: (agentId: string, data: {\r\n      context_key: string\r\n      content: any\r\n      session_id?: string\r\n      ttl_seconds?: number\r\n    }) =>\r\n      fetchApi<AgentContext>(`/api/agents/${agentId}/context`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    getContext: (agentId: string, contextKey: string) =>\r\n      fetchApi<AgentContext>(`/api/agents/${agentId}/context/${contextKey}`),\r\n    getAllContext: (agentId: string) =>\r\n      fetchApi<AgentContext[]>(`/api/agents/${agentId}/context`),\r\n    clearContext: (agentId: string) =>\r\n      fetchApi<{ status: string; cleared_count: number }>(`/api/agents/${agentId}/context`, {\r\n        method: 'DELETE',\r\n      }),\r\n  },\r\n\r\n  // Servers\r\n  servers: {\r\n    list: (activeOnly?: boolean) => {\r\n      const query = activeOnly ? '?active_only=true' : ''\r\n      return fetchApi<Array<{\r\n        id: string\r\n        name: string\r\n        url: string\r\n        api_version: string\r\n        is_active: boolean\r\n        is_default: boolean\r\n        is_available: boolean\r\n        description?: string\r\n        capabilities?: string[]\r\n        max_concurrent: number\r\n        priority: number\r\n        created_at: string\r\n        updated_at: string\r\n        last_checked_at?: string\r\n        models_count: number\r\n      }>>(`/api/servers${query}`)\r\n    },\r\n    get: (id: string) => fetchApi<any>(`/api/servers/${id}`),\r\n    create: (data: {\r\n      name: string\r\n      url: string\r\n      api_version?: string\r\n      description?: string\r\n      capabilities?: string[]\r\n      max_concurrent?: number\r\n      priority?: number\r\n      is_default?: boolean\r\n    }) =>\r\n      fetchApi<any>('/api/servers', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (id: string, data: Partial<any>) =>\r\n      fetchApi<any>(`/api/servers/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    delete: (id: string) =>\r\n      fetchApi<{ status: string }>(`/api/servers/${id}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    discover: (id: string) =>\r\n      fetchApi<{\r\n        message: string\r\n        models_found: number\r\n        models_added: number\r\n      }>(`/api/servers/${id}/discover`, {\r\n        method: 'POST',\r\n      }),\r\n    getModels: (id: string) => fetchApi<Array<{\r\n      id: string\r\n      name: string\r\n      model_name: string\r\n      is_active: boolean\r\n      capabilities?: string[]\r\n      priority: number\r\n      size_bytes?: number\r\n    }>>(`/api/servers/${id}/models`),\r\n  },\r\n\r\n  // Models Management\r\n  models: {\r\n    get: (id: string) => fetchApi<any>(`/api/models/${id}`),\r\n    update: (id: string, data: {\r\n      name?: string\r\n      capabilities?: string[]\r\n      priority?: number\r\n      is_active?: boolean\r\n    }) =>\r\n      fetchApi<any>(`/api/models/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    checkAvailability: (id: string) =>\r\n      fetchApi<{\r\n        model_id: string\r\n        model_name: string\r\n        is_available: boolean\r\n        server_url: string\r\n        error?: string\r\n      }>(`/api/models/${id}/check-availability`, {\r\n        method: 'POST',\r\n      }),\r\n    checkAll: (serverId: string) =>\r\n      fetchApi<{\r\n        server_id: string\r\n        results: Array<any>\r\n      }>(`/api/models/server/${serverId}/check-all`),\r\n  },\r\n\r\n  // Benchmarks\r\n  benchmarks: {\r\n    getTasks: (params?: {\r\n      task_type?: string\r\n      category?: string\r\n      difficulty?: string\r\n      name?: string\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.task_type) query.append('task_type', params.task_type)\r\n      if (params?.category) query.append('category', params.category)\r\n      if (params?.difficulty) query.append('difficulty', params.difficulty)\r\n      if (params?.name) query.append('name', params.name)\r\n      return fetchApi<Array<{\r\n        id: string\r\n        name: string\r\n        task_type: string\r\n        task_description: string\r\n        category?: string\r\n        difficulty?: string\r\n        expected_output?: any\r\n        validation_criteria?: any\r\n      }>>(`/api/benchmarks/tasks/?${query}`)\r\n    },\r\n    getTask: (taskId: string) =>\r\n      fetchApi<any>(`/api/benchmarks/tasks/${taskId}`),\r\n    run: (data: {\r\n      task_id?: string\r\n      task_type?: string\r\n      model_id?: string\r\n      model_name?: string\r\n      server_id?: string\r\n      server_url?: string\r\n      timeout?: number\r\n      limit?: number\r\n      evaluate?: boolean\r\n    }) =>\r\n      fetchApi<Array<{\r\n        id: string\r\n        benchmark_task_id: string\r\n        model_id?: string\r\n        server_id?: string\r\n        execution_time?: number\r\n        output?: any\r\n        score?: number\r\n        metrics?: any\r\n        passed?: boolean\r\n        error_message?: string\r\n        created_at?: string\r\n      }>>('/api/benchmarks/run/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    getResults: (params?: {\r\n      task_id?: string\r\n      model_id?: string\r\n      limit?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.task_id) query.append('task_id', params.task_id)\r\n      if (params?.model_id) query.append('model_id', params.model_id)\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      return fetchApi<Array<any>>(`/api/benchmarks/results/?${query}`)\r\n    },\r\n    getResult: (resultId: string) =>\r\n      fetchApi<{\r\n        id: string\r\n        benchmark_task_id: string\r\n        model_id?: string\r\n        server_id?: string\r\n        execution_time?: number\r\n        output?: any\r\n        score?: number\r\n        metrics?: any\r\n        passed: boolean\r\n        error_message?: string\r\n        created_at?: string\r\n        task?: {\r\n          id: string\r\n          name: string\r\n          task_type: string\r\n          task_description?: string\r\n        }\r\n      }>(`/api/benchmarks/results/${resultId}`),\r\n    evaluate: (resultId: string) =>\r\n      fetchApi<any>(`/api/benchmarks/evaluate/${resultId}`, {\r\n        method: 'POST',\r\n      }),\r\n    comparison: (data?: {\r\n      task_ids?: string[]\r\n      model_ids?: string[]\r\n      server_ids?: string[]\r\n    }) => {\r\n      if (data) {\r\n        return fetchApi<any>('/api/benchmarks/comparison/', {\r\n          method: 'POST',\r\n          body: JSON.stringify(data),\r\n        })\r\n      }\r\n      return fetchApi<any>('/api/benchmarks/comparison/')\r\n    },\r\n    getStats: () =>\r\n      fetchApi<any>('/api/benchmarks/stats/'),\r\n  },\r\n\r\n  // Agent Gym\r\n  agentGym: {\r\n    getTests: (params?: { agent_id?: string; test_type?: string }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.agent_id) query.append('agent_id', params.agent_id)\r\n      if (params?.test_type) query.append('test_type', params.test_type)\r\n      return fetchApi<Array<{\r\n        id: string\r\n        name: string\r\n        description?: string\r\n        test_type: string\r\n        agent_id: string\r\n        input_data?: any\r\n        expected_output?: any\r\n        validation_rules?: any\r\n        timeout_seconds: number\r\n        max_retries: number\r\n        required_tools?: string[]\r\n        created_by?: string\r\n        created_at: string\r\n        tags?: string[]\r\n      }>>(`/api/agent-gym/tests?${query}`)\r\n    },\r\n    getTest: (testId: string) =>\r\n      fetchApi<any>(`/api/agent-gym/tests/${testId}`),\r\n    createTest: (data: {\r\n      name: string\r\n      agent_id: string\r\n      test_type: string\r\n      input_data: any\r\n      expected_output?: any\r\n      validation_rules?: any\r\n      timeout_seconds?: number\r\n      max_retries?: number\r\n      required_tools?: string[]\r\n      description?: string\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<any>('/api/agent-gym/tests', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    updateTest: (testId: string, data: Partial<any>) =>\r\n      fetchApi<any>(`/api/agent-gym/tests/${testId}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    runTest: (testId: string, data?: { run_by?: string; notes?: string }) =>\r\n      fetchApi<{\r\n        id: string\r\n        test_id: string\r\n        status: string\r\n        started_at: string\r\n        completed_at?: string\r\n        duration_ms?: number\r\n        output_data?: any\r\n        validation_passed?: string\r\n        error_message?: string\r\n      }>(`/api/agent-gym/tests/${testId}/run`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data || {}),\r\n      }),\r\n    getTestRuns: (testId: string) =>\r\n      fetchApi<Array<any>>(`/api/agent-gym/tests/${testId}/runs`),\r\n    getTestRun: (runId: string) =>\r\n      fetchApi<any>(`/api/agent-gym/test-runs/${runId}`),\r\n  },\r\n\r\n  // Settings\r\n  settings: {\r\n    getAll: () => fetchApi<Array<{\r\n      key: string\r\n      value: any\r\n      category: string\r\n      description?: string\r\n      value_type: string\r\n    }>>('/api/settings/'),\r\n    get: (key: string) => fetchApi<any>(`/api/settings/${key}`),\r\n    update: (key: string, data: {\r\n      value: any\r\n      category?: string\r\n      value_type?: string\r\n    }) =>\r\n      fetchApi<any>('/api/settings/', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ key, ...data }),\r\n      }),\r\n    // Feature Flags\r\n    getFeatureFlags: () => fetchApi<Record<string, boolean>>('/api/settings/features/all'),\r\n    getFeatureFlag: (feature: string) => fetchApi<boolean>(`/api/settings/features/${feature}`),\r\n    setFeatureFlag: (data: {\r\n      feature: string\r\n      enabled: boolean\r\n      description?: string\r\n    }) =>\r\n      fetchApi<any>('/api/settings/features/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    // Logging Levels\r\n    getLogLevels: () => fetchApi<Record<string, string>>('/api/settings/logging/all'),\r\n    getLogLevel: (module: string) => fetchApi<string>(`/api/settings/logging/${module}`),\r\n    setLogLevel: (data: {\r\n      module?: string\r\n      level: string\r\n    }) =>\r\n      fetchApi<any>('/api/settings/logging/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    // Modules\r\n    getAllModules: () => fetchApi<string[]>('/api/settings/modules/all'),\r\n  },\r\n\r\n  // Traces\r\n  traces: {\r\n    list: (params?: {\r\n      limit?: number\r\n      offset?: number\r\n      task_id?: string\r\n      agent_id?: string\r\n      page?: number\r\n      page_size?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      if (params?.offset) query.append('offset', params.offset.toString())\r\n      if (params?.task_id) query.append('task_id', params.task_id)\r\n      if (params?.agent_id) query.append('agent_id', params.agent_id)\r\n      if (params?.page) query.append('page', params.page.toString())\r\n      if (params?.page_size) query.append('page_size', params.page_size.toString())\r\n      return fetchApi<{\r\n        traces: Array<{\r\n          id: string\r\n          trace_id: string\r\n          task_id?: string\r\n          plan_id?: string\r\n          span_id?: string\r\n          parent_span_id?: string\r\n          operation_name: string\r\n          start_time: string\r\n          end_time?: string\r\n          duration_ms?: number\r\n          status?: string\r\n          attributes?: any\r\n          agent_id?: string\r\n          tool_id?: string\r\n          error_message?: string\r\n          error_type?: string\r\n          created_at: string\r\n        }>\r\n        total: number\r\n        page: number\r\n        page_size: number\r\n      }>(`/api/traces/?${query}`)\r\n    },\r\n    get: (traceId: string) => fetchApi<{\r\n      id: string\r\n      trace_id: string\r\n      task_id?: string\r\n      plan_id?: string\r\n      span_id?: string\r\n      parent_span_id?: string\r\n      operation_name: string\r\n      start_time: string\r\n      end_time?: string\r\n      duration_ms?: number\r\n      status?: string\r\n      attributes?: any\r\n      agent_id?: string\r\n      tool_id?: string\r\n      error_message?: string\r\n      error_type?: string\r\n      created_at: string\r\n    }>(`/api/traces/${traceId}`),\r\n    getSpans: (traceId: string) => fetchApi<Array<{\r\n      id: string\r\n      trace_id: string\r\n      task_id?: string\r\n      plan_id?: string\r\n      span_id?: string\r\n      parent_span_id?: string\r\n      operation_name: string\r\n      start_time: string\r\n      end_time?: string\r\n      duration_ms?: number\r\n      status?: string\r\n      attributes?: any\r\n      agent_id?: string\r\n      tool_id?: string\r\n      error_message?: string\r\n      error_type?: string\r\n      created_at: string\r\n    }>>(`/api/traces/${traceId}/spans`),\r\n  },\r\n\r\n  // Artifacts\r\n  artifacts: {\r\n    list: (params?: {\r\n      artifact_type?: string\r\n      status?: string\r\n      limit?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.artifact_type) query.append('artifact_type', params.artifact_type)\r\n      if (params?.status) query.append('status', params.status)\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      return fetchApi<Array<{\r\n        id: string\r\n        type: string\r\n        name: string\r\n        description?: string\r\n        version: number\r\n        status: string\r\n        security_rating?: number\r\n        created_at: string\r\n        created_by?: string\r\n      }>>(`/api/artifacts/?${query}`)\r\n    },\r\n    get: (artifactId: string) => fetchApi<{\r\n      id: string\r\n      type: string\r\n      name: string\r\n      description?: string\r\n      version: number\r\n      status: string\r\n      security_rating?: number\r\n      created_at: string\r\n      created_by?: string\r\n      code?: string\r\n      prompt?: string\r\n      test_results?: any\r\n      }>(`/api/artifacts/${artifactId}`),\r\n    delete: (artifactId: string) =>\r\n      fetchApi<{ status: string; artifact_id: string }>(`/api/artifacts/${artifactId}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    create: (data: {\r\n      description: string\r\n      artifact_type: 'agent' | 'tool'\r\n      context?: Record<string, any>\r\n    }) =>\r\n      fetchApi<{\r\n        id: string\r\n        type: string\r\n        name: string\r\n        description?: string\r\n        version: number\r\n        status: string\r\n        security_rating?: number\r\n        created_at: string\r\n        created_by?: string\r\n        code?: string\r\n        prompt?: string\r\n        test_results?: any\r\n      }>('/api/artifacts/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n  },\r\n\r\n  // Approvals\r\n  approvals: {\r\n    list: (params?: {\r\n      request_type?: string\r\n      limit?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.request_type) query.append('request_type', params.request_type)\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      return fetchApi<Array<{\r\n        id: string\r\n        request_type: string\r\n        status: string\r\n        artifact_id?: string\r\n        prompt_id?: string\r\n        task_id?: string\r\n        recommendation?: string\r\n        risk_assessment?: any\r\n        created_at: string\r\n        decision_timeout?: string\r\n        requested_by?: string\r\n        approved_by?: string\r\n        description?: string\r\n      }>>(`/api/approvals/?${query}`)\r\n    },\r\n    get: (approvalId: string) => fetchApi<any>(`/api/approvals/${approvalId}`),\r\n    approve: (approvalId: string) =>\r\n      fetchApi<any>(`/api/approvals/${approvalId}/approve`, {\r\n        method: 'POST',\r\n      }),\r\n    reject: (approvalId: string) =>\r\n      fetchApi<any>(`/api/approvals/${approvalId}/reject`, {\r\n        method: 'POST',\r\n      }),\r\n  },\r\n  \r\n  // Workflow Events\r\n  workflowEvents: {\r\n    list: (params?: { workflow_id?: string; limit?: number; offset?: number; include_entities?: boolean }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.workflow_id) query.append('workflow_id', params.workflow_id)\r\n      if (params?.limit) query.append('limit', String(params.limit))\r\n      if (params?.offset) query.append('offset', String(params.offset))\r\n      if (params?.include_entities) query.append('include_entities', 'true')\r\n      \r\n      const url = `/api/workflow-events?${query.toString()}`\r\n      console.log('workflowEvents.list: Requesting', { url, params })\r\n      \r\n      return fetchApi<{\r\n        events: Array<{\r\n          id: string\r\n          workflow_id: string\r\n          event_type: string\r\n          event_source: string\r\n          stage: string\r\n          status: string\r\n          message: string\r\n          event_data?: any\r\n          metadata?: any\r\n          timestamp: string\r\n          duration_ms?: number\r\n          parent_event_id?: string\r\n          task_id?: string\r\n          plan_id?: string\r\n          tool_id?: string\r\n          approval_request_id?: string\r\n        }>\r\n        entities?: Array<{\r\n          id: string\r\n          type: 'task' | 'plan' | 'agent' | 'tool' | 'approval'\r\n          name: string\r\n          status?: string\r\n        }>\r\n        total: number\r\n        limit: number\r\n        offset: number\r\n      }>(url).then(result => {\r\n        console.log('workflowEvents.list: Response received', {\r\n          eventsCount: result.events?.length || 0,\r\n          entitiesCount: result.entities?.length || 0,\r\n          total: result.total,\r\n        })\r\n        return result\r\n      }).catch(error => {\r\n        console.error('workflowEvents.list: Request failed', error)\r\n        throw error\r\n      })\r\n    },\r\n    get: (eventId: string) =>\r\n      fetchApi<any>(`/api/workflow-events/${eventId}`),\r\n    control: (workflowId: string, action: 'pause' | 'resume' | 'cancel' | 'restart_from', eventId?: string) =>\r\n      fetchApi<{ workflow_id: string; action: string; status: string }>(\r\n        `/api/workflow-events/${workflowId}/control`,\r\n        {\r\n          method: 'POST',\r\n          body: JSON.stringify({ action, event_id: eventId }),\r\n        }\r\n      ),\r\n  },\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 552, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/lib/hooks/use-api.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { api, type Task, type Plan, type Agent, type Message, type Prompt, type AgentMemory, type AgentContext } from '../api/client'\r\nimport { toast } from 'sonner'\r\n\r\n// Tasks hooks\r\nexport function useTasks(includeAll: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['tasks', includeAll],\r\n    queryFn: () => api.tasks.list(includeAll),\r\n  })\r\n}\r\n\r\nexport function useTask(id: string, includeAll: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['task', id, includeAll],\r\n    queryFn: () => api.tasks.get(id, includeAll),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreateTask() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.tasks.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['tasks'] })\r\n      toast.success('Task created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create task: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdateTask() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<Task> }) =>\r\n      api.tasks.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['tasks'] })\r\n      queryClient.invalidateQueries({ queryKey: ['tasks', id] })\r\n      toast.success('Task updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update task: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteTask() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.tasks.delete,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['tasks'] })\r\n      toast.success('Task deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete task: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Plans hooks\r\nexport function usePlans(taskId?: string) {\r\n  return useQuery({\r\n    queryKey: ['plans', taskId],\r\n    queryFn: () => api.plans.list(taskId),\r\n    enabled: taskId ? typeof taskId === 'string' : true,\r\n  })\r\n}\r\n\r\nexport function usePlan(id: string) {\r\n  return useQuery({\r\n    queryKey: ['plans', id],\r\n    queryFn: () => api.plans.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreatePlan() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.plans.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['plans'] })\r\n      toast.success('Plan created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create plan: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Agents hooks\r\nexport function useAgents() {\r\n  return useQuery({\r\n    queryKey: ['agents'],\r\n    queryFn: api.agents.list,\r\n  })\r\n}\r\n\r\nexport function useAgent(id: string) {\r\n  return useQuery({\r\n    queryKey: ['agents', id],\r\n    queryFn: () => api.agents.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.agents.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      toast.success('Agent created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<Agent> }) =>\r\n      api.agents.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useActivateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (id: string) => api.agents.activate(id),\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent activated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to activate agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function usePauseAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (id: string) => api.agents.pause(id),\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent paused')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to pause agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeprecateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (id: string) => api.agents.deprecate(id),\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent deprecated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to deprecate agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Chat hooks\r\nexport function useChatHistory(taskId: string) {\r\n  return useQuery({\r\n    queryKey: ['chat', taskId],\r\n    queryFn: () => api.chat.getHistory(taskId),\r\n    enabled: !!taskId,\r\n  })\r\n}\r\n\r\nexport function useChatSession(sessionId: string | null) {\r\n  return useQuery({\r\n    queryKey: ['chat', 'session', sessionId],\r\n    queryFn: () => api.chat.getSession(sessionId!),\r\n    enabled: !!sessionId,\r\n  })\r\n}\r\n\r\nexport function useSendMessage() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ \r\n      taskId, \r\n      content, \r\n      sessionId, \r\n      model, \r\n      serverId, \r\n      temperature,\r\n      taskType,\r\n      systemPrompt\r\n    }: { \r\n      taskId: string\r\n      content: string\r\n      sessionId?: string\r\n      model?: string\r\n      serverId?: string\r\n      temperature?: number\r\n      taskType?: string\r\n      systemPrompt?: string\r\n    }) =>\r\n      api.chat.sendMessage(taskId, content, {\r\n        sessionId,\r\n        model,\r\n        serverId,\r\n        temperature,\r\n        taskType,\r\n        systemPrompt,\r\n      }),\r\n    onSuccess: (result, { taskId, sessionId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['chat', taskId] })\r\n      // Invalidate session query if session_id was returned or used\r\n      const finalSessionId = result.session_id || sessionId\r\n      if (finalSessionId) {\r\n        queryClient.invalidateQueries({ queryKey: ['chat', 'session', finalSessionId] })\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      // Show more informative error message\r\n      let errorMessage = 'Failed to send message'\r\n      \r\n      // Extract error message from ApiError or other error types\r\n      if (error?.message) {\r\n        errorMessage = error.message\r\n      } else if (error?.data?.message) {\r\n        errorMessage = error.data.message\r\n      } else if (error?.data?.detail) {\r\n        // FastAPI error format\r\n        if (typeof error.data.detail === 'string') {\r\n          errorMessage = error.data.detail\r\n        } else {\r\n          errorMessage = JSON.stringify(error.data.detail)\r\n        }\r\n      } else if (typeof error === 'string') {\r\n        errorMessage = error\r\n      }\r\n      \r\n      // Make error messages more user-friendly\r\n      if (errorMessage.includes('has no attribute')) {\r\n        errorMessage = 'Backend error: ' + errorMessage\r\n      } else if (errorMessage.includes('Network error') || errorMessage.includes('Unable to connect')) {\r\n        errorMessage = 'Cannot connect to the server. Please check if the backend is running.'\r\n      }\r\n      \r\n      toast.error(errorMessage)\r\n    },\r\n  })\r\n}\r\n\r\n// Prompts hooks\r\nexport function usePrompts(params?: {\r\n  prompt_type?: string\r\n  status?: string\r\n  level?: number\r\n  name?: string\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['prompts', params],\r\n    queryFn: () => api.prompts.list(params),\r\n  })\r\n}\r\n\r\nexport function usePrompt(id: string) {\r\n  return useQuery({\r\n    queryKey: ['prompts', id],\r\n    queryFn: () => api.prompts.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreatePrompt() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.prompts.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      toast.success('Prompt created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create prompt: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdatePrompt() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<Prompt> }) =>\r\n      api.prompts.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      queryClient.invalidateQueries({ queryKey: ['prompts', id] })\r\n      toast.success('Prompt updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update prompt: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeletePrompt() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.prompts.delete,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      toast.success('Prompt deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete prompt: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function usePromptVersions(id: string) {\r\n  return useQuery({\r\n    queryKey: ['prompts', id, 'versions'],\r\n    queryFn: () => api.prompts.getVersions(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function usePromptMetrics(id: string) {\r\n  return useQuery({\r\n    queryKey: ['prompts', id, 'metrics'],\r\n    queryFn: () => api.prompts.getMetrics(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\n// Agent Memory hooks\r\nexport function useAgentMemories(agentId: string, params?: {\r\n  memory_type?: string\r\n  min_importance?: number\r\n  tags?: string\r\n  limit?: number\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['agents', agentId, 'memories', params],\r\n    queryFn: () => api.agentMemory.list(agentId, params),\r\n    enabled: !!agentId,\r\n  })\r\n}\r\n\r\nexport function useAgentMemory(agentId: string, memoryId: string) {\r\n  return useQuery({\r\n    queryKey: ['agents', agentId, 'memories', memoryId],\r\n    queryFn: () => api.agentMemory.get(agentId, memoryId),\r\n    enabled: !!agentId && !!memoryId,\r\n  })\r\n}\r\n\r\nexport function useCreateAgentMemory() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ agentId, data }: { agentId: string; data: Partial<AgentMemory> }) =>\r\n      api.agentMemory.create(agentId, data as any),\r\n    onSuccess: (_, { agentId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents', agentId, 'memories'] })\r\n      toast.success('Memory created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create memory: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteAgentMemory() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ agentId, memoryId }: { agentId: string; memoryId: string }) =>\r\n      api.agentMemory.delete(agentId, memoryId),\r\n    onSuccess: (_, { agentId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents', agentId, 'memories'] })\r\n      toast.success('Memory deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete memory: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useAgentContext(agentId: string) {\r\n  return useQuery({\r\n    queryKey: ['agents', agentId, 'context'],\r\n    queryFn: () => api.agentMemory.getAllContext(agentId),\r\n    enabled: !!agentId,\r\n  })\r\n}\r\n\r\n// Servers hooks\r\nexport function useServers(activeOnly?: boolean) {\r\n  return useQuery({\r\n    queryKey: ['servers', activeOnly],\r\n    queryFn: () => api.servers.list(activeOnly),\r\n  })\r\n}\r\n\r\nexport function useServer(id: string) {\r\n  return useQuery({\r\n    queryKey: ['servers', id],\r\n    queryFn: () => api.servers.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreateServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.servers.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      toast.success('Server created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create server: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdateServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<any> }) =>\r\n      api.servers.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      queryClient.invalidateQueries({ queryKey: ['servers', id] })\r\n      toast.success('Server updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update server: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.servers.delete,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      toast.success('Server deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete server: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useServerModels(serverId: string) {\r\n  return useQuery({\r\n    queryKey: ['servers', serverId, 'models'],\r\n    queryFn: () => api.servers.getModels(serverId),\r\n    enabled: !!serverId,\r\n  })\r\n}\r\n\r\nexport function useDiscoverServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (serverId: string) => api.servers.discover(serverId),\r\n    onSuccess: (_, serverId) => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      queryClient.invalidateQueries({ queryKey: ['servers', serverId, 'models'] })\r\n      toast.success('Server models discovered successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to discover models: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Models Management hooks\r\nexport function useUpdateModel() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<any> }) =>\r\n      api.models.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['models'] })\r\n      queryClient.invalidateQueries({ queryKey: ['models', id] })\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      toast.success('Model updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update model: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useCheckModelAvailability() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (modelId: string) => api.models.checkAvailability(modelId),\r\n    onSuccess: (_, modelId) => {\r\n      queryClient.invalidateQueries({ queryKey: ['models', modelId] })\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to check model availability: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Benchmarks hooks\r\nexport function useBenchmarkTasks(params?: {\r\n  task_type?: string\r\n  category?: string\r\n  difficulty?: string\r\n  name?: string\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'tasks', params],\r\n    queryFn: () => api.benchmarks.getTasks(params),\r\n  })\r\n}\r\n\r\nexport function useBenchmarkTask(taskId: string) {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'tasks', taskId],\r\n    queryFn: () => api.benchmarks.getTask(taskId),\r\n    enabled: !!taskId,\r\n  })\r\n}\r\n\r\nexport function useRunBenchmark() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.benchmarks.run,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['benchmarks', 'results'] })\r\n      toast.success('Benchmark started successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to run benchmark: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useBenchmarkResults(params?: {\r\n  task_id?: string\r\n  model_id?: string\r\n  limit?: number\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'results', params],\r\n    queryFn: () => api.benchmarks.getResults(params),\r\n  })\r\n}\r\n\r\nexport function useBenchmarkComparison() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (data?: { model_ids?: string[]; task_type?: string }) => \r\n      api.benchmarks.comparison(data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['benchmarks', 'comparison'] })\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to compare benchmarks: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useBenchmarkStats() {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'stats'],\r\n    queryFn: () => api.benchmarks.getStats(),\r\n  })\r\n}\r\n\r\n// Agent Gym hooks\r\nexport function useAgentGymTests(params?: { agent_id?: string; test_type?: string }) {\r\n  return useQuery({\r\n    queryKey: ['agent-gym', 'tests', params],\r\n    queryFn: () => api.agentGym.getTests(params),\r\n  })\r\n}\r\n\r\nexport function useAgentGymTest(testId: string) {\r\n  return useQuery({\r\n    queryKey: ['agent-gym', 'tests', testId],\r\n    queryFn: () => api.agentGym.getTest(testId),\r\n    enabled: !!testId,\r\n  })\r\n}\r\n\r\nexport function useCreateAgentGymTest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.agentGym.createTest,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['agent-gym', 'tests'] })\r\n      toast.success('Test created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create test: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useRunAgentGymTest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ testId, data }: { testId: string; data?: { run_by?: string; notes?: string } }) =>\r\n      api.agentGym.runTest(testId, data),\r\n    onSuccess: (_, { testId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agent-gym', 'tests', testId, 'runs'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agent-gym', 'tests', testId] })\r\n      toast.success('Test started successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to run test: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useAgentGymTestRuns(testId: string) {\r\n  return useQuery({\r\n    queryKey: ['agent-gym', 'tests', testId, 'runs'],\r\n    queryFn: () => api.agentGym.getTestRuns(testId),\r\n    enabled: !!testId,\r\n  })\r\n}\r\n\r\n// Settings hooks\r\nexport function useSettings() {\r\n  return useQuery({\r\n    queryKey: ['settings'],\r\n    queryFn: () => api.settings.getAll(),\r\n  })\r\n}\r\n\r\nexport function useFeatureFlags() {\r\n  return useQuery({\r\n    queryKey: ['settings', 'features'],\r\n    queryFn: () => api.settings.getFeatureFlags(),\r\n  })\r\n}\r\n\r\nexport function useSetFeatureFlag() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.settings.setFeatureFlag,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['settings', 'features'] })\r\n      toast.success('Feature flag updated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update feature flag: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useLogLevels() {\r\n  return useQuery({\r\n    queryKey: ['settings', 'logging'],\r\n    queryFn: () => api.settings.getLogLevels(),\r\n  })\r\n}\r\n\r\nexport function useSetLogLevel() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.settings.setLogLevel,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['settings', 'logging'] })\r\n      toast.success('Log level updated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update log level: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useAllModules() {\r\n  return useQuery({\r\n    queryKey: ['settings', 'modules'],\r\n    queryFn: () => api.settings.getAllModules(),\r\n  })\r\n}\r\n\r\n// Traces hooks\r\nexport function useTraces(params?: {\r\n  limit?: number\r\n  offset?: number\r\n  task_id?: string\r\n  agent_id?: string\r\n  page?: number\r\n  page_size?: number\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['traces', params],\r\n    queryFn: () => api.traces.list({\r\n      ...params,\r\n      page_size: params?.page_size || params?.limit,\r\n    }),\r\n  })\r\n}\r\n\r\nexport function useTrace(traceId: string) {\r\n  return useQuery({\r\n    queryKey: ['trace', traceId],\r\n    queryFn: () => api.traces.get(traceId),\r\n    enabled: !!traceId,\r\n  })\r\n}\r\n\r\nexport function useTraceSpans(traceId: string) {\r\n  return useQuery({\r\n    queryKey: ['trace', traceId, 'spans'],\r\n    queryFn: () => api.traces.getSpans(traceId),\r\n    enabled: !!traceId,\r\n  })\r\n}\r\n\r\n// Artifacts hooks\r\nexport function useArtifacts() {\r\n  return useQuery({\r\n    queryKey: ['artifacts'],\r\n    queryFn: () => api.artifacts.list(),\r\n  })\r\n}\r\n\r\nexport function useArtifact(artifactId: string) {\r\n  return useQuery({\r\n    queryKey: ['artifacts', artifactId],\r\n    queryFn: () => api.artifacts.get(artifactId),\r\n    enabled: !!artifactId,\r\n  })\r\n}\r\n\r\nexport function useCreateArtifact() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.artifacts.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['artifacts'] })\r\n      toast.success('Artifact created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create artifact: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteArtifact() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (artifactId: string) => api.artifacts.delete(artifactId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['artifacts'] })\r\n      toast.success('Artifact deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete artifact: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Approvals hooks\r\nexport function useApprovals() {\r\n  return useQuery({\r\n    queryKey: ['approvals'],\r\n    queryFn: () => api.approvals.list(),\r\n    // Disable automatic refetch on window focus to reduce unnecessary requests\r\n    // Approvals are not time-sensitive data that needs constant updates\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    // Only refetch when component mounts or manually invalidated\r\n    staleTime: 5 * 60 * 1000, // Consider data fresh for 5 minutes\r\n  })\r\n}\r\n\r\nexport function useApproval(approvalId: string) {\r\n  return useQuery({\r\n    queryKey: ['approvals', approvalId],\r\n    queryFn: () => api.approvals.get(approvalId),\r\n    enabled: !!approvalId,\r\n  })\r\n}\r\n\r\nexport function useApproveRequest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (approvalId: string) => api.approvals.approve(approvalId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['approvals'] })\r\n      toast.success('Request approved')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to approve: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useRejectRequest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (approvalId: string) => api.approvals.reject(approvalId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['approvals'] })\r\n      toast.success('Request rejected')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to reject: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useCreatePromptVersion() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, prompt_text }: { id: string; prompt_text: string }) =>\r\n      api.prompts.createVersion(id, prompt_text),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      queryClient.invalidateQueries({ queryKey: ['prompts', id] })\r\n      queryClient.invalidateQueries({ queryKey: ['prompts', id, 'versions'] })\r\n      toast.success('Prompt version created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create prompt version: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Workflow Events hooks\r\nexport function useWorkflowEvents(workflowId: string | null, includeEntities: boolean = false) {\r\n  return useQuery({\r\n    queryKey: ['workflow-events', workflowId, includeEntities],\r\n    queryFn: async () => {\r\n      console.log('useWorkflowEvents: Fetching data', { workflowId, includeEntities })\r\n      console.log('useWorkflowEvents: api object', { hasWorkflowEvents: !!api.workflowEvents, hasList: !!api.workflowEvents?.list })\r\n      \r\n      if (!api.workflowEvents || !api.workflowEvents.list) {\r\n        throw new Error('api.workflowEvents.list is not available')\r\n      }\r\n      \r\n      try {\r\n        console.log('useWorkflowEvents: Calling api.workflowEvents.list...')\r\n        const params = { \r\n          workflow_id: workflowId || undefined, \r\n          limit: 100,\r\n          include_entities: includeEntities,\r\n        }\r\n        console.log('useWorkflowEvents: Params', params)\r\n        \r\n        const result = await api.workflowEvents.list(params)\r\n        \r\n        console.log('useWorkflowEvents: Data received', {\r\n          eventsCount: result.events?.length || 0,\r\n          entitiesCount: result.entities?.length || 0,\r\n          total: result.total,\r\n          hasEvents: !!result.events,\r\n          hasEntities: !!result.entities,\r\n        })\r\n        return result\r\n      } catch (error) {\r\n        console.error('useWorkflowEvents: Error fetching data', error)\r\n        console.error('useWorkflowEvents: Error details', {\r\n          message: error instanceof Error ? error.message : String(error),\r\n          stack: error instanceof Error ? error.stack : undefined,\r\n          name: error instanceof Error ? error.name : undefined,\r\n        })\r\n        throw error\r\n      }\r\n    },\r\n    enabled: !!workflowId,\r\n    refetchInterval: 2000, // Poll every 2 seconds for new events\r\n    retry: 1, // Retry once on failure\r\n  })\r\n}\r\n\r\nexport function useWorkflowEvent(eventId: string) {\r\n  return useQuery({\r\n    queryKey: ['workflow-events', eventId],\r\n    queryFn: () => api.workflowEvents.get(eventId),\r\n    enabled: !!eventId,\r\n  })\r\n}\r\n\r\nexport function useControlWorkflow() {\r\n  const queryClient = useQueryClient()\r\n  return useMutation({\r\n    mutationFn: ({ workflowId, action, eventId }: { workflowId: string; action: 'pause' | 'resume' | 'cancel' | 'restart_from'; eventId?: string }) =>\r\n      api.workflowEvents.control(workflowId, action, eventId),\r\n    onSuccess: (_, { workflowId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['workflow-events', workflowId] })\r\n      toast.success(`Workflow ${_.action} requested`)\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to control workflow: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2541, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border bg-card text-card-foreground shadow\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 2648, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 2696, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\r\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 2741, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/tasks/task-plans.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { usePlans } from '@/lib/hooks/use-api'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Workflow, ArrowRight } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { formatDistanceToNow } from 'date-fns'\r\n\r\ninterface TaskPlansProps {\r\n  taskId: string\r\n}\r\n\r\nexport function TaskPlans({ taskId }: TaskPlansProps) {\r\n  // Ensure taskId is a string\r\n  const taskIdString = typeof taskId === 'string' ? taskId : String(taskId)\r\n  const { data: plans, isLoading } = usePlans(taskIdString)\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Plans</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-2\">\r\n            {[1, 2].map((i) => (\r\n              <div key={i} className=\"h-16 bg-muted rounded animate-pulse\" />\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  if (!plans || plans.length === 0) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Plans</CardTitle>\r\n          <CardDescription>No plans created for this task yet</CardDescription>\r\n        </CardHeader>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle>Plans ({plans.length})</CardTitle>\r\n        <CardDescription>Execution plans for this task</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"space-y-3\">\r\n          {plans.map((plan) => (\r\n            <Link\r\n              key={plan.id}\r\n              href={`/plans/${plan.id}`}\r\n              className=\"block p-3 rounded-lg border hover:bg-accent transition-colors\"\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center space-x-2 mb-1\">\r\n                    <Workflow className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span className=\"font-medium\">{plan.goal || 'Untitled Plan'}</span>\r\n                    <Badge variant=\"outline\">{plan.status}</Badge>\r\n                    {plan.version > 1 && (\r\n                      <Badge variant=\"outline\" className=\"text-xs\">v{plan.version}</Badge>\r\n                    )}\r\n                  </div>\r\n                  {plan.strategy && (\r\n                    <p className=\"text-xs text-muted-foreground line-clamp-1\">\r\n                      {typeof plan.strategy === 'string' \r\n                        ? plan.strategy \r\n                        : plan.strategy.approach || plan.strategy.success_criteria || 'Strategy defined'}\r\n                    </p>\r\n                  )}\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    Created {formatDistanceToNow(new Date(plan.created_at), { addSuffix: true })}\r\n                  </p>\r\n                </div>\r\n                <ArrowRight className=\"h-4 w-4 text-muted-foreground\" />\r\n              </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AAAA;AACA;AACA;;;AARA;;;;;;;AAcO,SAAS,UAAU,EAAE,MAAM,EAAkB;;IAClD,4BAA4B;IAC5B,MAAM,eAAe,OAAO,WAAW,WAAW,SAAS,OAAO;IAClE,MAAM,EAAE,MAAM,KAAK,EAAE,SAAS,EAAE,GAAG,IAAA,yIAAQ,EAAC;IAE5C,IAAI,WAAW;QACb,qBACE,6LAAC,oIAAI;;8BACH,6LAAC,0IAAU;8BACT,cAAA,6LAAC,yIAAS;kCAAC;;;;;;;;;;;8BAEb,6LAAC,2IAAW;8BACV,cAAA,6LAAC;wBAAI,WAAU;kCACZ;4BAAC;4BAAG;yBAAE,CAAC,GAAG,CAAC,CAAC,kBACX,6LAAC;gCAAY,WAAU;+BAAb;;;;;;;;;;;;;;;;;;;;;IAMtB;IAEA,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG;QAChC,qBACE,6LAAC,oIAAI;sBACH,cAAA,6LAAC,0IAAU;;kCACT,6LAAC,yIAAS;kCAAC;;;;;;kCACX,6LAAC,+IAAe;kCAAC;;;;;;;;;;;;;;;;;IAIzB;IAEA,qBACE,6LAAC,oIAAI;;0BACH,6LAAC,0IAAU;;kCACT,6LAAC,yIAAS;;4BAAC;4BAAQ,MAAM,MAAM;4BAAC;;;;;;;kCAChC,6LAAC,+IAAe;kCAAC;;;;;;;;;;;;0BAEnB,6LAAC,2IAAW;0BACV,cAAA,6LAAC;oBAAI,WAAU;8BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC,0KAAI;4BAEH,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE;4BACzB,WAAU;sCAEV,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC,yNAAQ;wDAAC,WAAU;;;;;;kEACpB,6LAAC;wDAAK,WAAU;kEAAe,KAAK,IAAI,IAAI;;;;;;kEAC5C,6LAAC,sIAAK;wDAAC,SAAQ;kEAAW,KAAK,MAAM;;;;;;oDACpC,KAAK,OAAO,GAAG,mBACd,6LAAC,sIAAK;wDAAC,SAAQ;wDAAU,WAAU;;4DAAU;4DAAE,KAAK,OAAO;;;;;;;;;;;;;4CAG9D,KAAK,QAAQ,kBACZ,6LAAC;gDAAE,WAAU;0DACV,OAAO,KAAK,QAAQ,KAAK,WACtB,KAAK,QAAQ,GACb,KAAK,QAAQ,CAAC,QAAQ,IAAI,KAAK,QAAQ,CAAC,gBAAgB,IAAI;;;;;;0DAGpE,6LAAC;gDAAE,WAAU;;oDAAqC;oDACvC,IAAA,6KAAmB,EAAC,IAAI,KAAK,KAAK,UAAU,GAAG;wDAAE,WAAW;oDAAK;;;;;;;;;;;;;kDAG9E,6LAAC,mOAAU;wCAAC,WAAU;;;;;;;;;;;;2BAzBnB,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;AAiC1B;GA5EgB;;QAGqB,yIAAQ;;;KAH7B"}},
    {"offset": {"line": 3004, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/app/tasks/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useTask } from '@/lib/hooks/use-api'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { ArrowLeft, Activity, Clock, CheckCircle, XCircle, Loader2, MessageSquare } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { useParams } from 'next/navigation'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { TaskPlans } from '@/components/tasks/task-plans'\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  const statusLower = status?.toLowerCase() || ''\r\n  if (['in_progress', 'executing'].includes(statusLower)) {\r\n    return { label: 'In Progress', icon: Activity, color: 'bg-blue-500' }\r\n  }\r\n  if (['completed', 'done'].includes(statusLower)) {\r\n    return { label: 'Completed', icon: CheckCircle, color: 'bg-green-500' }\r\n  }\r\n  if (['failed', 'error'].includes(statusLower)) {\r\n    return { label: 'Failed', icon: XCircle, color: 'bg-red-500' }\r\n  }\r\n  if (['pending', 'planning', 'pending_approval'].includes(statusLower)) {\r\n    return { label: 'Pending', icon: Clock, color: 'bg-yellow-500' }\r\n  }\r\n  return { label: status || 'Unknown', icon: Clock, color: 'bg-gray-500' }\r\n}\r\n\r\nexport default function TaskDetailPage() {\r\n  const params = useParams()\r\n  const taskId = params.id as string\r\n  const { data: task, isLoading } = useTask(taskId)\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"space-y-4\">\r\n          <div className=\"h-8 bg-muted rounded w-1/4 animate-pulse\" />\r\n          <Card className=\"animate-pulse\">\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"h-4 bg-muted rounded w-3/4 mb-4\" />\r\n              <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!task) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n          <Card>\r\n            <CardContent className=\"p-12 text-center\">\r\n              <p className=\"text-muted-foreground mb-4\">Task not found</p>\r\n              <Link href=\"/tasks\">\r\n                <Button variant=\"outline\">\r\n                  <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n                  Back to Tasks\r\n                </Button>\r\n              </Link>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n    )\r\n  }\r\n\r\n  const config = getStatusConfig(task.status)\r\n  const Icon = config.icon\r\n  const isInProgress = ['in_progress', 'executing'].includes(task.status?.toLowerCase())\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <Link href=\"/tasks\">\r\n            <Button variant=\"ghost\" className=\"mb-4\">\r\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              Back to Tasks\r\n            </Button>\r\n          </Link>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className={`h-12 w-12 rounded-full ${config.color} flex items-center justify-center`}>\r\n              <Icon className={`h-6 w-6 text-white ${isInProgress ? 'animate-spin' : ''}`} />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold tracking-tight\">\r\n                {task.description || 'Untitled Task'}\r\n              </h1>\r\n              <div className=\"flex items-center space-x-2 mt-2\">\r\n                <Badge variant=\"default\">{config.label}</Badge>\r\n                {task.current_stage && (\r\n                  <Badge variant=\"outline\">{task.current_stage}</Badge>\r\n                )}\r\n                <Link href={`/chat/${taskId}`}>\r\n                  <Button variant=\"outline\" size=\"sm\">\r\n                    <MessageSquare className=\"h-4 w-4 mr-2\" />\r\n                    Chat\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {/* Main Info */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Task Information</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Status</p>\r\n                <p className=\"font-medium\">{config.label}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Current Stage</p>\r\n                <p className=\"font-medium\">{task.current_stage || 'N/A'}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Created</p>\r\n                <p className=\"font-medium\">\r\n                  {formatDistanceToNow(new Date(task.created_at), { addSuffix: true })}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Last Updated</p>\r\n                <p className=\"font-medium\">\r\n                  {formatDistanceToNow(new Date(task.updated_at), { addSuffix: true })}\r\n                </p>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Progress */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Progress</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <div className=\"flex justify-between mb-2\">\r\n                  <span className=\"text-sm text-muted-foreground\">Completion</span>\r\n                  <span className=\"text-sm font-medium\">{task.progress_percent.toFixed(0)}%</span>\r\n                </div>\r\n                <Progress value={task.progress_percent} />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Steps</p>\r\n                <p className=\"font-medium\">\r\n                  {task.completed_steps} of {task.total_steps} completed\r\n                </p>\r\n              </div>\r\n              {task.current_step && (\r\n                <div>\r\n                  <p className=\"text-sm text-muted-foreground\">Current Step</p>\r\n                  <p className=\"font-medium\">{task.current_step.description}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    Step {task.current_step.step_number}  {task.current_step.status}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Agents & Tools */}\r\n          {(task.agents_in_use?.length > 0 || task.tools_in_use?.length > 0) && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Resources</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                {task.agents_in_use && task.agents_in_use.length > 0 && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">Agents</p>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {task.agents_in_use.map((agent) => (\r\n                        <Badge key={agent} variant=\"outline\">{agent}</Badge>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                {task.tools_in_use && task.tools_in_use.length > 0 && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">Tools</p>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {task.tools_in_use.map((tool) => (\r\n                        <Badge key={tool} variant=\"outline\">{tool}</Badge>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Latest Logs */}\r\n          {task.latest_logs && task.latest_logs.length > 0 && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Recent Activity</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-2\">\r\n                  {task.latest_logs.slice(0, 5).map((log, idx) => (\r\n                    <div key={idx} className=\"text-sm border-l-2 pl-3 py-1\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"font-medium\">{log.stage}</span>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          {formatDistanceToNow(new Date(log.timestamp), { addSuffix: true })}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\r\n                        {log.content_preview}\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Plans for this task */}\r\n          <div className=\"md:col-span-2\">\r\n            <TaskPlans taskId={task.task_id} />\r\n          </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}