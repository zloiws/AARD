{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border bg-card text-card-foreground shadow\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/lib/api/client.ts"],"sourcesContent":["// Base API configuration\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000'\r\n\r\nexport class ApiError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public status: number,\r\n    public data?: any\r\n  ) {\r\n    super(message)\r\n    this.name = 'ApiError'\r\n  }\r\n}\r\n\r\nasync function fetchApi<T>(\r\n  endpoint: string,\r\n  options?: RequestInit\r\n): Promise<T> {\r\n  const url = `${API_BASE_URL}${endpoint}`\r\n  \r\n  const response = await fetch(url, {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options?.headers,\r\n    },\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}))\r\n    throw new ApiError(\r\n      errorData.message || 'API request failed',\r\n      response.status,\r\n      errorData\r\n    )\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n// Types\r\nexport interface Task {\r\n  task_id: string\r\n  description: string\r\n  status: string\r\n  created_at: string\r\n  updated_at: string\r\n  current_stage: string\r\n  progress_percent: number\r\n  plan_version?: number\r\n  current_step?: {\r\n    step_id: string\r\n    step_number: number\r\n    description: string\r\n    status: string\r\n    started_at?: string\r\n  }\r\n  total_steps: number\r\n  completed_steps: number\r\n  latest_logs: Array<{\r\n    timestamp: string\r\n    stage: string\r\n    model: string\r\n    content_preview: string\r\n  }>\r\n  agents_in_use: string[]\r\n  tools_in_use: string[]\r\n}\r\n\r\nexport interface TasksResponse {\r\n  tasks: Task[]\r\n  total: number\r\n}\r\n\r\nexport interface Plan {\r\n  id: string\r\n  task_id: string\r\n  version: number\r\n  goal: string\r\n  strategy?: string | {\r\n    approach?: string\r\n    assumptions?: string\r\n    constraints?: string\r\n    success_criteria?: string\r\n  }\r\n  steps: PlanStep[]\r\n  alternatives?: any[]\r\n  status: string\r\n  current_step?: number\r\n  estimated_duration?: number\r\n  actual_duration?: number\r\n  created_at: string\r\n  approved_at?: string\r\n}\r\n\r\nexport interface PlanStep {\r\n  step_id?: string\r\n  description: string\r\n  status?: string\r\n  assigned_agent?: string\r\n}\r\n\r\nexport interface Agent {\r\n  id: string\r\n  name: string\r\n  description?: string\r\n  status: string\r\n  capabilities?: string[]\r\n  version: number\r\n  created_at: string\r\n  updated_at: string\r\n  total_tasks_executed: number\r\n  successful_tasks: number\r\n  failed_tasks: number\r\n}\r\n\r\nexport interface Message {\r\n  id: string\r\n  task_id?: string\r\n  role: 'user' | 'assistant' | 'system'\r\n  content: string\r\n  created_at: string\r\n  session_id?: string\r\n  response?: string\r\n}\r\n\r\nexport interface Prompt {\r\n  id: string\r\n  name: string\r\n  prompt_text: string\r\n  prompt_type: string\r\n  level: number\r\n  version: number\r\n  status: string\r\n  success_rate?: number\r\n  usage_count: number\r\n  created_at: string\r\n  parent_prompt_id?: string\r\n  avg_execution_time?: number\r\n  user_rating?: number\r\n}\r\n\r\nexport interface PromptMetrics {\r\n  prompt_id: string\r\n  prompt_name: string\r\n  version: number\r\n  usage_count: number\r\n  success_rate?: number\r\n  avg_execution_time?: number\r\n  user_rating?: number\r\n  usage_history: any[]\r\n  total_history_entries: number\r\n}\r\n\r\nexport interface AgentMemory {\r\n  id: string\r\n  agent_id: string\r\n  memory_type: string\r\n  content: any\r\n  summary?: string\r\n  importance: number\r\n  access_count: number\r\n  last_accessed_at?: string\r\n  tags?: string[]\r\n  source?: string\r\n  created_at: string\r\n  expires_at?: string\r\n}\r\n\r\nexport interface AgentContext {\r\n  id: string\r\n  agent_id: string\r\n  session_id?: string\r\n  context_key: string\r\n  content: any\r\n  ttl_seconds?: number\r\n  created_at: string\r\n  expires_at?: string\r\n}\r\n\r\n// API Client\r\nexport const api = {\r\n  // Tasks (using current-work endpoint)\r\n  tasks: {\r\n    list: (includeAll: boolean = true) => \r\n      fetchApi<TasksResponse>(`/api/current-work/tasks?include_all=${includeAll}`).then(res => res.tasks),\r\n    get: (id: string, includeAll: boolean = true) => \r\n      fetchApi<Task>(`/api/current-work/task/${id}?include_all=${includeAll}`),\r\n  },\r\n\r\n  // Plans\r\n  plans: {\r\n    list: (taskId?: string) => {\r\n      // Ensure taskId is a string, not an object\r\n      if (taskId !== undefined && taskId !== null) {\r\n        if (typeof taskId !== 'string') {\r\n          console.error('plans.list received non-string taskId:', taskId, typeof taskId)\r\n          // If it's an object, try to extract id\r\n          if (typeof taskId === 'object') {\r\n            const id = (taskId as any)?.id || (taskId as any)?.task_id\r\n            if (id && typeof id === 'string') {\r\n              return fetchApi<Plan[]>(`/api/plans?task_id=${id}`)\r\n            }\r\n          }\r\n          // Return all plans if invalid taskId\r\n          return fetchApi<Plan[]>('/api/plans')\r\n        }\r\n        // Valid string taskId\r\n        return fetchApi<Plan[]>(`/api/plans?task_id=${taskId}`)\r\n      }\r\n      // No taskId provided\r\n      return fetchApi<Plan[]>('/api/plans')\r\n    },\r\n    get: (id: string) => fetchApi<Plan>(`/api/plans/${id}`),\r\n    create: (taskId: string) =>\r\n      fetchApi<Plan>('/api/plans', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ task_id: taskId }),\r\n      }),\r\n  },\r\n\r\n  // Agents\r\n  agents: {\r\n    list: () => fetchApi<Agent[]>('/api/agents'),\r\n    get: (id: string) => fetchApi<Agent>(`/api/agents/${id}`),\r\n    create: (data: {\r\n      name: string\r\n      description?: string\r\n      system_prompt?: string\r\n      capabilities?: string[]\r\n      model_preference?: string\r\n      temperature?: string\r\n      max_concurrent_tasks?: number\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<Agent>('/api/agents', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (id: string, data: {\r\n      description?: string\r\n      system_prompt?: string\r\n      capabilities?: string[]\r\n      model_preference?: string\r\n      temperature?: string\r\n      max_concurrent_tasks?: number\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<Agent>(`/api/agents/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    activate: (id: string) =>\r\n      fetchApi<Agent>(`/api/agents/${id}/activate`, {\r\n        method: 'POST',\r\n      }),\r\n    pause: (id: string) =>\r\n      fetchApi<Agent>(`/api/agents/${id}/pause`, {\r\n        method: 'POST',\r\n      }),\r\n    deprecate: (id: string) =>\r\n      fetchApi<Agent>(`/api/agents/${id}/deprecate`, {\r\n        method: 'POST',\r\n      }),\r\n  },\r\n\r\n  // Messages/Chat\r\n  chat: {\r\n    sendMessage: (taskId: string, content: string, options?: {\r\n      sessionId?: string\r\n      model?: string\r\n      serverId?: string\r\n      temperature?: number\r\n      taskType?: string\r\n      systemPrompt?: string\r\n    }) => {\r\n      // taskId can be 'general' for general chat or actual task ID\r\n      const body: any = {\r\n        message: content,\r\n        task_type: options?.taskType || 'general_chat',\r\n      }\r\n      if (options?.sessionId) {\r\n        body.session_id = options.sessionId\r\n      }\r\n      if (options?.model) {\r\n        body.model = options.model\r\n      }\r\n      if (options?.serverId) {\r\n        body.server_id = options.serverId\r\n      }\r\n      if (options?.temperature !== undefined) {\r\n        body.temperature = options.temperature\r\n      }\r\n      if (options?.systemPrompt) {\r\n        body.system_prompt = options.systemPrompt\r\n      }\r\n      return fetchApi<{\r\n        response: string\r\n        model: string\r\n        task_type: string\r\n        duration_ms?: number\r\n        session_id?: string\r\n        trace_id?: string\r\n        reasoning?: string\r\n        workflow_id?: string\r\n      }>('/api/chat', {\r\n        method: 'POST',\r\n        body: JSON.stringify(body),\r\n      })\r\n    },\r\n    getHistory: (taskId: string) => {\r\n      // For now, return empty array as chat history is session-based\r\n      // TODO: Implement proper session management\r\n      return Promise.resolve([] as Message[])\r\n    },\r\n    getSession: (sessionId: string) =>\r\n      fetchApi<{\r\n        session_id: string\r\n        created_at: string\r\n        title: string | null\r\n        messages: Array<{\r\n          id: string\r\n          role: string\r\n          content: string\r\n          model: string | null\r\n          timestamp: string\r\n          metadata: any\r\n        }>\r\n      }>(`/api/chat/session/${sessionId}`),\r\n    deleteSession: (sessionId: string) =>\r\n      fetchApi<{ status: string; message: string }>(`/api/chat/session/${sessionId}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    createSession: (title?: string, systemPrompt?: string) =>\r\n      fetchApi<{\r\n        session_id: string\r\n        created_at: string\r\n        title: string | null\r\n        system_prompt: string | null\r\n      }>('/api/chat/session', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ title, system_prompt: systemPrompt }),\r\n      }),\r\n  },\r\n\r\n  // Prompts\r\n  prompts: {\r\n    list: (params?: {\r\n      prompt_type?: string\r\n      status?: string\r\n      level?: number\r\n      name?: string\r\n      limit?: number\r\n      offset?: number\r\n    }) => {\r\n      const queryParams = new URLSearchParams()\r\n      if (params?.prompt_type) queryParams.append('prompt_type', params.prompt_type)\r\n      if (params?.status) queryParams.append('status', params.status)\r\n      if (params?.level !== undefined) queryParams.append('level', String(params.level))\r\n      if (params?.name) queryParams.append('name', params.name)\r\n      if (params?.limit) queryParams.append('limit', String(params.limit))\r\n      if (params?.offset) queryParams.append('offset', String(params.offset))\r\n      \r\n      const query = queryParams.toString()\r\n      return fetchApi<Prompt[]>(`/api/prompts${query ? `?${query}` : ''}`)\r\n    },\r\n    get: (id: string) => fetchApi<Prompt>(`/api/prompts/${id}`),\r\n    create: (data: {\r\n      name: string\r\n      prompt_text: string\r\n      prompt_type: string\r\n      level?: number\r\n    }) =>\r\n      fetchApi<Prompt>('/api/prompts', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (id: string, data: {\r\n      name?: string\r\n      prompt_text?: string\r\n      status?: string\r\n    }) =>\r\n      fetchApi<Prompt>(`/api/prompts/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    delete: (id: string) =>\r\n      fetchApi<{ status: string; prompt_id: string }>(`/api/prompts/${id}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    createVersion: (id: string, prompt_text: string) =>\r\n      fetchApi<Prompt>(`/api/prompts/${id}/version`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({ prompt_text }),\r\n      }),\r\n    getVersions: (id: string) => fetchApi<Prompt[]>(`/api/prompts/${id}/versions`),\r\n    getMetrics: (id: string) => fetchApi<PromptMetrics>(`/api/prompts/${id}/metrics`),\r\n    deprecate: (id: string) =>\r\n      fetchApi<Prompt>(`/api/prompts/${id}/deprecate`, {\r\n        method: 'POST',\r\n      }),\r\n  },\r\n\r\n  // Agent Memory\r\n  agentMemory: {\r\n    list: (agentId: string, params?: {\r\n      memory_type?: string\r\n      min_importance?: number\r\n      tags?: string\r\n      limit?: number\r\n    }) => {\r\n      const queryParams = new URLSearchParams()\r\n      if (params?.memory_type) queryParams.append('memory_type', params.memory_type)\r\n      if (params?.min_importance !== undefined) queryParams.append('min_importance', String(params.min_importance))\r\n      if (params?.tags) queryParams.append('tags', params.tags)\r\n      if (params?.limit) queryParams.append('limit', String(params.limit))\r\n      \r\n      const query = queryParams.toString()\r\n      return fetchApi<AgentMemory[]>(`/api/agents/${agentId}/memory${query ? `?${query}` : ''}`)\r\n    },\r\n    get: (agentId: string, memoryId: string) =>\r\n      fetchApi<AgentMemory>(`/api/agents/${agentId}/memory/${memoryId}`),\r\n    create: (agentId: string, data: {\r\n      memory_type: string\r\n      content: any\r\n      summary?: string\r\n      importance?: number\r\n      tags?: string[]\r\n      source?: string\r\n    }) =>\r\n      fetchApi<AgentMemory>(`/api/agents/${agentId}/memory`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (agentId: string, memoryId: string, data: {\r\n      content?: any\r\n      summary?: string\r\n      importance?: number\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<AgentMemory>(`/api/agents/${agentId}/memory/${memoryId}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    delete: (agentId: string, memoryId: string) =>\r\n      fetchApi<{ status: string; memory_id: string }>(`/api/agents/${agentId}/memory/${memoryId}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    search: (agentId: string, query: {\r\n      query_text?: string\r\n      content_query?: any\r\n      memory_type?: string\r\n      limit?: number\r\n    }) =>\r\n      fetchApi<AgentMemory[]>(`/api/agents/${agentId}/memory/search`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(query),\r\n      }),\r\n    // Short-term memory (context)\r\n    saveContext: (agentId: string, data: {\r\n      context_key: string\r\n      content: any\r\n      session_id?: string\r\n      ttl_seconds?: number\r\n    }) =>\r\n      fetchApi<AgentContext>(`/api/agents/${agentId}/context`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    getContext: (agentId: string, contextKey: string) =>\r\n      fetchApi<AgentContext>(`/api/agents/${agentId}/context/${contextKey}`),\r\n    getAllContext: (agentId: string) =>\r\n      fetchApi<AgentContext[]>(`/api/agents/${agentId}/context`),\r\n    clearContext: (agentId: string) =>\r\n      fetchApi<{ status: string; cleared_count: number }>(`/api/agents/${agentId}/context`, {\r\n        method: 'DELETE',\r\n      }),\r\n  },\r\n\r\n  // Servers\r\n  servers: {\r\n    list: (activeOnly?: boolean) => {\r\n      const query = activeOnly ? '?active_only=true' : ''\r\n      return fetchApi<Array<{\r\n        id: string\r\n        name: string\r\n        url: string\r\n        api_version: string\r\n        is_active: boolean\r\n        is_default: boolean\r\n        is_available: boolean\r\n        description?: string\r\n        capabilities?: string[]\r\n        max_concurrent: number\r\n        priority: number\r\n        created_at: string\r\n        updated_at: string\r\n        last_checked_at?: string\r\n        models_count: number\r\n      }>>(`/api/servers${query}`)\r\n    },\r\n    get: (id: string) => fetchApi<any>(`/api/servers/${id}`),\r\n    create: (data: {\r\n      name: string\r\n      url: string\r\n      api_version?: string\r\n      description?: string\r\n      capabilities?: string[]\r\n      max_concurrent?: number\r\n      priority?: number\r\n      is_default?: boolean\r\n    }) =>\r\n      fetchApi<any>('/api/servers', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    update: (id: string, data: Partial<any>) =>\r\n      fetchApi<any>(`/api/servers/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    delete: (id: string) =>\r\n      fetchApi<{ status: string }>(`/api/servers/${id}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    discover: (id: string) =>\r\n      fetchApi<{\r\n        message: string\r\n        models_found: number\r\n        models_added: number\r\n      }>(`/api/servers/${id}/discover`, {\r\n        method: 'POST',\r\n      }),\r\n    getModels: (id: string) => fetchApi<Array<{\r\n      id: string\r\n      name: string\r\n      model_name: string\r\n      is_active: boolean\r\n      capabilities?: string[]\r\n      priority: number\r\n      size_bytes?: number\r\n    }>>(`/api/servers/${id}/models`),\r\n  },\r\n\r\n  // Models Management\r\n  models: {\r\n    get: (id: string) => fetchApi<any>(`/api/models/${id}`),\r\n    update: (id: string, data: {\r\n      name?: string\r\n      capabilities?: string[]\r\n      priority?: number\r\n      is_active?: boolean\r\n    }) =>\r\n      fetchApi<any>(`/api/models/${id}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    checkAvailability: (id: string) =>\r\n      fetchApi<{\r\n        model_id: string\r\n        model_name: string\r\n        is_available: boolean\r\n        server_url: string\r\n        error?: string\r\n      }>(`/api/models/${id}/check-availability`, {\r\n        method: 'POST',\r\n      }),\r\n    checkAll: (serverId: string) =>\r\n      fetchApi<{\r\n        server_id: string\r\n        results: Array<any>\r\n      }>(`/api/models/server/${serverId}/check-all`),\r\n  },\r\n\r\n  // Benchmarks\r\n  benchmarks: {\r\n    getTasks: (params?: {\r\n      task_type?: string\r\n      category?: string\r\n      difficulty?: string\r\n      name?: string\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.task_type) query.append('task_type', params.task_type)\r\n      if (params?.category) query.append('category', params.category)\r\n      if (params?.difficulty) query.append('difficulty', params.difficulty)\r\n      if (params?.name) query.append('name', params.name)\r\n      return fetchApi<Array<{\r\n        id: string\r\n        name: string\r\n        task_type: string\r\n        task_description: string\r\n        category?: string\r\n        difficulty?: string\r\n        expected_output?: any\r\n        validation_criteria?: any\r\n      }>>(`/api/benchmarks/tasks/?${query}`)\r\n    },\r\n    getTask: (taskId: string) =>\r\n      fetchApi<any>(`/api/benchmarks/tasks/${taskId}`),\r\n    run: (data: {\r\n      task_id?: string\r\n      task_type?: string\r\n      model_id?: string\r\n      model_name?: string\r\n      server_id?: string\r\n      server_url?: string\r\n      timeout?: number\r\n      limit?: number\r\n      evaluate?: boolean\r\n    }) =>\r\n      fetchApi<Array<{\r\n        id: string\r\n        benchmark_task_id: string\r\n        model_id?: string\r\n        server_id?: string\r\n        execution_time?: number\r\n        output?: any\r\n        score?: number\r\n        metrics?: any\r\n        passed?: boolean\r\n        error_message?: string\r\n        created_at?: string\r\n      }>>('/api/benchmarks/run/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    getResults: (params?: {\r\n      task_id?: string\r\n      model_id?: string\r\n      limit?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.task_id) query.append('task_id', params.task_id)\r\n      if (params?.model_id) query.append('model_id', params.model_id)\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      return fetchApi<Array<any>>(`/api/benchmarks/results/?${query}`)\r\n    },\r\n    getResult: (resultId: string) =>\r\n      fetchApi<{\r\n        id: string\r\n        benchmark_task_id: string\r\n        model_id?: string\r\n        server_id?: string\r\n        execution_time?: number\r\n        output?: any\r\n        score?: number\r\n        metrics?: any\r\n        passed: boolean\r\n        error_message?: string\r\n        created_at?: string\r\n        task?: {\r\n          id: string\r\n          name: string\r\n          task_type: string\r\n          task_description?: string\r\n        }\r\n      }>(`/api/benchmarks/results/${resultId}`),\r\n    evaluate: (resultId: string) =>\r\n      fetchApi<any>(`/api/benchmarks/evaluate/${resultId}`, {\r\n        method: 'POST',\r\n      }),\r\n    comparison: (data?: {\r\n      task_ids?: string[]\r\n      model_ids?: string[]\r\n      server_ids?: string[]\r\n    }) => {\r\n      if (data) {\r\n        return fetchApi<any>('/api/benchmarks/comparison/', {\r\n          method: 'POST',\r\n          body: JSON.stringify(data),\r\n        })\r\n      }\r\n      return fetchApi<any>('/api/benchmarks/comparison/')\r\n    },\r\n    getStats: () =>\r\n      fetchApi<any>('/api/benchmarks/stats/'),\r\n  },\r\n\r\n  // Agent Gym\r\n  agentGym: {\r\n    getTests: (params?: { agent_id?: string; test_type?: string }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.agent_id) query.append('agent_id', params.agent_id)\r\n      if (params?.test_type) query.append('test_type', params.test_type)\r\n      return fetchApi<Array<{\r\n        id: string\r\n        name: string\r\n        description?: string\r\n        test_type: string\r\n        agent_id: string\r\n        input_data?: any\r\n        expected_output?: any\r\n        validation_rules?: any\r\n        timeout_seconds: number\r\n        max_retries: number\r\n        required_tools?: string[]\r\n        created_by?: string\r\n        created_at: string\r\n        tags?: string[]\r\n      }>>(`/api/agent-gym/tests?${query}`)\r\n    },\r\n    getTest: (testId: string) =>\r\n      fetchApi<any>(`/api/agent-gym/tests/${testId}`),\r\n    createTest: (data: {\r\n      name: string\r\n      agent_id: string\r\n      test_type: string\r\n      input_data: any\r\n      expected_output?: any\r\n      validation_rules?: any\r\n      timeout_seconds?: number\r\n      max_retries?: number\r\n      required_tools?: string[]\r\n      description?: string\r\n      tags?: string[]\r\n    }) =>\r\n      fetchApi<any>('/api/agent-gym/tests', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    updateTest: (testId: string, data: Partial<any>) =>\r\n      fetchApi<any>(`/api/agent-gym/tests/${testId}`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    runTest: (testId: string, data?: { run_by?: string; notes?: string }) =>\r\n      fetchApi<{\r\n        id: string\r\n        test_id: string\r\n        status: string\r\n        started_at: string\r\n        completed_at?: string\r\n        duration_ms?: number\r\n        output_data?: any\r\n        validation_passed?: string\r\n        error_message?: string\r\n      }>(`/api/agent-gym/tests/${testId}/run`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data || {}),\r\n      }),\r\n    getTestRuns: (testId: string) =>\r\n      fetchApi<Array<any>>(`/api/agent-gym/tests/${testId}/runs`),\r\n    getTestRun: (runId: string) =>\r\n      fetchApi<any>(`/api/agent-gym/test-runs/${runId}`),\r\n  },\r\n\r\n  // Settings\r\n  settings: {\r\n    getAll: () => fetchApi<Array<{\r\n      key: string\r\n      value: any\r\n      category: string\r\n      description?: string\r\n      value_type: string\r\n    }>>('/api/settings/'),\r\n    get: (key: string) => fetchApi<any>(`/api/settings/${key}`),\r\n    update: (key: string, data: {\r\n      value: any\r\n      category?: string\r\n      value_type?: string\r\n    }) =>\r\n      fetchApi<any>('/api/settings/', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ key, ...data }),\r\n      }),\r\n    // Feature Flags\r\n    getFeatureFlags: () => fetchApi<Record<string, boolean>>('/api/settings/features/all'),\r\n    getFeatureFlag: (feature: string) => fetchApi<boolean>(`/api/settings/features/${feature}`),\r\n    setFeatureFlag: (data: {\r\n      feature: string\r\n      enabled: boolean\r\n      description?: string\r\n    }) =>\r\n      fetchApi<any>('/api/settings/features/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    // Logging Levels\r\n    getLogLevels: () => fetchApi<Record<string, string>>('/api/settings/logging/all'),\r\n    getLogLevel: (module: string) => fetchApi<string>(`/api/settings/logging/${module}`),\r\n    setLogLevel: (data: {\r\n      module?: string\r\n      level: string\r\n    }) =>\r\n      fetchApi<any>('/api/settings/logging/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n    // Modules\r\n    getAllModules: () => fetchApi<string[]>('/api/settings/modules/all'),\r\n  },\r\n\r\n  // Traces\r\n  traces: {\r\n    list: (params?: {\r\n      limit?: number\r\n      offset?: number\r\n      task_id?: string\r\n      agent_id?: string\r\n      page?: number\r\n      page_size?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      if (params?.offset) query.append('offset', params.offset.toString())\r\n      if (params?.task_id) query.append('task_id', params.task_id)\r\n      if (params?.agent_id) query.append('agent_id', params.agent_id)\r\n      if (params?.page) query.append('page', params.page.toString())\r\n      if (params?.page_size) query.append('page_size', params.page_size.toString())\r\n      return fetchApi<{\r\n        traces: Array<{\r\n          id: string\r\n          trace_id: string\r\n          task_id?: string\r\n          plan_id?: string\r\n          span_id?: string\r\n          parent_span_id?: string\r\n          operation_name: string\r\n          start_time: string\r\n          end_time?: string\r\n          duration_ms?: number\r\n          status?: string\r\n          attributes?: any\r\n          agent_id?: string\r\n          tool_id?: string\r\n          error_message?: string\r\n          error_type?: string\r\n          created_at: string\r\n        }>\r\n        total: number\r\n        page: number\r\n        page_size: number\r\n      }>(`/api/traces/?${query}`)\r\n    },\r\n    get: (traceId: string) => fetchApi<{\r\n      id: string\r\n      trace_id: string\r\n      task_id?: string\r\n      plan_id?: string\r\n      span_id?: string\r\n      parent_span_id?: string\r\n      operation_name: string\r\n      start_time: string\r\n      end_time?: string\r\n      duration_ms?: number\r\n      status?: string\r\n      attributes?: any\r\n      agent_id?: string\r\n      tool_id?: string\r\n      error_message?: string\r\n      error_type?: string\r\n      created_at: string\r\n    }>(`/api/traces/${traceId}`),\r\n    getSpans: (traceId: string) => fetchApi<Array<{\r\n      id: string\r\n      trace_id: string\r\n      task_id?: string\r\n      plan_id?: string\r\n      span_id?: string\r\n      parent_span_id?: string\r\n      operation_name: string\r\n      start_time: string\r\n      end_time?: string\r\n      duration_ms?: number\r\n      status?: string\r\n      attributes?: any\r\n      agent_id?: string\r\n      tool_id?: string\r\n      error_message?: string\r\n      error_type?: string\r\n      created_at: string\r\n    }>>(`/api/traces/${traceId}/spans`),\r\n  },\r\n\r\n  // Artifacts\r\n  artifacts: {\r\n    list: (params?: {\r\n      artifact_type?: string\r\n      status?: string\r\n      limit?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.artifact_type) query.append('artifact_type', params.artifact_type)\r\n      if (params?.status) query.append('status', params.status)\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      return fetchApi<Array<{\r\n        id: string\r\n        type: string\r\n        name: string\r\n        description?: string\r\n        version: number\r\n        status: string\r\n        security_rating?: number\r\n        created_at: string\r\n        created_by?: string\r\n      }>>(`/api/artifacts/?${query}`)\r\n    },\r\n    get: (artifactId: string) => fetchApi<{\r\n      id: string\r\n      type: string\r\n      name: string\r\n      description?: string\r\n      version: number\r\n      status: string\r\n      security_rating?: number\r\n      created_at: string\r\n      created_by?: string\r\n      code?: string\r\n      prompt?: string\r\n      test_results?: any\r\n      }>(`/api/artifacts/${artifactId}`),\r\n    delete: (artifactId: string) =>\r\n      fetchApi<{ status: string; artifact_id: string }>(`/api/artifacts/${artifactId}`, {\r\n        method: 'DELETE',\r\n      }),\r\n    create: (data: {\r\n      description: string\r\n      artifact_type: 'agent' | 'tool'\r\n      context?: Record<string, any>\r\n    }) =>\r\n      fetchApi<{\r\n        id: string\r\n        type: string\r\n        name: string\r\n        description?: string\r\n        version: number\r\n        status: string\r\n        security_rating?: number\r\n        created_at: string\r\n        created_by?: string\r\n        code?: string\r\n        prompt?: string\r\n        test_results?: any\r\n      }>('/api/artifacts/', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      }),\r\n  },\r\n\r\n  // Approvals\r\n  approvals: {\r\n    list: (params?: {\r\n      request_type?: string\r\n      limit?: number\r\n    }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.request_type) query.append('request_type', params.request_type)\r\n      if (params?.limit) query.append('limit', params.limit.toString())\r\n      return fetchApi<Array<{\r\n        id: string\r\n        request_type: string\r\n        status: string\r\n        artifact_id?: string\r\n        prompt_id?: string\r\n        task_id?: string\r\n        recommendation?: string\r\n        risk_assessment?: any\r\n        created_at: string\r\n        decision_timeout?: string\r\n        requested_by?: string\r\n        approved_by?: string\r\n        description?: string\r\n      }>>(`/api/approvals/?${query}`)\r\n    },\r\n    get: (approvalId: string) => fetchApi<any>(`/api/approvals/${approvalId}`),\r\n    approve: (approvalId: string) =>\r\n      fetchApi<any>(`/api/approvals/${approvalId}/approve`, {\r\n        method: 'POST',\r\n      }),\r\n    reject: (approvalId: string) =>\r\n      fetchApi<any>(`/api/approvals/${approvalId}/reject`, {\r\n        method: 'POST',\r\n      }),\r\n  },\r\n  \r\n  // Workflow Events\r\n  workflowEvents: {\r\n    list: (params?: { workflow_id?: string; limit?: number; offset?: number; include_entities?: boolean }) => {\r\n      const query = new URLSearchParams()\r\n      if (params?.workflow_id) query.append('workflow_id', params.workflow_id)\r\n      if (params?.limit) query.append('limit', String(params.limit))\r\n      if (params?.offset) query.append('offset', String(params.offset))\r\n      if (params?.include_entities) query.append('include_entities', 'true')\r\n      return fetchApi<{\r\n        events: Array<{\r\n          id: string\r\n          workflow_id: string\r\n          event_type: string\r\n          event_source: string\r\n          stage: string\r\n          status: string\r\n          message: string\r\n          event_data?: any\r\n          metadata?: any\r\n          timestamp: string\r\n          duration_ms?: number\r\n          parent_event_id?: string\r\n          task_id?: string\r\n          plan_id?: string\r\n          tool_id?: string\r\n          approval_request_id?: string\r\n        }>\r\n        entities?: Array<{\r\n          id: string\r\n          type: 'task' | 'plan' | 'agent' | 'tool' | 'approval'\r\n          name: string\r\n          status?: string\r\n        }>\r\n        total: number\r\n        limit: number\r\n        offset: number\r\n      }>(`/api/workflow-events?${query.toString()}`)\r\n    },\r\n    get: (eventId: string) =>\r\n      fetchApi<any>(`/api/workflow-events/${eventId}`),\r\n    control: (workflowId: string, action: 'pause' | 'resume' | 'cancel' | 'restart_from', eventId?: string) =>\r\n      fetchApi<{ workflow_id: string; action: string; status: string }>(\r\n        `/api/workflow-events/${workflowId}/control`,\r\n        {\r\n          method: 'POST',\r\n          body: JSON.stringify({ action, event_id: eventId }),\r\n        }\r\n      ),\r\n  },\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/lib/hooks/use-api.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { api, type Task, type Plan, type Agent, type Message, type Prompt, type AgentMemory, type AgentContext } from '../api/client'\r\nimport { toast } from 'sonner'\r\n\r\n// Tasks hooks\r\nexport function useTasks(includeAll: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['tasks', includeAll],\r\n    queryFn: () => api.tasks.list(includeAll),\r\n  })\r\n}\r\n\r\nexport function useTask(id: string, includeAll: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['task', id, includeAll],\r\n    queryFn: () => api.tasks.get(id, includeAll),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreateTask() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.tasks.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['tasks'] })\r\n      toast.success('Task created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create task: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdateTask() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<Task> }) =>\r\n      api.tasks.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['tasks'] })\r\n      queryClient.invalidateQueries({ queryKey: ['tasks', id] })\r\n      toast.success('Task updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update task: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteTask() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.tasks.delete,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['tasks'] })\r\n      toast.success('Task deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete task: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Plans hooks\r\nexport function usePlans(taskId?: string) {\r\n  return useQuery({\r\n    queryKey: ['plans', taskId],\r\n    queryFn: () => api.plans.list(taskId),\r\n    enabled: taskId ? typeof taskId === 'string' : true,\r\n  })\r\n}\r\n\r\nexport function usePlan(id: string) {\r\n  return useQuery({\r\n    queryKey: ['plans', id],\r\n    queryFn: () => api.plans.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreatePlan() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.plans.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['plans'] })\r\n      toast.success('Plan created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create plan: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Agents hooks\r\nexport function useAgents() {\r\n  return useQuery({\r\n    queryKey: ['agents'],\r\n    queryFn: api.agents.list,\r\n  })\r\n}\r\n\r\nexport function useAgent(id: string) {\r\n  return useQuery({\r\n    queryKey: ['agents', id],\r\n    queryFn: () => api.agents.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.agents.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      toast.success('Agent created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<Agent> }) =>\r\n      api.agents.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useActivateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (id: string) => api.agents.activate(id),\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent activated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to activate agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function usePauseAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (id: string) => api.agents.pause(id),\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent paused')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to pause agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeprecateAgent() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (id: string) => api.agents.deprecate(id),\r\n    onSuccess: (_, id) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agents', id] })\r\n      toast.success('Agent deprecated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to deprecate agent: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Chat hooks\r\nexport function useChatHistory(taskId: string) {\r\n  return useQuery({\r\n    queryKey: ['chat', taskId],\r\n    queryFn: () => api.chat.getHistory(taskId),\r\n    enabled: !!taskId,\r\n  })\r\n}\r\n\r\nexport function useChatSession(sessionId: string | null) {\r\n  return useQuery({\r\n    queryKey: ['chat', 'session', sessionId],\r\n    queryFn: () => api.chat.getSession(sessionId!),\r\n    enabled: !!sessionId,\r\n  })\r\n}\r\n\r\nexport function useSendMessage() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ \r\n      taskId, \r\n      content, \r\n      sessionId, \r\n      model, \r\n      serverId, \r\n      temperature,\r\n      taskType,\r\n      systemPrompt\r\n    }: { \r\n      taskId: string\r\n      content: string\r\n      sessionId?: string\r\n      model?: string\r\n      serverId?: string\r\n      temperature?: number\r\n      taskType?: string\r\n      systemPrompt?: string\r\n    }) =>\r\n      api.chat.sendMessage(taskId, content, {\r\n        sessionId,\r\n        model,\r\n        serverId,\r\n        temperature,\r\n        taskType,\r\n        systemPrompt,\r\n      }),\r\n    onSuccess: (result, { taskId, sessionId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['chat', taskId] })\r\n      // Invalidate session query if session_id was returned or used\r\n      const finalSessionId = result.session_id || sessionId\r\n      if (finalSessionId) {\r\n        queryClient.invalidateQueries({ queryKey: ['chat', 'session', finalSessionId] })\r\n      }\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to send message: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Prompts hooks\r\nexport function usePrompts(params?: {\r\n  prompt_type?: string\r\n  status?: string\r\n  level?: number\r\n  name?: string\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['prompts', params],\r\n    queryFn: () => api.prompts.list(params),\r\n  })\r\n}\r\n\r\nexport function usePrompt(id: string) {\r\n  return useQuery({\r\n    queryKey: ['prompts', id],\r\n    queryFn: () => api.prompts.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreatePrompt() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.prompts.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      toast.success('Prompt created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create prompt: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdatePrompt() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<Prompt> }) =>\r\n      api.prompts.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      queryClient.invalidateQueries({ queryKey: ['prompts', id] })\r\n      toast.success('Prompt updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update prompt: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeletePrompt() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.prompts.delete,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      toast.success('Prompt deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete prompt: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function usePromptVersions(id: string) {\r\n  return useQuery({\r\n    queryKey: ['prompts', id, 'versions'],\r\n    queryFn: () => api.prompts.getVersions(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function usePromptMetrics(id: string) {\r\n  return useQuery({\r\n    queryKey: ['prompts', id, 'metrics'],\r\n    queryFn: () => api.prompts.getMetrics(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\n// Agent Memory hooks\r\nexport function useAgentMemories(agentId: string, params?: {\r\n  memory_type?: string\r\n  min_importance?: number\r\n  tags?: string\r\n  limit?: number\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['agents', agentId, 'memories', params],\r\n    queryFn: () => api.agentMemory.list(agentId, params),\r\n    enabled: !!agentId,\r\n  })\r\n}\r\n\r\nexport function useAgentMemory(agentId: string, memoryId: string) {\r\n  return useQuery({\r\n    queryKey: ['agents', agentId, 'memories', memoryId],\r\n    queryFn: () => api.agentMemory.get(agentId, memoryId),\r\n    enabled: !!agentId && !!memoryId,\r\n  })\r\n}\r\n\r\nexport function useCreateAgentMemory() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ agentId, data }: { agentId: string; data: Partial<AgentMemory> }) =>\r\n      api.agentMemory.create(agentId, data as any),\r\n    onSuccess: (_, { agentId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents', agentId, 'memories'] })\r\n      toast.success('Memory created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create memory: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteAgentMemory() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ agentId, memoryId }: { agentId: string; memoryId: string }) =>\r\n      api.agentMemory.delete(agentId, memoryId),\r\n    onSuccess: (_, { agentId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agents', agentId, 'memories'] })\r\n      toast.success('Memory deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete memory: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useAgentContext(agentId: string) {\r\n  return useQuery({\r\n    queryKey: ['agents', agentId, 'context'],\r\n    queryFn: () => api.agentMemory.getAllContext(agentId),\r\n    enabled: !!agentId,\r\n  })\r\n}\r\n\r\n// Servers hooks\r\nexport function useServers(activeOnly?: boolean) {\r\n  return useQuery({\r\n    queryKey: ['servers', activeOnly],\r\n    queryFn: () => api.servers.list(activeOnly),\r\n  })\r\n}\r\n\r\nexport function useServer(id: string) {\r\n  return useQuery({\r\n    queryKey: ['servers', id],\r\n    queryFn: () => api.servers.get(id),\r\n    enabled: !!id,\r\n  })\r\n}\r\n\r\nexport function useCreateServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.servers.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      toast.success('Server created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create server: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useUpdateServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<any> }) =>\r\n      api.servers.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      queryClient.invalidateQueries({ queryKey: ['servers', id] })\r\n      toast.success('Server updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update server: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.servers.delete,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      toast.success('Server deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete server: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useServerModels(serverId: string) {\r\n  return useQuery({\r\n    queryKey: ['servers', serverId, 'models'],\r\n    queryFn: () => api.servers.getModels(serverId),\r\n    enabled: !!serverId,\r\n  })\r\n}\r\n\r\nexport function useDiscoverServer() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (serverId: string) => api.servers.discover(serverId),\r\n    onSuccess: (_, serverId) => {\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      queryClient.invalidateQueries({ queryKey: ['servers', serverId, 'models'] })\r\n      toast.success('Server models discovered successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to discover models: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Models Management hooks\r\nexport function useUpdateModel() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<any> }) =>\r\n      api.models.update(id, data),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['models'] })\r\n      queryClient.invalidateQueries({ queryKey: ['models', id] })\r\n      queryClient.invalidateQueries({ queryKey: ['servers'] })\r\n      toast.success('Model updated successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update model: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useCheckModelAvailability() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (modelId: string) => api.models.checkAvailability(modelId),\r\n    onSuccess: (_, modelId) => {\r\n      queryClient.invalidateQueries({ queryKey: ['models', modelId] })\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to check model availability: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Benchmarks hooks\r\nexport function useBenchmarkTasks(params?: {\r\n  task_type?: string\r\n  category?: string\r\n  difficulty?: string\r\n  name?: string\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'tasks', params],\r\n    queryFn: () => api.benchmarks.getTasks(params),\r\n  })\r\n}\r\n\r\nexport function useBenchmarkTask(taskId: string) {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'tasks', taskId],\r\n    queryFn: () => api.benchmarks.getTask(taskId),\r\n    enabled: !!taskId,\r\n  })\r\n}\r\n\r\nexport function useRunBenchmark() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.benchmarks.run,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['benchmarks', 'results'] })\r\n      toast.success('Benchmark started successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to run benchmark: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useBenchmarkResults(params?: {\r\n  task_id?: string\r\n  model_id?: string\r\n  limit?: number\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'results', params],\r\n    queryFn: () => api.benchmarks.getResults(params),\r\n  })\r\n}\r\n\r\nexport function useBenchmarkComparison() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (data?: { model_ids?: string[]; task_type?: string }) => \r\n      api.benchmarks.comparison(data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['benchmarks', 'comparison'] })\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to compare benchmarks: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useBenchmarkStats() {\r\n  return useQuery({\r\n    queryKey: ['benchmarks', 'stats'],\r\n    queryFn: () => api.benchmarks.getStats(),\r\n  })\r\n}\r\n\r\n// Agent Gym hooks\r\nexport function useAgentGymTests(params?: { agent_id?: string; test_type?: string }) {\r\n  return useQuery({\r\n    queryKey: ['agent-gym', 'tests', params],\r\n    queryFn: () => api.agentGym.getTests(params),\r\n  })\r\n}\r\n\r\nexport function useAgentGymTest(testId: string) {\r\n  return useQuery({\r\n    queryKey: ['agent-gym', 'tests', testId],\r\n    queryFn: () => api.agentGym.getTest(testId),\r\n    enabled: !!testId,\r\n  })\r\n}\r\n\r\nexport function useCreateAgentGymTest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.agentGym.createTest,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['agent-gym', 'tests'] })\r\n      toast.success('Test created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create test: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useRunAgentGymTest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ testId, data }: { testId: string; data?: { run_by?: string; notes?: string } }) =>\r\n      api.agentGym.runTest(testId, data),\r\n    onSuccess: (_, { testId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['agent-gym', 'tests', testId, 'runs'] })\r\n      queryClient.invalidateQueries({ queryKey: ['agent-gym', 'tests', testId] })\r\n      toast.success('Test started successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to run test: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useAgentGymTestRuns(testId: string) {\r\n  return useQuery({\r\n    queryKey: ['agent-gym', 'tests', testId, 'runs'],\r\n    queryFn: () => api.agentGym.getTestRuns(testId),\r\n    enabled: !!testId,\r\n  })\r\n}\r\n\r\n// Settings hooks\r\nexport function useSettings() {\r\n  return useQuery({\r\n    queryKey: ['settings'],\r\n    queryFn: () => api.settings.getAll(),\r\n  })\r\n}\r\n\r\nexport function useFeatureFlags() {\r\n  return useQuery({\r\n    queryKey: ['settings', 'features'],\r\n    queryFn: () => api.settings.getFeatureFlags(),\r\n  })\r\n}\r\n\r\nexport function useSetFeatureFlag() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.settings.setFeatureFlag,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['settings', 'features'] })\r\n      toast.success('Feature flag updated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update feature flag: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useLogLevels() {\r\n  return useQuery({\r\n    queryKey: ['settings', 'logging'],\r\n    queryFn: () => api.settings.getLogLevels(),\r\n  })\r\n}\r\n\r\nexport function useSetLogLevel() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.settings.setLogLevel,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['settings', 'logging'] })\r\n      toast.success('Log level updated')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to update log level: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useAllModules() {\r\n  return useQuery({\r\n    queryKey: ['settings', 'modules'],\r\n    queryFn: () => api.settings.getAllModules(),\r\n  })\r\n}\r\n\r\n// Traces hooks\r\nexport function useTraces(params?: {\r\n  limit?: number\r\n  offset?: number\r\n  task_id?: string\r\n  agent_id?: string\r\n  page?: number\r\n  page_size?: number\r\n}) {\r\n  return useQuery({\r\n    queryKey: ['traces', params],\r\n    queryFn: () => api.traces.list({\r\n      ...params,\r\n      page_size: params?.page_size || params?.limit,\r\n    }),\r\n  })\r\n}\r\n\r\nexport function useTrace(traceId: string) {\r\n  return useQuery({\r\n    queryKey: ['trace', traceId],\r\n    queryFn: () => api.traces.get(traceId),\r\n    enabled: !!traceId,\r\n  })\r\n}\r\n\r\nexport function useTraceSpans(traceId: string) {\r\n  return useQuery({\r\n    queryKey: ['trace', traceId, 'spans'],\r\n    queryFn: () => api.traces.getSpans(traceId),\r\n    enabled: !!traceId,\r\n  })\r\n}\r\n\r\n// Artifacts hooks\r\nexport function useArtifacts() {\r\n  return useQuery({\r\n    queryKey: ['artifacts'],\r\n    queryFn: () => api.artifacts.list(),\r\n  })\r\n}\r\n\r\nexport function useArtifact(artifactId: string) {\r\n  return useQuery({\r\n    queryKey: ['artifacts', artifactId],\r\n    queryFn: () => api.artifacts.get(artifactId),\r\n    enabled: !!artifactId,\r\n  })\r\n}\r\n\r\nexport function useCreateArtifact() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: api.artifacts.create,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['artifacts'] })\r\n      toast.success('Artifact created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create artifact: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useDeleteArtifact() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (artifactId: string) => api.artifacts.delete(artifactId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['artifacts'] })\r\n      toast.success('Artifact deleted successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to delete artifact: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Approvals hooks\r\nexport function useApprovals() {\r\n  return useQuery({\r\n    queryKey: ['approvals'],\r\n    queryFn: () => api.approvals.list(),\r\n    // Disable automatic refetch on window focus to reduce unnecessary requests\r\n    // Approvals are not time-sensitive data that needs constant updates\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n    // Only refetch when component mounts or manually invalidated\r\n    staleTime: 5 * 60 * 1000, // Consider data fresh for 5 minutes\r\n  })\r\n}\r\n\r\nexport function useApproval(approvalId: string) {\r\n  return useQuery({\r\n    queryKey: ['approvals', approvalId],\r\n    queryFn: () => api.approvals.get(approvalId),\r\n    enabled: !!approvalId,\r\n  })\r\n}\r\n\r\nexport function useApproveRequest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (approvalId: string) => api.approvals.approve(approvalId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['approvals'] })\r\n      toast.success('Request approved')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to approve: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useRejectRequest() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: (approvalId: string) => api.approvals.reject(approvalId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['approvals'] })\r\n      toast.success('Request rejected')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to reject: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\nexport function useCreatePromptVersion() {\r\n  const queryClient = useQueryClient()\r\n  \r\n  return useMutation({\r\n    mutationFn: ({ id, prompt_text }: { id: string; prompt_text: string }) =>\r\n      api.prompts.createVersion(id, prompt_text),\r\n    onSuccess: (_, { id }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['prompts'] })\r\n      queryClient.invalidateQueries({ queryKey: ['prompts', id] })\r\n      queryClient.invalidateQueries({ queryKey: ['prompts', id, 'versions'] })\r\n      toast.success('Prompt version created successfully')\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to create prompt version: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n\r\n// Workflow Events hooks\r\nexport function useWorkflowEvents(workflowId: string | null, includeEntities: boolean = false) {\r\n  return useQuery({\r\n    queryKey: ['workflow-events', workflowId, includeEntities],\r\n    queryFn: () => api.workflowEvents.list({ \r\n      workflow_id: workflowId || undefined, \r\n      limit: 100,\r\n      include_entities: includeEntities,\r\n    }),\r\n    enabled: !!workflowId,\r\n    refetchInterval: 2000, // Poll every 2 seconds for new events\r\n  })\r\n}\r\n\r\nexport function useWorkflowEvent(eventId: string) {\r\n  return useQuery({\r\n    queryKey: ['workflow-events', eventId],\r\n    queryFn: () => api.workflowEvents.get(eventId),\r\n    enabled: !!eventId,\r\n  })\r\n}\r\n\r\nexport function useControlWorkflow() {\r\n  const queryClient = useQueryClient()\r\n  return useMutation({\r\n    mutationFn: ({ workflowId, action, eventId }: { workflowId: string; action: 'pause' | 'resume' | 'cancel' | 'restart_from'; eventId?: string }) =>\r\n      api.workflowEvents.control(workflowId, action, eventId),\r\n    onSuccess: (_, { workflowId }) => {\r\n      queryClient.invalidateQueries({ queryKey: ['workflow-events', workflowId] })\r\n      toast.success(`Workflow ${_.action} requested`)\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(`Failed to control workflow: ${error.message}`)\r\n    },\r\n  })\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1760, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/workflow/enhanced-workflow-graph.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useMemo, useState, useEffect } from 'react'\r\nimport {\r\n  ReactFlow,\r\n  Node,\r\n  Edge,\r\n  Background,\r\n  Controls,\r\n  MiniMap,\r\n  Panel,\r\n  Handle,\r\n  Position,\r\n} from '@xyflow/react'\r\nimport '@xyflow/react/dist/style.css'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from '@/components/ui/tooltip'\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover'\r\nimport { cn } from '@/lib/utils'\r\nimport { SimpleMarkdown } from '@/components/ui/simple-markdown'\r\nimport { \r\n  Brain, \r\n  Code, \r\n  Wrench, \r\n  FileText, \r\n  GitBranch, \r\n  AlertCircle,\r\n  User,\r\n  Zap,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Loader2,\r\n  Target,\r\n  Users,\r\n  FolderTree,\r\n  Info,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Clock,\r\n  MessageSquare,\r\n  Settings,\r\n} from 'lucide-react'\r\n\r\ninterface WorkflowEvent {\r\n  id: string\r\n  workflow_id: string\r\n  event_type: string\r\n  event_source: string\r\n  stage: string\r\n  status: string\r\n  message: string\r\n  event_data?: any\r\n  metadata?: any\r\n  timestamp: string\r\n  duration_ms?: number\r\n  parent_event_id?: string\r\n  task_id?: string\r\n  plan_id?: string\r\n  tool_id?: string\r\n  approval_request_id?: string\r\n}\r\n\r\ninterface WorkflowEntity {\r\n  id: string\r\n  type: 'task' | 'plan' | 'agent' | 'tool' | 'approval'\r\n  name: string\r\n  status?: string\r\n  created_by_event_id?: string\r\n}\r\n\r\ninterface EnhancedWorkflowGraphProps {\r\n  events: WorkflowEvent[]\r\n  entities?: WorkflowEntity[]\r\n  className?: string\r\n  height?: string\r\n}\r\n\r\n// Component for detailed event information in popover\r\nfunction EventDetailsContent({ \r\n  event, \r\n  entities = [] \r\n}: { \r\n  event: WorkflowEvent\r\n  entities?: WorkflowEntity[]\r\n}) {\r\n  const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set(['reasoning', 'prompts']))\r\n  \r\n  const toggleSection = (section: string) => {\r\n    const newExpanded = new Set(expandedSections)\r\n    if (newExpanded.has(section)) {\r\n      newExpanded.delete(section)\r\n    } else {\r\n      newExpanded.add(section)\r\n    }\r\n    setExpandedSections(newExpanded)\r\n  }\r\n\r\n  const relatedTask = event.task_id ? entities.find(e => e.id === event.task_id && e.type === 'task') : null\r\n  const relatedPlan = event.plan_id ? entities.find(e => e.id === event.plan_id && e.type === 'plan') : null\r\n  const relatedTool = event.tool_id ? entities.find(e => e.id === event.tool_id && e.type === 'tool') : null\r\n\r\n  return (\r\n    <div className=\"space-y-3 text-sm\">\r\n      <div className=\"border-b pb-2\">\r\n        <h3 className=\"font-semibold text-base\">{event.event_type}</h3>\r\n        <p className=\"text-muted-foreground text-xs mt-1\">{event.message}</p>\r\n        <div className=\"flex items-center gap-2 mt-2 text-xs text-muted-foreground\">\r\n          <Clock className=\"h-3 w-3\" />\r\n          <span>{new Date(event.timestamp).toLocaleString('ru-RU')}</span>\r\n          {event.duration_ms && (\r\n            <>\r\n              <span></span>\r\n              <span>: {(event.duration_ms / 1000).toFixed(2)}s</span>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reasoning */}\r\n      {event.reasoning && (\r\n        <details open={expandedSections.has('reasoning')}>\r\n          <summary \r\n            className=\"cursor-pointer font-semibold mb-2 flex items-center gap-2\"\r\n            onClick={() => toggleSection('reasoning')}\r\n          >\r\n            {expandedSections.has('reasoning') ? (\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            )}\r\n            <Brain className=\"h-4 w-4\" />\r\n               (Reasoning)\r\n          </summary>\r\n          <div className=\"bg-muted/50 rounded p-2 mt-1 text-xs\">\r\n            <SimpleMarkdown content={event.reasoning} />\r\n          </div>\r\n        </details>\r\n      )}\r\n\r\n      {/* Prompts */}\r\n      {(event.event_data?.system_prompt || event.event_data?.user_prompt || \r\n        event.event_data?.full_prompt || event.metadata?.system_prompt) && (\r\n        <details open={expandedSections.has('prompts')}>\r\n          <summary \r\n            className=\"cursor-pointer font-semibold mb-2 flex items-center gap-2\"\r\n            onClick={() => toggleSection('prompts')}\r\n          >\r\n            {expandedSections.has('prompts') ? (\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            )}\r\n            <MessageSquare className=\"h-4 w-4\" />\r\n            \r\n          </summary>\r\n          <div className=\"bg-muted/50 rounded p-2 mt-1 space-y-2 text-xs\">\r\n            {event.event_data?.system_prompt && (\r\n              <div>\r\n                <div className=\"text-[10px] font-semibold mb-1 text-primary\">System Prompt:</div>\r\n                <div className=\"text-xs\"><SimpleMarkdown content={event.event_data.system_prompt} /></div>\r\n              </div>\r\n            )}\r\n            {event.event_data?.user_prompt && (\r\n              <div>\r\n                <div className=\"text-[10px] font-semibold mb-1\">User Prompt:</div>\r\n                <div className=\"text-xs\"><SimpleMarkdown content={event.event_data.user_prompt} /></div>\r\n              </div>\r\n            )}\r\n            {event.event_data?.full_prompt && !event.event_data?.system_prompt && !event.event_data?.user_prompt && (\r\n              <div>\r\n                <div className=\"text-[10px] font-semibold mb-1\">Full Prompt:</div>\r\n                <div className=\"text-xs\"><SimpleMarkdown content={event.event_data.full_prompt} /></div>\r\n              </div>\r\n            )}\r\n            {event.metadata?.system_prompt && !event.event_data?.system_prompt && (\r\n              <div>\r\n                <div className=\"text-[10px] font-semibold mb-1 text-primary\">System Prompt (from metadata):</div>\r\n                <div className=\"text-xs\"><SimpleMarkdown content={event.metadata.system_prompt} /></div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </details>\r\n      )}\r\n\r\n      {/* Related Entities */}\r\n      {(relatedTask || relatedPlan || relatedTool) && (\r\n        <details open={expandedSections.has('entities')}>\r\n          <summary \r\n            className=\"cursor-pointer font-semibold mb-2 flex items-center gap-2\"\r\n            onClick={() => toggleSection('entities')}\r\n          >\r\n            {expandedSections.has('entities') ? (\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            )}\r\n            <Settings className=\"h-4 w-4\" />\r\n             \r\n          </summary>\r\n          <div className=\"space-y-2 mt-1 text-xs\">\r\n            {relatedTask && (\r\n              <div className=\"bg-pink-50 border border-pink-200 rounded p-2\">\r\n                <div className=\"flex items-center gap-2 font-semibold mb-1\">\r\n                  <Target className=\"h-3 w-3\" />\r\n                  : {relatedTask.name}\r\n                </div>\r\n                <div className=\"text-muted-foreground\">ID: {relatedTask.id}</div>\r\n                {relatedTask.status && (\r\n                  <Badge variant=\"outline\" className=\"text-xs mt-1\">{relatedTask.status}</Badge>\r\n                )}\r\n              </div>\r\n            )}\r\n            {relatedPlan && (\r\n              <div className=\"bg-teal-50 border border-teal-200 rounded p-2\">\r\n                <div className=\"flex items-center gap-2 font-semibold mb-1\">\r\n                  <FolderTree className=\"h-3 w-3\" />\r\n                  : {relatedPlan.name}\r\n                </div>\r\n                <div className=\"text-muted-foreground\">ID: {relatedPlan.id}</div>\r\n                {relatedPlan.status && (\r\n                  <Badge variant=\"outline\" className=\"text-xs mt-1\">{relatedPlan.status}</Badge>\r\n                )}\r\n              </div>\r\n            )}\r\n            {relatedTool && (\r\n              <div className=\"bg-amber-50 border border-amber-200 rounded p-2\">\r\n                <div className=\"flex items-center gap-2 font-semibold mb-1\">\r\n                  <Wrench className=\"h-3 w-3\" />\r\n                  : {relatedTool.name}\r\n                </div>\r\n                <div className=\"text-muted-foreground\">ID: {relatedTool.id}</div>\r\n                {relatedTool.status && (\r\n                  <Badge variant=\"outline\" className=\"text-xs mt-1\">{relatedTool.status}</Badge>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </details>\r\n      )}\r\n\r\n      {/* Event Data */}\r\n      {event.event_data && Object.keys(event.event_data).length > 0 && (\r\n        <details open={expandedSections.has('data')}>\r\n          <summary \r\n            className=\"cursor-pointer font-semibold mb-2 flex items-center gap-2\"\r\n            onClick={() => toggleSection('data')}\r\n          >\r\n            {expandedSections.has('data') ? (\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            )}\r\n            <FileText className=\"h-4 w-4\" />\r\n             \r\n          </summary>\r\n          <div className=\"bg-muted/50 rounded p-2 mt-1 text-xs\">\r\n            <pre className=\"whitespace-pre-wrap text-[10px] overflow-x-auto\">\r\n              {JSON.stringify(event.event_data, null, 2)}\r\n            </pre>\r\n          </div>\r\n        </details>\r\n      )}\r\n\r\n      {/* Metadata */}\r\n      {event.metadata && Object.keys(event.metadata).length > 0 && (\r\n        <details open={expandedSections.has('metadata')}>\r\n          <summary \r\n            className=\"cursor-pointer font-semibold mb-2 flex items-center gap-2\"\r\n            onClick={() => toggleSection('metadata')}\r\n          >\r\n            {expandedSections.has('metadata') ? (\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            )}\r\n            <Settings className=\"h-4 w-4\" />\r\n            \r\n          </summary>\r\n          <div className=\"bg-muted/50 rounded p-2 mt-1 text-xs\">\r\n            <pre className=\"whitespace-pre-wrap text-[10px] overflow-x-auto\">\r\n              {JSON.stringify(event.metadata, null, 2)}\r\n            </pre>\r\n          </div>\r\n        </details>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst getNodeType = (eventSource: string, eventType: string) => {\r\n  if (eventSource === 'user') return 'user'\r\n  if (eventSource === 'model' || eventType.includes('model')) return 'model'\r\n  if (eventSource === 'tool' || eventType.includes('tool')) return 'tool'\r\n  if (eventSource === 'planner_agent' || eventType.includes('plan')) return 'planner'\r\n  if (eventSource === 'coder_agent') return 'coder'\r\n  if (eventSource === 'system') return 'system'\r\n  return 'default'\r\n}\r\n\r\nconst getEntityNodeType = (entityType: string) => {\r\n  const types: Record<string, string> = {\r\n    task: 'task',\r\n    plan: 'plan',\r\n    agent: 'agent',\r\n    tool: 'tool',\r\n    approval: 'approval',\r\n  }\r\n  return types[entityType] || 'default'\r\n}\r\n\r\nconst getNodeColor = (status: string, nodeType: string) => {\r\n  if (status === 'failed') return '#ef4444'\r\n  if (status === 'completed') return '#22c55e'\r\n  if (status === 'in_progress') return '#3b82f6'\r\n  \r\n  const typeColors: Record<string, string> = {\r\n    user: '#8b5cf6',\r\n    model: '#06b6d4',\r\n    tool: '#f59e0b',\r\n    planner: '#10b981',\r\n    coder: '#6366f1',\r\n    system: '#64748b',\r\n    task: '#ec4899',\r\n    plan: '#14b8a6',\r\n    agent: '#8b5cf6',\r\n    approval: '#f59e0b',\r\n  }\r\n  return typeColors[nodeType] || '#94a3b8'\r\n}\r\n\r\nconst getNodeIcon = (nodeType: string) => {\r\n  const icons: Record<string, any> = {\r\n    user: User,\r\n    model: Brain,\r\n    tool: Wrench,\r\n    planner: GitBranch,\r\n    coder: Code,\r\n    system: Zap,\r\n    task: Target,\r\n    plan: FolderTree,\r\n    agent: Users,\r\n    approval: CheckCircle2,\r\n  }\r\n  return icons[nodeType] || Zap\r\n}\r\n\r\nconst getStatusIcon = (status: string) => {\r\n  if (status === 'completed') return CheckCircle2\r\n  if (status === 'failed') return XCircle\r\n  if (status === 'in_progress') return Loader2\r\n  return null\r\n}\r\n\r\n// Dagre layout function - using dynamic import for client-side only\r\n// Simple layout function without dagre (fallback) - timeline-based horizontal layout\r\nconst getSimpleLayout = (nodes: Node[], edges: Edge[], events?: WorkflowEvent[]) => {\r\n  // Extract event IDs and timestamps from node IDs\r\n  const nodeEventMap = new Map<string, { timestamp: number, index: number }>()\r\n  \r\n  if (events && events.length > 0) {\r\n    // Sort events by timestamp\r\n    const sortedEvents = [...events].sort((a, b) => \r\n      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\r\n    )\r\n    \r\n    sortedEvents.forEach((event, index) => {\r\n      const eventNodeId = `event-${event.id}`\r\n      nodeEventMap.set(eventNodeId, {\r\n        timestamp: new Date(event.timestamp).getTime(),\r\n        index: index\r\n      })\r\n    })\r\n  }\r\n  \r\n  // Create a map of node connections\r\n  const nodeConnections = new Map<string, { in: string[], out: string[], level: number }>()\r\n  nodes.forEach(node => {\r\n    nodeConnections.set(node.id, { in: [], out: [], level: -1 })\r\n  })\r\n  \r\n  edges.forEach(edge => {\r\n    const source = nodeConnections.get(edge.source)\r\n    const target = nodeConnections.get(edge.target)\r\n    if (source) source.out.push(edge.target)\r\n    if (target) target.in.push(edge.source)\r\n  })\r\n  \r\n  // Calculate levels based on longest path (for proper horizontal positioning)\r\n  const calculateLevels = () => {\r\n    const processed = new Set<string>()\r\n    \r\n    // Find root nodes (nodes with no incoming edges)\r\n    const rootNodes = nodes.filter(node => {\r\n      const conn = nodeConnections.get(node.id)\r\n      return !conn || conn.in.length === 0\r\n    })\r\n    \r\n    // DFS to calculate longest path to each node\r\n    const dfs = (nodeId: string, level: number) => {\r\n      const conn = nodeConnections.get(nodeId)\r\n      if (!conn) return\r\n      \r\n      if (conn.level < level) {\r\n        conn.level = level\r\n      }\r\n      \r\n      conn.out.forEach(childId => {\r\n        dfs(childId, level + 1)\r\n      })\r\n    }\r\n    \r\n    rootNodes.forEach(root => {\r\n      dfs(root.id, 0)\r\n    })\r\n    \r\n    // If no connections, use timestamp-based or index-based ordering\r\n    if (edges.length === 0) {\r\n      nodes.forEach((node, index) => {\r\n        const conn = nodeConnections.get(node.id)\r\n        if (conn) {\r\n          const eventInfo = nodeEventMap.get(node.id)\r\n          conn.level = eventInfo ? eventInfo.index : index\r\n        }\r\n      })\r\n    }\r\n  }\r\n  \r\n  calculateLevels()\r\n  \r\n  // Group nodes by level\r\n  const levelGroups = new Map<number, string[]>()\r\n  nodes.forEach(node => {\r\n    const conn = nodeConnections.get(node.id)\r\n    const level = conn ? conn.level : 0\r\n    if (!levelGroups.has(level)) {\r\n      levelGroups.set(level, [])\r\n    }\r\n    levelGroups.get(level)!.push(node.id)\r\n  })\r\n  \r\n  const nodeWidth = 180\r\n  const nodeHeight = 100\r\n  const horizontalSpacing = 250 // Space between columns (time progression)\r\n  const verticalSpacing = 120 // Space between nodes in same column\r\n  \r\n  // Position nodes horizontally (left to right = time progression)\r\n  const sortedLevels = Array.from(levelGroups.keys()).sort((a, b) => a - b)\r\n  \r\n  sortedLevels.forEach((level) => {\r\n    const nodeIds = levelGroups.get(level)!\r\n    \r\n    // Sort nodes in same level by timestamp if available, otherwise by original order\r\n    nodeIds.sort((a, b) => {\r\n      const eventA = nodeEventMap.get(a)\r\n      const eventB = nodeEventMap.get(b)\r\n      if (eventA && eventB) {\r\n        return eventA.timestamp - eventB.timestamp\r\n      }\r\n      return 0\r\n    })\r\n    \r\n    const x = level * horizontalSpacing + 100\r\n    nodeIds.forEach((nodeId, index) => {\r\n      const node = nodes.find(n => n.id === nodeId)\r\n      if (node) {\r\n        const totalInLevel = nodeIds.length\r\n        const centerOffset = (totalInLevel - 1) * verticalSpacing / 2\r\n        node.position = {\r\n          x: x,\r\n          y: index * verticalSpacing - centerOffset + 200, // Center vertically\r\n        }\r\n        node.targetPosition = 'left' as any\r\n        node.sourcePosition = 'right' as any\r\n      }\r\n    })\r\n  })\r\n  \r\n  return { nodes, edges }\r\n}\r\n\r\nconst getLayoutedElements = async (\r\n  nodes: Node[], \r\n  edges: Edge[], \r\n  direction: 'TB' | 'LR' = 'LR', // Default to horizontal (left-to-right)\r\n  events?: WorkflowEvent[]\r\n) => {\r\n  // Try to use dagre if available, fallback to simple layout\r\n  try {\r\n    // Dynamic import to avoid SSR issues\r\n    // dagre is a CommonJS module, handle it properly\r\n    const dagreModule: any = await import('dagre')\r\n    // dagre exports as default in ESM, but may be namespaced in CJS\r\n    const dagre = dagreModule.default?.default || dagreModule.default || dagreModule || dagreModule.dagre\r\n    \r\n    if (!dagre || !dagre.graphlib) {\r\n      console.warn('dagre not available, using simple layout')\r\n      return getSimpleLayout(nodes, edges, events)\r\n    }\r\n    \r\n    const dagreGraph = new dagre.graphlib.Graph()\r\n    dagreGraph.setDefaultEdgeLabel(() => ({}))\r\n    dagreGraph.setGraph({ \r\n      rankdir: direction, // 'LR' for left-to-right (timeline)\r\n      nodesep: 80, // Horizontal spacing between nodes\r\n      ranksep: 150, // Vertical spacing between ranks\r\n      marginx: 50,\r\n      marginy: 50,\r\n      align: 'UL',\r\n    })\r\n\r\n    nodes.forEach((node) => {\r\n      dagreGraph.setNode(node.id, { width: 180, height: 100 })\r\n    })\r\n\r\n    edges.forEach((edge) => {\r\n      dagreGraph.setEdge(edge.source, edge.target)\r\n    })\r\n\r\n    dagre.layout(dagreGraph)\r\n\r\n    nodes.forEach((node) => {\r\n      const nodeWithPosition = dagreGraph.node(node.id)\r\n      node.targetPosition = direction === 'LR' ? 'left' as any : 'top' as any\r\n      node.sourcePosition = direction === 'LR' ? 'right' as any : 'bottom' as any\r\n      node.position = {\r\n        x: nodeWithPosition.x - 90,\r\n        y: nodeWithPosition.y - 50,\r\n      }\r\n    })\r\n\r\n    return { nodes, edges }\r\n  } catch (error) {\r\n    // Fallback to simple layout if dagre is not available\r\n    console.warn('Failed to load dagre, using simple layout:', error)\r\n    return getSimpleLayout(nodes, edges, events)\r\n  }\r\n}\r\n\r\nexport function EnhancedWorkflowGraph({ \r\n  events, \r\n  entities = [], \r\n  className,\r\n  height = '600px'\r\n}: EnhancedWorkflowGraphProps) {\r\n  const [layoutedNodes, setLayoutedNodes] = useState<Node[]>([])\r\n  const [layoutedEdges, setLayoutedEdges] = useState<Edge[]>([])\r\n\r\n  const { nodes, edges } = useMemo(() => {\r\n    if (!events || events.length === 0) {\r\n      return { nodes: [], edges: [] }\r\n    }\r\n\r\n    const nodeMap = new Map<string, Node>()\r\n    const edgeList: Edge[] = []\r\n    const eventMap = new Map(events.map(e => [e.id, e]))\r\n    const entityMap = new Map(entities.map(e => [e.id, e]))\r\n\r\n    // Create event nodes\r\n    events.forEach((event) => {\r\n      const nodeType = getNodeType(event.event_source, event.event_type)\r\n      const Icon = getNodeIcon(nodeType)\r\n      const color = getNodeColor(event.status, nodeType)\r\n      const StatusIcon = getStatusIcon(event.status)\r\n      \r\n      // Create detailed content for tooltip/popover\r\n      const hasDetails = event.reasoning || \r\n        event.event_data?.system_prompt || \r\n        event.event_data?.user_prompt || \r\n        event.event_data?.full_prompt ||\r\n        event.metadata?.system_prompt ||\r\n        event.event_data ||\r\n        event.metadata ||\r\n        event.task_id ||\r\n        event.plan_id ||\r\n        event.tool_id\r\n\r\n      const EventNodeContent = ({ showDetails = false }: { showDetails?: boolean }) => (\r\n        <div className=\"flex flex-col gap-1 p-1.5 min-w-[180px] max-w-[220px]\">\r\n          <div className=\"flex items-center gap-1.5 justify-between\">\r\n            <div className=\"flex items-center gap-1.5 flex-1 min-w-0\">\r\n              <Icon className=\"h-3 w-3 flex-shrink-0\" style={{ color }} />\r\n              <span className=\"text-[10px] font-semibold truncate uppercase\">{event.event_source}</span>\r\n              {StatusIcon && (\r\n                <StatusIcon \r\n                  className={cn(\r\n                    \"h-2.5 w-2.5 flex-shrink-0\",\r\n                    event.status === 'in_progress' && \"animate-spin\"\r\n                  )} \r\n                  style={{ color }}\r\n                />\r\n              )}\r\n            </div>\r\n            {hasDetails && (\r\n              <Popover>\r\n                <PopoverTrigger asChild>\r\n                  <Button variant=\"ghost\" size=\"icon\" className=\"h-4 w-4 p-0\">\r\n                    <Info className=\"h-3 w-3\" />\r\n                  </Button>\r\n                </PopoverTrigger>\r\n                <PopoverContent className=\"w-96 max-h-[600px] overflow-y-auto\">\r\n                  <EventDetailsContent event={event} entities={entities} />\r\n                </PopoverContent>\r\n              </Popover>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-1 text-[8px] text-muted-foreground\">\r\n            <Clock className=\"h-2.5 w-2.5\" />\r\n            <span>\r\n              {new Date(event.timestamp).toLocaleTimeString('ru-RU', { \r\n                hour: '2-digit', \r\n                minute: '2-digit', \r\n                second: '2-digit',\r\n                fractionalSecondDigits: 2\r\n              })}\r\n            </span>\r\n            {event.duration_ms && (\r\n              <>\r\n                <span></span>\r\n                <span>{(event.duration_ms / 1000).toFixed(1)}s</span>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <p className=\"text-[10px] text-foreground line-clamp-2 leading-tight font-medium\">\r\n            {event.message}\r\n          </p>\r\n\r\n          {/* Reasoning preview */}\r\n          {event.reasoning && (\r\n            <div className=\"text-[9px] text-muted-foreground bg-muted/50 rounded p-1 line-clamp-2\">\r\n              <span className=\"font-semibold\"> Reasoning:</span> {event.reasoning.substring(0, 100)}\r\n              {event.reasoning.length > 100 && '...'}\r\n            </div>\r\n          )}\r\n\r\n          {/* Prompt indicator */}\r\n          {(event.event_type === 'model_request' || event.event_type === 'model_response' || \r\n            event.event_data?.system_prompt || event.event_data?.user_prompt || \r\n            event.event_data?.full_prompt || event.metadata?.system_prompt) && (\r\n            <div className=\"flex items-center gap-1 mt-0.5\">\r\n              <MessageSquare className=\"h-2.5 w-2.5 text-primary\" />\r\n              <span className={cn(\r\n                \"text-[8px] font-semibold\",\r\n                (event.event_data?.system_prompt || event.event_data?.user_prompt || \r\n                 event.event_data?.full_prompt || event.metadata?.system_prompt)\r\n                  ? \"text-primary\" \r\n                  : \"text-muted-foreground italic\"\r\n              )}>\r\n                {(event.event_data?.system_prompt || event.event_data?.user_prompt || \r\n                  event.event_data?.full_prompt || event.metadata?.system_prompt)\r\n                  ? \" \"\r\n                  : \"  \"}\r\n              </span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Related entities */}\r\n          {(event.task_id || event.plan_id || event.tool_id) && (\r\n            <div className=\"flex items-center gap-1 mt-0.5 flex-wrap\">\r\n              {event.task_id && (\r\n                <Badge variant=\"outline\" className=\"text-[8px] px-1 py-0 h-3 bg-pink-50 border-pink-200\">\r\n                  <Target className=\"h-2 w-2 mr-0.5\" />\r\n                  Task\r\n                </Badge>\r\n              )}\r\n              {event.plan_id && (\r\n                <Badge variant=\"outline\" className=\"text-[8px] px-1 py-0 h-3 bg-teal-50 border-teal-200\">\r\n                  <FolderTree className=\"h-2 w-2 mr-0.5\" />\r\n                  Plan\r\n                </Badge>\r\n              )}\r\n              {event.tool_id && (\r\n                <Badge variant=\"outline\" className=\"text-[8px] px-1 py-0 h-3 bg-amber-50 border-amber-200\">\r\n                  <Wrench className=\"h-2 w-2 mr-0.5\" />\r\n                  Tool\r\n                </Badge>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex items-center gap-1 mt-0.5\">\r\n            <Badge variant=\"outline\" className=\"text-[9px] px-1 py-0 h-4\">\r\n              {event.stage}\r\n            </Badge>\r\n            <Badge variant=\"secondary\" className=\"text-[8px] px-1 py-0 h-4\">\r\n              {event.event_type}\r\n            </Badge>\r\n          </div>\r\n        </div>\r\n      )\r\n\r\n      const node: Node = {\r\n        id: `event-${event.id}`,\r\n        type: 'default',\r\n        position: { x: 0, y: 0 }, // Will be calculated by layout algorithm\r\n        draggable: true,\r\n        data: {\r\n          label: <EventNodeContent />,\r\n          event: event, // Store full event for tooltips\r\n        },\r\n        style: {\r\n          background: '#fff',\r\n          border: `2px solid ${color}`,\r\n          borderRadius: '6px',\r\n          boxShadow: event.status === 'in_progress' ? `0 0 6px ${color}40` : 'none',\r\n          width: 160,\r\n          height: 'auto',\r\n        },\r\n      }\r\n\r\n      nodeMap.set(`event-${event.id}`, node)\r\n    })\r\n\r\n    // Create entity nodes\r\n    entities.forEach((entity) => {\r\n      const nodeType = getEntityNodeType(entity.type)\r\n      const Icon = getNodeIcon(nodeType)\r\n      const color = getNodeColor(entity.status || 'completed', nodeType)\r\n      const StatusIcon = getStatusIcon(entity.status || 'completed')\r\n      \r\n      const node: Node = {\r\n        id: `entity-${entity.id}`,\r\n        type: 'default',\r\n        position: { x: 0, y: 0 },\r\n        draggable: true,\r\n        data: {\r\n          label: (\r\n            <div className=\"flex flex-col gap-0.5 p-1.5 min-w-[140px] max-w-[160px]\">\r\n              <div className=\"flex items-center gap-1.5\">\r\n                <Icon className=\"h-3 w-3 flex-shrink-0\" style={{ color }} />\r\n                <span className=\"text-[10px] font-semibold truncate uppercase\">{entity.type}</span>\r\n                {StatusIcon && (\r\n                  <StatusIcon \r\n                    className={cn(\r\n                      \"h-2.5 w-2.5 flex-shrink-0\",\r\n                      entity.status === 'in_progress' && \"animate-spin\"\r\n                    )} \r\n                    style={{ color }}\r\n                  />\r\n                )}\r\n              </div>\r\n              <p className=\"text-[10px] text-muted-foreground line-clamp-2 font-medium leading-tight\">\r\n                {entity.name}\r\n              </p>\r\n              {entity.status && (\r\n                <Badge variant=\"outline\" className=\"text-[9px] px-1 py-0 h-4 w-fit\">\r\n                  {entity.status}\r\n                </Badge>\r\n              )}\r\n            </div>\r\n          ),\r\n        },\r\n        style: {\r\n          background: '#f8fafc',\r\n          border: `2px solid ${color}`,\r\n          borderRadius: '6px',\r\n          boxShadow: `0 2px 6px ${color}30`,\r\n          width: 160,\r\n          height: 'auto',\r\n        },\r\n      }\r\n\r\n      nodeMap.set(`entity-${entity.id}`, node)\r\n    })\r\n\r\n    // Sort events by timestamp to create sequential flow (timeline)\r\n    const sortedEvents = [...events].sort((a, b) => \r\n      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\r\n    )\r\n\r\n    // Create edges between events showing the flow of actions\r\n    sortedEvents.forEach((event, index) => {\r\n      // Primary: Parent-child relationship (explicit dependency)\r\n      if (event.parent_event_id && eventMap.has(event.parent_event_id)) {\r\n        const parentEvent = eventMap.get(event.parent_event_id)!\r\n        edgeList.push({\r\n          id: `parent-${event.parent_event_id}-event-${event.id}`,\r\n          source: `event-${event.parent_event_id}`,\r\n          target: `event-${event.id}`,\r\n          type: 'smoothstep',\r\n          animated: event.status === 'in_progress',\r\n          style: {\r\n            stroke: getNodeColor(event.status, getNodeType(event.event_source, event.event_type)),\r\n            strokeWidth: 3,\r\n          },\r\n          label: `${event.event_type}`,\r\n          labelStyle: { fontSize: 9, fill: '#64748b', fontWeight: 'bold', background: 'white', padding: '2px 4px' },\r\n          markerEnd: {\r\n            type: 'arrowclosed',\r\n            color: getNodeColor(event.status, getNodeType(event.event_source, event.event_type)),\r\n            width: 20,\r\n            height: 20,\r\n          },\r\n        })\r\n      } \r\n      // Secondary: Sequential flow (timeline progression) - only if no parent\r\n      else if (index > 0) {\r\n        const prevEvent = sortedEvents[index - 1]\r\n        // Only add sequential edge if events are close in time (< 5 seconds) or same source\r\n        const timeDiff = new Date(event.timestamp).getTime() - new Date(prevEvent.timestamp).getTime()\r\n        if (timeDiff < 5000 || event.event_source === prevEvent.event_source) {\r\n          edgeList.push({\r\n            id: `seq-${prevEvent.id}-${event.id}`,\r\n            source: `event-${prevEvent.id}`,\r\n            target: `event-${event.id}`,\r\n            type: 'smoothstep',\r\n            animated: event.status === 'in_progress',\r\n            style: {\r\n              stroke: '#94a3b8',\r\n              strokeWidth: 2,\r\n              strokeDasharray: '5,5',\r\n            },\r\n            label: `${(timeDiff / 1000).toFixed(1)}s`,\r\n            labelStyle: { fontSize: 8, fill: '#94a3b8', background: 'white', padding: '1px 3px' },\r\n            markerEnd: {\r\n              type: 'arrowclosed',\r\n              color: '#94a3b8',\r\n              width: 15,\r\n              height: 15,\r\n            },\r\n          })\r\n        }\r\n      }\r\n    })\r\n\r\n    // Create edges from events to entities (when event creates/uses entity)\r\n    events.forEach((event) => {\r\n      if (event.task_id && entityMap.has(event.task_id)) {\r\n        edgeList.push({\r\n          id: `event-${event.id}-entity-${event.task_id}`,\r\n          source: `event-${event.id}`,\r\n          target: `entity-${event.task_id}`,\r\n          type: 'smoothstep',\r\n          style: {\r\n            stroke: '#ec4899',\r\n            strokeWidth: 2,\r\n            strokeDasharray: '5,5',\r\n          },\r\n          label: 'creates',\r\n          labelStyle: { fontSize: 10, fill: '#ec4899' },\r\n        })\r\n      }\r\n      if (event.plan_id && entityMap.has(event.plan_id)) {\r\n        edgeList.push({\r\n          id: `event-${event.id}-entity-${event.plan_id}`,\r\n          source: `event-${event.id}`,\r\n          target: `entity-${event.plan_id}`,\r\n          type: 'smoothstep',\r\n          style: {\r\n            stroke: '#14b8a6',\r\n            strokeWidth: 2,\r\n            strokeDasharray: '5,5',\r\n          },\r\n          label: 'creates',\r\n          labelStyle: { fontSize: 10, fill: '#14b8a6' },\r\n        })\r\n      }\r\n      if (event.tool_id && entityMap.has(event.tool_id)) {\r\n        edgeList.push({\r\n          id: `event-${event.id}-entity-${event.tool_id}`,\r\n          source: `event-${event.id}`,\r\n          target: `entity-${event.tool_id}`,\r\n          type: 'smoothstep',\r\n          style: {\r\n            stroke: '#f59e0b',\r\n            strokeWidth: 2,\r\n            strokeDasharray: '5,5',\r\n          },\r\n          label: 'uses',\r\n          labelStyle: { fontSize: 10, fill: '#f59e0b' },\r\n        })\r\n      }\r\n    })\r\n\r\n    return { nodes: Array.from(nodeMap.values()), edges: edgeList }\r\n  }, [events, entities])\r\n\r\n  // Apply dagre layout asynchronously\r\n  useEffect(() => {\r\n    if (nodes.length === 0) {\r\n      setLayoutedNodes([])\r\n      setLayoutedEdges([])\r\n      return\r\n    }\r\n\r\n    getLayoutedElements(nodes, edges, 'LR', events).then((layouted) => {\r\n      setLayoutedNodes(layouted.nodes)\r\n      setLayoutedEdges(layouted.edges)\r\n    }).catch((error) => {\r\n      console.error('Failed to apply dagre layout:', error)\r\n      // Fallback to original positions\r\n      setLayoutedNodes(nodes)\r\n      setLayoutedEdges(edges)\r\n    })\r\n  }, [nodes, edges, events])\r\n\r\n  if (nodes.length === 0) {\r\n    return (\r\n      <div className={cn(\"flex items-center justify-center h-64 text-muted-foreground\", className)}>\r\n        <p className=\"text-sm\">   </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Use layouted nodes/edges if available, otherwise use original\r\n  const displayNodes = layoutedNodes.length > 0 ? layoutedNodes : nodes\r\n  const displayEdges = layoutedEdges.length > 0 ? layoutedEdges : edges\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div className={cn(\"w-full\", className)} style={{ height }}>\r\n          <ReactFlow\r\n          nodes={displayNodes}\r\n          edges={displayEdges}\r\n          fitView\r\n          fitViewOptions={{ padding: 0.3, maxZoom: 1.5, minZoom: 0.5 }}\r\n          nodesDraggable={true}\r\n          nodesConnectable={false}\r\n          elementsSelectable={true}\r\n          selectNodesOnDrag={false}\r\n          panOnDrag={[1, 2]} // Allow panning with middle/right mouse button\r\n          defaultViewport={{ x: 0, y: 0, zoom: 0.8 }}\r\n          minZoom={0.1}\r\n          maxZoom={2}\r\n          preventScrolling={false}\r\n        >\r\n        <Background />\r\n        <Controls />\r\n        <MiniMap \r\n          nodeColor={(node) => {\r\n            const event = events.find(e => node.id === `event-${e.id}`)\r\n            const entity = entities.find(e => node.id === `entity-${e.id}`)\r\n            if (event) {\r\n              return getNodeColor(event.status, getNodeType(event.event_source, event.event_type))\r\n            }\r\n            if (entity) {\r\n              return getNodeColor(entity.status || 'completed', getEntityNodeType(entity.type))\r\n            }\r\n            return '#94a3b8'\r\n          }}\r\n          maskColor=\"rgba(0, 0, 0, 0.1)\"\r\n        />\r\n        <Panel position=\"top-left\" className=\"bg-background/80 backdrop-blur-sm rounded-lg p-2 border\">\r\n          <div className=\"flex items-center gap-4 text-xs\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-3 h-3 rounded border-2 border-blue-500\"></div>\r\n              <span></span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-3 h-3 rounded border-3 border-pink-500 bg-slate-50\"></div>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n        </Panel>\r\n      </ReactFlow>\r\n    </div>\r\n    </TooltipProvider>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3416, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/chat/simple-markdown.tsx"],"sourcesContent":["'use client'\r\n\r\ninterface SimpleMarkdownProps {\r\n  content: string\r\n  className?: string\r\n}\r\n\r\nexport function SimpleMarkdown({ content, className = '' }: SimpleMarkdownProps) {\r\n  // Simple markdown-like formatting without external dependencies\r\n  const formatText = (text: string) => {\r\n    let formatted = text\r\n\r\n    // Code blocks with language\r\n    formatted = formatted.replace(/```(\\w+)?\\n([\\s\\S]*?)```/g, (match, lang, code) => {\r\n      return `<pre class=\"bg-muted rounded p-2 overflow-x-auto my-2\"><code class=\"text-sm\">${escapeHtml(code.trim())}</code></pre>`\r\n    })\r\n\r\n    // Inline code\r\n    formatted = formatted.replace(/`([^`]+)`/g, '<code class=\"bg-muted px-1 py-0.5 rounded text-sm\">$1</code>')\r\n\r\n    // Headers\r\n    formatted = formatted.replace(/^### (.*$)/gim, '<h3 class=\"text-base font-bold mb-1 mt-2 first:mt-0\">$1</h3>')\r\n    formatted = formatted.replace(/^## (.*$)/gim, '<h2 class=\"text-lg font-bold mb-2 mt-3 first:mt-0\">$1</h2>')\r\n    formatted = formatted.replace(/^# (.*$)/gim, '<h1 class=\"text-xl font-bold mb-2 mt-4 first:mt-0\">$1</h1>')\r\n\r\n    // Bold\r\n    formatted = formatted.replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-bold\">$1</strong>')\r\n    formatted = formatted.replace(/__(.*?)__/g, '<strong class=\"font-bold\">$1</strong>')\r\n\r\n    // Italic\r\n    formatted = formatted.replace(/\\*(.*?)\\*/g, '<em class=\"italic\">$1</em>')\r\n    formatted = formatted.replace(/_(.*?)_/g, '<em class=\"italic\">$1</em>')\r\n\r\n    // Links\r\n    formatted = formatted.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" class=\"text-primary hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>')\r\n\r\n    // Blockquotes\r\n    formatted = formatted.replace(/^> (.*$)/gim, '<blockquote class=\"border-l-4 border-primary pl-4 italic my-2\">$1</blockquote>')\r\n\r\n    // Lists - simple approach: wrap items\r\n    formatted = formatted.replace(/^[\\*\\-] (.*$)/gim, '<li class=\"ml-4\">$1</li>')\r\n    formatted = formatted.replace(/^(\\d+)\\. (.*$)/gim, '<li class=\"ml-4\">$2</li>')\r\n    \r\n    // Wrap consecutive list items\r\n    formatted = formatted.replace(/(<li class=\"ml-4\">.*<\\/li>(\\n|$))+/g, (match) => {\r\n      return `<ul class=\"list-disc list-inside mb-2 space-y-1\">${match}</ul>`\r\n    })\r\n\r\n    // Paragraphs: split by double newlines\r\n    const paragraphs = formatted.split(/\\n\\n+/)\r\n    formatted = paragraphs.map(para => {\r\n      const trimmed = para.trim()\r\n      if (!trimmed) return ''\r\n      // If already has HTML tags, don't wrap\r\n      if (trimmed.startsWith('<')) {\r\n        return trimmed\r\n      }\r\n      // Convert single newlines to <br>\r\n      const withBreaks = trimmed.replace(/\\n/g, '<br>')\r\n      return `<p class=\"mb-2 last:mb-0\">${withBreaks}</p>`\r\n    }).filter(p => p).join('')\r\n\r\n    return formatted\r\n  }\r\n\r\n  const escapeHtml = (text: string) => {\r\n    if (typeof window === 'undefined') {\r\n      // Server-side: simple escape\r\n      return text\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&#039;')\r\n    }\r\n    // Client-side: use DOM\r\n    const div = document.createElement('div')\r\n    div.textContent = text\r\n    return div.innerHTML\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`text-sm break-words ${className}`}\r\n      dangerouslySetInnerHTML={{ __html: formatText(content) }}\r\n    />\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAOO,SAAS,eAAe,EAAE,OAAO,EAAE,YAAY,EAAE,EAAuB;IAC7E,gEAAgE;IAChE,MAAM,aAAa,CAAC;QAClB,IAAI,YAAY;QAEhB,4BAA4B;QAC5B,YAAY,UAAU,OAAO,CAAC,6BAA6B,CAAC,OAAO,MAAM;YACvE,OAAO,CAAC,6EAA6E,EAAE,WAAW,KAAK,IAAI,IAAI,aAAa,CAAC;QAC/H;QAEA,cAAc;QACd,YAAY,UAAU,OAAO,CAAC,cAAc;QAE5C,UAAU;QACV,YAAY,UAAU,OAAO,CAAC,iBAAiB;QAC/C,YAAY,UAAU,OAAO,CAAC,gBAAgB;QAC9C,YAAY,UAAU,OAAO,CAAC,eAAe;QAE7C,OAAO;QACP,YAAY,UAAU,OAAO,CAAC,kBAAkB;QAChD,YAAY,UAAU,OAAO,CAAC,cAAc;QAE5C,SAAS;QACT,YAAY,UAAU,OAAO,CAAC,cAAc;QAC5C,YAAY,UAAU,OAAO,CAAC,YAAY;QAE1C,QAAQ;QACR,YAAY,UAAU,OAAO,CAAC,4BAA4B;QAE1D,cAAc;QACd,YAAY,UAAU,OAAO,CAAC,eAAe;QAE7C,sCAAsC;QACtC,YAAY,UAAU,OAAO,CAAC,oBAAoB;QAClD,YAAY,UAAU,OAAO,CAAC,qBAAqB;QAEnD,8BAA8B;QAC9B,YAAY,UAAU,OAAO,CAAC,uCAAuC,CAAC;YACpE,OAAO,CAAC,iDAAiD,EAAE,MAAM,KAAK,CAAC;QACzE;QAEA,uCAAuC;QACvC,MAAM,aAAa,UAAU,KAAK,CAAC;QACnC,YAAY,WAAW,GAAG,CAAC,CAAA;YACzB,MAAM,UAAU,KAAK,IAAI;YACzB,IAAI,CAAC,SAAS,OAAO;YACrB,uCAAuC;YACvC,IAAI,QAAQ,UAAU,CAAC,MAAM;gBAC3B,OAAO;YACT;YACA,kCAAkC;YAClC,MAAM,aAAa,QAAQ,OAAO,CAAC,OAAO;YAC1C,OAAO,CAAC,0BAA0B,EAAE,WAAW,IAAI,CAAC;QACtD,GAAG,MAAM,CAAC,CAAA,IAAK,GAAG,IAAI,CAAC;QAEvB,OAAO;IACT;IAEA,MAAM,aAAa,CAAC;QAClB,wCAAmC;YACjC,6BAA6B;YAC7B,OAAO,KACJ,OAAO,CAAC,MAAM,SACd,OAAO,CAAC,MAAM,QACd,OAAO,CAAC,MAAM,QACd,OAAO,CAAC,MAAM,UACd,OAAO,CAAC,MAAM;QACnB;;;QACA,uBAAuB;QACvB,MAAM;IAGR;IAEA,qBACE,8OAAC;QACC,WAAW,CAAC,oBAAoB,EAAE,WAAW;QAC7C,yBAAyB;YAAE,QAAQ,WAAW;QAAS;;;;;;AAG7D"}},
    {"offset": {"line": 3494, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/chat/reasoning-highlight.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useMemo } from 'react'\r\nimport { SimpleMarkdown } from './simple-markdown'\r\n\r\ninterface ReasoningHighlightProps {\r\n  content: string\r\n}\r\n\r\nexport function ReasoningHighlight({ content }: ReasoningHighlightProps) {\r\n  // Highlight important parts in reasoning\r\n  const highlightedContent = useMemo(() => {\r\n    let text = content\r\n    \r\n    // Highlight decision points (keywords like \"decide\", \"choose\", \"conclude\", \"therefore\", \"thus\")\r\n    const decisionPatterns = [\r\n      /\\b(decide|decided|decision)\\b/gi,\r\n      /\\b(choose|chosen|choice)\\b/gi,\r\n      /\\b(conclude|conclusion|concluded)\\b/gi,\r\n      /\\b(therefore|thus|hence|so)\\b/gi,\r\n      /\\b(because|since|as)\\b/gi,\r\n      /\\b(important|critical|crucial|key)\\b/gi,\r\n      /\\b(should|must|need to|required)\\b/gi,\r\n    ]\r\n    \r\n    decisionPatterns.forEach(pattern => {\r\n      text = text.replace(pattern, (match) => {\r\n        return `**${match}**`\r\n      })\r\n    })\r\n    \r\n    // Highlight numbers and percentages (often important metrics)\r\n    text = text.replace(/\\b(\\d+%?)\\b/g, '**$1**')\r\n    \r\n    // Highlight \"if-then\" logic\r\n    text = text.replace(/\\b(if\\s+[^,]+,\\s*then)\\b/gi, '**$1**')\r\n    \r\n    return text\r\n  }, [content])\r\n\r\n  return <SimpleMarkdown content={highlightedContent} />\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASO,SAAS,mBAAmB,EAAE,OAAO,EAA2B;IACrE,yCAAyC;IACzC,MAAM,qBAAqB,IAAA,gNAAO,EAAC;QACjC,IAAI,OAAO;QAEX,gGAAgG;QAChG,MAAM,mBAAmB;YACvB;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,iBAAiB,OAAO,CAAC,CAAA;YACvB,OAAO,KAAK,OAAO,CAAC,SAAS,CAAC;gBAC5B,OAAO,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC;YACvB;QACF;QAEA,8DAA8D;QAC9D,OAAO,KAAK,OAAO,CAAC,gBAAgB;QAEpC,4BAA4B;QAC5B,OAAO,KAAK,OAAO,CAAC,8BAA8B;QAElD,OAAO;IACT,GAAG;QAAC;KAAQ;IAEZ,qBAAO,8OAAC,2JAAc;QAAC,SAAS;;;;;;AAClC"}},
    {"offset": {"line": 3544, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/chat/workflow-timeline.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { \r\n  ChevronDown, \r\n  ChevronRight, \r\n  Clock, \r\n  CheckCircle2, \r\n  XCircle, \r\n  Loader2,\r\n  Play,\r\n  Pause,\r\n  RotateCcw,\r\n  Brain,\r\n  Code,\r\n  Wrench,\r\n  FileText,\r\n  GitBranch,\r\n  AlertCircle,\r\n  Zap\r\n} from 'lucide-react'\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { SimpleMarkdown } from './simple-markdown'\r\nimport { ReasoningHighlight } from './reasoning-highlight'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWorkflowEvents, useControlWorkflow } from '@/lib/hooks/use-api'\r\nimport { useQueryClient } from '@tanstack/react-query'\r\nimport { WorkflowGraph } from './workflow-graph'\r\nimport { EnhancedWorkflowGraph } from '@/components/workflow/enhanced-workflow-graph'\r\n\r\ninterface WorkflowEvent {\r\n  id: string\r\n  workflow_id: string\r\n  event_type: string\r\n  event_source: string\r\n  stage: string\r\n  status: string\r\n  message: string\r\n  event_data?: any\r\n  metadata?: any\r\n  timestamp: string\r\n  duration_ms?: number\r\n  parent_event_id?: string\r\n}\r\n\r\ninterface WorkflowTimelineProps {\r\n  workflowId: string | null\r\n  className?: string\r\n}\r\n\r\nconst getEventIcon = (eventType: string, eventSource: string) => {\r\n  if (eventType === 'model_request' || eventType === 'model_response') {\r\n    return Brain\r\n  }\r\n  if (eventType === 'tool_call' || eventType === 'tool_result') {\r\n    return Wrench\r\n  }\r\n  if (eventType === 'plan_update') {\r\n    return GitBranch\r\n  }\r\n  if (eventType === 'execution_step') {\r\n    return Code\r\n  }\r\n  if (eventType === 'user_input') {\r\n    return FileText\r\n  }\r\n  if (eventType === 'error') {\r\n    return AlertCircle\r\n  }\r\n  if (eventType === 'completion') {\r\n    return CheckCircle2\r\n  }\r\n  return Zap\r\n}\r\n\r\nconst getEventColor = (eventType: string, status: string) => {\r\n  if (status === 'failed' || eventType === 'error') {\r\n    return 'destructive'\r\n  }\r\n  if (status === 'completed' || eventType === 'completion') {\r\n    return 'default'\r\n  }\r\n  if (status === 'in_progress') {\r\n    return 'secondary'\r\n  }\r\n  return 'outline'\r\n}\r\n\r\nconst getSourceLabel = (source: string) => {\r\n  const labels: Record<string, string> = {\r\n    user: '',\r\n    model: '',\r\n    system: '',\r\n    planner_agent: '',\r\n    coder_agent: '',\r\n    validator: '',\r\n    tool: '',\r\n  }\r\n  return labels[source] || source\r\n}\r\n\r\nconst getStageLabel = (stage: string) => {\r\n  const labels: Record<string, string> = {\r\n    user_request: ' ',\r\n    request_parsing: ' ',\r\n    action_determination: ' ',\r\n    execution: '',\r\n    result: '',\r\n    error: '',\r\n  }\r\n  return labels[stage] || stage\r\n}\r\n\r\nexport function WorkflowTimeline({ workflowId, className }: WorkflowTimelineProps) {\r\n  const [expandedEvents, setExpandedEvents] = useState<Set<string>>(new Set())\r\n  const [isGraphExpanded, setIsGraphExpanded] = useState(true)\r\n  const [wsConnected, setWsConnected] = useState(false)\r\n  const controlWorkflow = useControlWorkflow()\r\n  const queryClient = useQueryClient()\r\n  \r\n  // Load events via API hook with entities\r\n  const { data: eventsData, isLoading } = useWorkflowEvents(workflowId, true)\r\n  const events = eventsData?.events || []\r\n  const entities = eventsData?.entities || []\r\n\r\n  // Connect to WebSocket for real-time updates (optional, polling also works)\r\n  useEffect(() => {\r\n    if (!workflowId) return\r\n\r\n    const wsUrl = process.env.NEXT_PUBLIC_WS_URL || 'ws://localhost:8000/api/ws/events'\r\n    const ws = new WebSocket(`${wsUrl}/${workflowId}`)\r\n\r\n    ws.onopen = () => {\r\n      setWsConnected(true)\r\n    }\r\n\r\n    ws.onmessage = (event) => {\r\n      try {\r\n        const message = JSON.parse(event.data)\r\n        if (message.type === 'event' && message.data) {\r\n          // Invalidate query to refetch events immediately\r\n          queryClient.invalidateQueries({ queryKey: ['workflow-events', workflowId] })\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to parse WebSocket message:', error)\r\n      }\r\n    }\r\n\r\n    ws.onerror = () => {\r\n      setWsConnected(false)\r\n    }\r\n\r\n    ws.onclose = () => {\r\n      setWsConnected(false)\r\n    }\r\n\r\n    return () => {\r\n      ws.close()\r\n    }\r\n  }, [workflowId, queryClient])\r\n\r\n  const toggleEvent = (eventId: string) => {\r\n    setExpandedEvents(prev => {\r\n      const next = new Set(prev)\r\n      if (next.has(eventId)) {\r\n        next.delete(eventId)\r\n      } else {\r\n        next.add(eventId)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  // Build event tree structure\r\n  const eventTree = useMemo(() => {\r\n    const eventMap = new Map<string, WorkflowEvent & { children: WorkflowEvent[] }>()\r\n    const rootEvents: (WorkflowEvent & { children: WorkflowEvent[] })[] = []\r\n\r\n    // First pass: create all nodes\r\n    events.forEach(event => {\r\n      eventMap.set(event.id, { ...event, children: [] })\r\n    })\r\n\r\n    // Second pass: build tree\r\n    events.forEach(event => {\r\n      const node = eventMap.get(event.id)!\r\n      if (event.parent_event_id && eventMap.has(event.parent_event_id)) {\r\n        const parent = eventMap.get(event.parent_event_id)!\r\n        parent.children.push(node)\r\n      } else {\r\n        rootEvents.push(node)\r\n      }\r\n    })\r\n\r\n    return rootEvents.sort((a, b) => \r\n      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\r\n    )\r\n  }, [events])\r\n\r\n  if (!workflowId) {\r\n    return null\r\n  }\r\n\r\n  const renderEvent = (event: WorkflowEvent & { children: WorkflowEvent[] }, depth = 0) => {\r\n    const isExpanded = expandedEvents.has(event.id)\r\n    const Icon = getEventIcon(event.event_type, event.event_source)\r\n    const hasDetails = event.event_data || event.metadata || event.reasoning || event.task_id || event.plan_id || event.tool_id\r\n    \r\n    // Find related entities\r\n    const relatedTask = event.task_id ? entities.find(e => e.id === event.task_id && e.type === 'task') : null\r\n    const relatedPlan = event.plan_id ? entities.find(e => e.id === event.plan_id && e.type === 'plan') : null\r\n    const relatedTool = event.tool_id ? entities.find(e => e.id === event.tool_id && e.type === 'tool') : null\r\n\r\n    return (\r\n      <div key={event.id} className={cn(\"mb-2\", depth > 0 && \"ml-6 border-l-2 border-muted pl-4\")}>\r\n        <Card className=\"hover:shadow-md transition-shadow\">\r\n          <CardContent className=\"p-3\">\r\n            <div className=\"flex items-start gap-3\">\r\n              {/* Timeline indicator */}\r\n              <div className=\"flex flex-col items-center pt-1\">\r\n                <div className={cn(\r\n                  \"rounded-full p-1.5\",\r\n                  event.status === 'completed' ? \"bg-green-100 text-green-600\" :\r\n                  event.status === 'failed' ? \"bg-red-100 text-red-600\" :\r\n                  event.status === 'in_progress' ? \"bg-blue-100 text-blue-600 animate-pulse\" :\r\n                  \"bg-muted text-muted-foreground\"\r\n                )}>\r\n                  <Icon className=\"h-3 w-3\" />\r\n                </div>\r\n                {event.status === 'in_progress' && (\r\n                  <div className=\"w-0.5 h-full bg-blue-200 mt-1\" />\r\n                )}\r\n              </div>\r\n\r\n              {/* Event content */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between gap-2 mb-1\">\r\n                  <div className=\"flex items-center gap-2 flex-wrap\">\r\n                    <Badge variant={getEventColor(event.event_type, event.status) as any}>\r\n                      {getSourceLabel(event.event_source)}\r\n                    </Badge>\r\n                    <Badge variant=\"outline\">\r\n                      {getStageLabel(event.stage)}\r\n                    </Badge>\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {formatDistanceToNow(new Date(event.timestamp), { addSuffix: true })}\r\n                    </span>\r\n                    {event.duration_ms && (\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {(event.duration_ms / 1000).toFixed(2)}s\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  {hasDetails && (\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => toggleEvent(event.id)}\r\n                      className=\"h-6 w-6 p-0\"\r\n                    >\r\n                      {isExpanded ? (\r\n                        <ChevronDown className=\"h-4 w-4\" />\r\n                      ) : (\r\n                        <ChevronRight className=\"h-4 w-4\" />\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n\r\n                <p className=\"text-sm font-medium mb-1\">{event.message}</p>\r\n\r\n                {/* Expanded details */}\r\n                {isExpanded && hasDetails && (\r\n                  <div className=\"mt-3 space-y-3 border-t pt-3\">\r\n                    {/* Reasoning - highlight important parts */}\r\n                    {event.event_data?.reasoning || event.metadata?.reasoning ? (\r\n                      <div>\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <Brain className=\"h-4 w-4 text-primary\" />\r\n                          <span className=\"text-xs font-semibold\"> </span>\r\n                        </div>\r\n                        <div className=\"bg-muted/50 rounded p-2 text-xs border-l-2 border-primary/30\">\r\n                          <ReasoningHighlight \r\n                            content={event.event_data?.reasoning || event.metadata?.reasoning} \r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                    \r\n                    {/* Model Thinking step - combine reasoning with request/response */}\r\n                    {event.event_type === 'model_response' && event.event_data?.reasoning ? (\r\n                      <div>\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <Brain className=\"h-4 w-4 text-primary\" />\r\n                          <span className=\"text-xs font-semibold\">Model Thinking</span>\r\n                        </div>\r\n                        <div className=\"bg-primary/5 rounded p-2 text-xs border-l-2 border-primary/50\">\r\n                          <ReasoningHighlight content={event.event_data.reasoning} />\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {/* Prompt details - show even if empty to indicate prompt was used */}\r\n                    {(event.event_data?.system_prompt || event.event_data?.user_prompt || event.event_data?.full_prompt || event.metadata?.system_prompt) ? (\r\n                      <details className=\"text-xs\" defaultOpen={false}>\r\n                        <summary className=\"cursor-pointer font-semibold mb-1 flex items-center gap-2\">\r\n                          <span> </span>\r\n                          {event.event_data?.system_prompt && (\r\n                            <Badge variant=\"outline\" className=\"text-[9px]\">System</Badge>\r\n                          )}\r\n                          {event.event_data?.user_prompt && (\r\n                            <Badge variant=\"outline\" className=\"text-[9px]\">User</Badge>\r\n                          )}\r\n                        </summary>\r\n                        <div className=\"bg-muted/50 rounded p-2 mt-1 space-y-2\">\r\n                          {event.event_data?.system_prompt && (\r\n                            <div>\r\n                              <div className=\"text-[10px] font-semibold mb-1 text-primary\">System Prompt:</div>\r\n                              <div className=\"text-xs\">\r\n                                <SimpleMarkdown content={event.event_data.system_prompt} />\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {event.event_data?.user_prompt && (\r\n                            <div>\r\n                              <div className=\"text-[10px] font-semibold mb-1\">User Prompt:</div>\r\n                              <div className=\"text-xs\">\r\n                                <SimpleMarkdown content={event.event_data.user_prompt} />\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {event.event_data?.full_prompt && !event.event_data?.system_prompt && !event.event_data?.user_prompt && (\r\n                            <div>\r\n                              <SimpleMarkdown content={event.event_data.full_prompt} />\r\n                            </div>\r\n                          )}\r\n                          {event.metadata?.system_prompt && !event.event_data?.system_prompt && (\r\n                            <div>\r\n                              <div className=\"text-[10px] font-semibold mb-1 text-primary\">System Prompt (from metadata):</div>\r\n                              <div className=\"text-xs\">\r\n                                <SimpleMarkdown content={event.metadata.system_prompt} />\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </details>\r\n                    ) : (\r\n                      // Show indicator even if no prompt to indicate it was checked\r\n                      event.event_type === 'model_request' || event.event_type === 'model_response' ? (\r\n                        <div className=\"text-xs text-muted-foreground italic\">\r\n                              ( )\r\n                        </div>\r\n                      ) : null\r\n                    )}\r\n\r\n                    {/* Response */}\r\n                    {event.event_data?.full_response || event.event_data?.response ? (\r\n                      <details className=\"text-xs\">\r\n                        <summary className=\"cursor-pointer font-semibold mb-1\">\r\n                           \r\n                        </summary>\r\n                        <div className=\"bg-muted/50 rounded p-2 mt-1\">\r\n                          <SimpleMarkdown \r\n                            content={event.event_data?.full_response || event.event_data?.response} \r\n                          />\r\n                        </div>\r\n                      </details>\r\n                    ) : null}\r\n\r\n                    {/* Tool call details */}\r\n                    {event.event_type === 'tool_call' && event.event_data ? (\r\n                      <details className=\"text-xs\">\r\n                        <summary className=\"cursor-pointer font-semibold mb-1\">\r\n                           \r\n                        </summary>\r\n                        <div className=\"bg-muted/50 rounded p-2 mt-1\">\r\n                          <pre className=\"text-xs whitespace-pre-wrap\">\r\n                            {JSON.stringify(event.event_data, null, 2)}\r\n                          </pre>\r\n                        </div>\r\n                      </details>\r\n                    ) : null}\r\n\r\n                    {/* Tool result */}\r\n                    {event.event_type === 'tool_result' && event.event_data ? (\r\n                      <details className=\"text-xs\">\r\n                        <summary className=\"cursor-pointer font-semibold mb-1\">\r\n                           \r\n                        </summary>\r\n                        <div className=\"bg-muted/50 rounded p-2 mt-1\">\r\n                          <pre className=\"text-xs whitespace-pre-wrap\">\r\n                            {JSON.stringify(event.event_data, null, 2)}\r\n                          </pre>\r\n                        </div>\r\n                      </details>\r\n                    ) : null}\r\n\r\n                    {/* Full event data */}\r\n                    {event.event_data && Object.keys(event.event_data).length > 0 && (\r\n                      <details className=\"text-xs\">\r\n                        <summary className=\"cursor-pointer font-semibold mb-1\">\r\n                            \r\n                        </summary>\r\n                        <div className=\"bg-muted/50 rounded p-2 mt-1\">\r\n                          <pre className=\"text-xs whitespace-pre-wrap overflow-x-auto\">\r\n                            {JSON.stringify(event.event_data, null, 2)}\r\n                          </pre>\r\n                        </div>\r\n                      </details>\r\n                    )}\r\n\r\n                    {/* Metadata */}\r\n                    {event.metadata && Object.keys(event.metadata).length > 0 && (\r\n                      <details className=\"text-xs\">\r\n                        <summary className=\"cursor-pointer font-semibold mb-1\">\r\n                          \r\n                        </summary>\r\n                        <div className=\"bg-muted/50 rounded p-2 mt-1\">\r\n                          <pre className=\"text-xs whitespace-pre-wrap overflow-x-auto\">\r\n                            {JSON.stringify(event.metadata, null, 2)}\r\n                          </pre>\r\n                        </div>\r\n                      </details>\r\n                    )}\r\n\r\n                    {/* Related Entities */}\r\n                    {(relatedTask || relatedPlan || relatedTool) && (\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"text-xs font-semibold mb-1\"> </div>\r\n                        \r\n                        {relatedTask && (\r\n                          <details className=\"text-xs\">\r\n                            <summary className=\"cursor-pointer font-semibold mb-1 flex items-center gap-2\">\r\n                              <FileText className=\"h-3 w-3\" />\r\n                              : {relatedTask.name}\r\n                            </summary>\r\n                            <div className=\"bg-muted/50 rounded p-2 mt-1 space-y-1\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-medium\">ID:</span>\r\n                                <code className=\"text-xs bg-background px-1 rounded\">{relatedTask.id}</code>\r\n                              </div>\r\n                              {relatedTask.status && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <span className=\"font-medium\">:</span>\r\n                                  <Badge variant=\"outline\" className=\"text-xs\">\r\n                                    {relatedTask.status}\r\n                                  </Badge>\r\n                                </div>\r\n                              )}\r\n                              <div className=\"text-xs text-muted-foreground\">\r\n                                <Link \r\n                                  href={`/tasks/${relatedTask.id}`}\r\n                                  className=\"text-primary hover:underline\"\r\n                                  onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                     \r\n                                </Link>\r\n                              </div>\r\n                            </div>\r\n                          </details>\r\n                        )}\r\n\r\n                        {relatedPlan && (\r\n                          <details className=\"text-xs\">\r\n                            <summary className=\"cursor-pointer font-semibold mb-1 flex items-center gap-2\">\r\n                              <Brain className=\"h-3 w-3\" />\r\n                              : {relatedPlan.name}\r\n                            </summary>\r\n                            <div className=\"bg-muted/50 rounded p-2 mt-1 space-y-1\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-medium\">ID:</span>\r\n                                <code className=\"text-xs bg-background px-1 rounded\">{relatedPlan.id}</code>\r\n                              </div>\r\n                              {relatedPlan.status && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <span className=\"font-medium\">:</span>\r\n                                  <Badge variant=\"outline\" className=\"text-xs\">\r\n                                    {relatedPlan.status}\r\n                                  </Badge>\r\n                                </div>\r\n                              )}\r\n                              <div className=\"text-xs text-muted-foreground\">\r\n                                <Link \r\n                                  href={`/plans?task_id=${relatedTask?.id || ''}`}\r\n                                  className=\"text-primary hover:underline\"\r\n                                  onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                    \r\n                                </Link>\r\n                              </div>\r\n                            </div>\r\n                          </details>\r\n                        )}\r\n\r\n                        {relatedTool && (\r\n                          <details className=\"text-xs\">\r\n                            <summary className=\"cursor-pointer font-semibold mb-1 flex items-center gap-2\">\r\n                              <Wrench className=\"h-3 w-3\" />\r\n                              : {relatedTool.name}\r\n                            </summary>\r\n                            <div className=\"bg-muted/50 rounded p-2 mt-1 space-y-1\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-medium\">ID:</span>\r\n                                <code className=\"text-xs bg-background px-1 rounded\">{relatedTool.id}</code>\r\n                              </div>\r\n                              {relatedTool.status && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <span className=\"font-medium\">:</span>\r\n                                  <Badge variant=\"outline\" className=\"text-xs\">\r\n                                    {relatedTool.status}\r\n                                  </Badge>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </details>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Children events */}\r\n                {event.children.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    {event.children.map(child => renderEvent(child, depth + 1))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"space-y-2\", className)}>\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n            <span className=\"text-sm font-semibold\">Execution Timeline</span>\r\n            {wsConnected && (\r\n              <Badge variant=\"outline\" className=\"text-xs\">\r\n                Live\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"h-7 px-2\"\r\n              onClick={() => workflowId && controlWorkflow.mutate({ workflowId, action: 'pause' })}\r\n              title=\" \"\r\n            >\r\n              <Pause className=\"h-3 w-3\" />\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"h-7 px-2\"\r\n              onClick={() => workflowId && controlWorkflow.mutate({ workflowId, action: 'resume' })}\r\n              title=\" \"\r\n            >\r\n              <Play className=\"h-3 w-3\" />\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"h-7 px-2\"\r\n              onClick={() => workflowId && controlWorkflow.mutate({ workflowId, action: 'cancel' })}\r\n              title=\" \"\r\n            >\r\n              <XCircle className=\"h-3 w-3\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Enhanced Dependency Graph */}\r\n        {events.length > 0 && (\r\n          <div className=\"mb-3\">\r\n            <button\r\n              onClick={() => setIsGraphExpanded(!isGraphExpanded)}\r\n              className=\"text-xs font-semibold cursor-pointer hover:text-foreground mb-2 flex items-center gap-2 w-full text-left\"\r\n            >\r\n              {isGraphExpanded ? (\r\n                <ChevronDown className=\"h-3 w-3\" />\r\n              ) : (\r\n                <ChevronRight className=\"h-3 w-3\" />\r\n              )}\r\n              <GitBranch className=\"h-3 w-3\" />\r\n                  \r\n            </button>\r\n            {isGraphExpanded && (\r\n              <Card className=\"mt-2\">\r\n                <EnhancedWorkflowGraph \r\n                  events={events} \r\n                  entities={entities}\r\n                  height=\"500px\"\r\n                />\r\n              </Card>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-8\">\r\n          <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\r\n        </div>\r\n      ) : eventTree.length === 0 ? (\r\n        <div className=\"text-center py-8 text-muted-foreground text-sm\">\r\n          <Clock className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n          <p> ...</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-1 max-h-96 overflow-y-auto\">\r\n          {eventTree.map(event => renderEvent(event))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AACA;AACA;AACA;AACA;AACA;AAEA;AAhCA;;;;;;;;;;;;;;;AAsDA,MAAM,eAAe,CAAC,WAAmB;IACvC,IAAI,cAAc,mBAAmB,cAAc,kBAAkB;QACnE,OAAO,6MAAK;IACd;IACA,IAAI,cAAc,eAAe,cAAc,eAAe;QAC5D,OAAO,gNAAM;IACf;IACA,IAAI,cAAc,eAAe;QAC/B,OAAO,6NAAS;IAClB;IACA,IAAI,cAAc,kBAAkB;QAClC,OAAO,0MAAI;IACb;IACA,IAAI,cAAc,cAAc;QAC9B,OAAO,0NAAQ;IACjB;IACA,IAAI,cAAc,SAAS;QACzB,OAAO,mOAAW;IACpB;IACA,IAAI,cAAc,cAAc;QAC9B,OAAO,qOAAY;IACrB;IACA,OAAO,uMAAG;AACZ;AAEA,MAAM,gBAAgB,CAAC,WAAmB;IACxC,IAAI,WAAW,YAAY,cAAc,SAAS;QAChD,OAAO;IACT;IACA,IAAI,WAAW,eAAe,cAAc,cAAc;QACxD,OAAO;IACT;IACA,IAAI,WAAW,eAAe;QAC5B,OAAO;IACT;IACA,OAAO;AACT;AAEA,MAAM,iBAAiB,CAAC;IACtB,MAAM,SAAiC;QACrC,MAAM;QACN,OAAO;QACP,QAAQ;QACR,eAAe;QACf,aAAa;QACb,WAAW;QACX,MAAM;IACR;IACA,OAAO,MAAM,CAAC,OAAO,IAAI;AAC3B;AAEA,MAAM,gBAAgB,CAAC;IACrB,MAAM,SAAiC;QACrC,cAAc;QACd,iBAAiB;QACjB,sBAAsB;QACtB,WAAW;QACX,QAAQ;QACR,OAAO;IACT;IACA,OAAO,MAAM,CAAC,MAAM,IAAI;AAC1B;AAEO,SAAS,iBAAiB,EAAE,UAAU,EAAE,SAAS,EAAyB;IAC/E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAc,IAAI;IACtE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,kBAAkB,IAAA,gJAAkB;IAC1C,MAAM,cAAc,IAAA,wMAAc;IAElC,yCAAyC;IACzC,MAAM,EAAE,MAAM,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,+IAAiB,EAAC,YAAY;IACtE,MAAM,SAAS,YAAY,UAAU,EAAE;IACvC,MAAM,WAAW,YAAY,YAAY,EAAE;IAE3C,4EAA4E;IAC5E,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY;QAEjB,MAAM,QAAQ,QAAQ,GAAG,CAAC,kBAAkB,IAAI;QAChD,MAAM,KAAK,IAAI,UAAU,GAAG,MAAM,CAAC,EAAE,YAAY;QAEjD,GAAG,MAAM,GAAG;YACV,eAAe;QACjB;QAEA,GAAG,SAAS,GAAG,CAAC;YACd,IAAI;gBACF,MAAM,UAAU,KAAK,KAAK,CAAC,MAAM,IAAI;gBACrC,IAAI,QAAQ,IAAI,KAAK,WAAW,QAAQ,IAAI,EAAE;oBAC5C,iDAAiD;oBACjD,YAAY,iBAAiB,CAAC;wBAAE,UAAU;4BAAC;4BAAmB;yBAAW;oBAAC;gBAC5E;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;YACtD;QACF;QAEA,GAAG,OAAO,GAAG;YACX,eAAe;QACjB;QAEA,GAAG,OAAO,GAAG;YACX,eAAe;QACjB;QAEA,OAAO;YACL,GAAG,KAAK;QACV;IACF,GAAG;QAAC;QAAY;KAAY;IAE5B,MAAM,cAAc,CAAC;QACnB,kBAAkB,CAAA;YAChB,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,KAAK,GAAG,CAAC,UAAU;gBACrB,KAAK,MAAM,CAAC;YACd,OAAO;gBACL,KAAK,GAAG,CAAC;YACX;YACA,OAAO;QACT;IACF;IAEA,6BAA6B;IAC7B,MAAM,YAAY,IAAA,gNAAO,EAAC;QACxB,MAAM,WAAW,IAAI;QACrB,MAAM,aAAgE,EAAE;QAExE,+BAA+B;QAC/B,OAAO,OAAO,CAAC,CAAA;YACb,SAAS,GAAG,CAAC,MAAM,EAAE,EAAE;gBAAE,GAAG,KAAK;gBAAE,UAAU,EAAE;YAAC;QAClD;QAEA,0BAA0B;QAC1B,OAAO,OAAO,CAAC,CAAA;YACb,MAAM,OAAO,SAAS,GAAG,CAAC,MAAM,EAAE;YAClC,IAAI,MAAM,eAAe,IAAI,SAAS,GAAG,CAAC,MAAM,eAAe,GAAG;gBAChE,MAAM,SAAS,SAAS,GAAG,CAAC,MAAM,eAAe;gBACjD,OAAO,QAAQ,CAAC,IAAI,CAAC;YACvB,OAAO;gBACL,WAAW,IAAI,CAAC;YAClB;QACF;QAEA,OAAO,WAAW,IAAI,CAAC,CAAC,GAAG,IACzB,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;IAEnE,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,MAAM,cAAc,CAAC,OAAsD,QAAQ,CAAC;QAClF,MAAM,aAAa,eAAe,GAAG,CAAC,MAAM,EAAE;QAC9C,MAAM,OAAO,aAAa,MAAM,UAAU,EAAE,MAAM,YAAY;QAC9D,MAAM,aAAa,MAAM,UAAU,IAAI,MAAM,QAAQ,IAAI,MAAM,SAAS,IAAI,MAAM,OAAO,IAAI,MAAM,OAAO,IAAI,MAAM,OAAO;QAE3H,wBAAwB;QACxB,MAAM,cAAc,MAAM,OAAO,GAAG,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,OAAO,IAAI,EAAE,IAAI,KAAK,UAAU;QACtG,MAAM,cAAc,MAAM,OAAO,GAAG,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,OAAO,IAAI,EAAE,IAAI,KAAK,UAAU;QACtG,MAAM,cAAc,MAAM,OAAO,GAAG,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,OAAO,IAAI,EAAE,IAAI,KAAK,UAAU;QAEtG,qBACE,8OAAC;YAAmB,WAAW,IAAA,kHAAE,EAAC,QAAQ,QAAQ,KAAK;sBACrD,cAAA,8OAAC,iIAAI;gBAAC,WAAU;0BACd,cAAA,8OAAC,wIAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAW,IAAA,kHAAE,EAChB,sBACA,MAAM,MAAM,KAAK,cAAc,gCAC/B,MAAM,MAAM,KAAK,WAAW,4BAC5B,MAAM,MAAM,KAAK,gBAAgB,4CACjC;kDAEA,cAAA,8OAAC;4CAAK,WAAU;;;;;;;;;;;oCAEjB,MAAM,MAAM,KAAK,+BAChB,8OAAC;wCAAI,WAAU;;;;;;;;;;;;0CAKnB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,mIAAK;wDAAC,SAAS,cAAc,MAAM,UAAU,EAAE,MAAM,MAAM;kEACzD,eAAe,MAAM,YAAY;;;;;;kEAEpC,8OAAC,mIAAK;wDAAC,SAAQ;kEACZ,cAAc,MAAM,KAAK;;;;;;kEAE5B,8OAAC;wDAAK,WAAU;kEACb,IAAA,0KAAmB,EAAC,IAAI,KAAK,MAAM,SAAS,GAAG;4DAAE,WAAW;wDAAK;;;;;;oDAEnE,MAAM,WAAW,kBAChB,8OAAC;wDAAK,WAAU;;4DACb,CAAC,MAAM,WAAW,GAAG,IAAI,EAAE,OAAO,CAAC;4DAAG;;;;;;;;;;;;;4CAI5C,4BACC,8OAAC,qIAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,SAAS,IAAM,YAAY,MAAM,EAAE;gDACnC,WAAU;0DAET,2BACC,8OAAC,mOAAW;oDAAC,WAAU;;;;;yEAEvB,8OAAC,sOAAY;oDAAC,WAAU;;;;;;;;;;;;;;;;;kDAMhC,8OAAC;wCAAE,WAAU;kDAA4B,MAAM,OAAO;;;;;;oCAGrD,cAAc,4BACb,8OAAC;wCAAI,WAAU;;4CAEZ,MAAM,UAAU,EAAE,aAAa,MAAM,QAAQ,EAAE,0BAC9C,8OAAC;;kEACC,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,6MAAK;gEAAC,WAAU;;;;;;0EACjB,8OAAC;gEAAK,WAAU;0EAAwB;;;;;;;;;;;;kEAE1C,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC,mKAAkB;4DACjB,SAAS,MAAM,UAAU,EAAE,aAAa,MAAM,QAAQ,EAAE;;;;;;;;;;;;;;;;uDAI5D;4CAGH,MAAM,UAAU,KAAK,oBAAoB,MAAM,UAAU,EAAE,0BAC1D,8OAAC;;kEACC,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,6MAAK;gEAAC,WAAU;;;;;;0EACjB,8OAAC;gEAAK,WAAU;0EAAwB;;;;;;;;;;;;kEAE1C,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC,mKAAkB;4DAAC,SAAS,MAAM,UAAU,CAAC,SAAS;;;;;;;;;;;;;;;;uDAGzD;4CAGF,MAAM,UAAU,EAAE,iBAAiB,MAAM,UAAU,EAAE,eAAe,MAAM,UAAU,EAAE,eAAe,MAAM,QAAQ,EAAE,8BACrH,8OAAC;gDAAQ,WAAU;gDAAU,aAAa;;kEACxC,8OAAC;wDAAQ,WAAU;;0EACjB,8OAAC;0EAAK;;;;;;4DACL,MAAM,UAAU,EAAE,+BACjB,8OAAC,mIAAK;gEAAC,SAAQ;gEAAU,WAAU;0EAAa;;;;;;4DAEjD,MAAM,UAAU,EAAE,6BACjB,8OAAC,mIAAK;gEAAC,SAAQ;gEAAU,WAAU;0EAAa;;;;;;;;;;;;kEAGpD,8OAAC;wDAAI,WAAU;;4DACZ,MAAM,UAAU,EAAE,+BACjB,8OAAC;;kFACC,8OAAC;wEAAI,WAAU;kFAA8C;;;;;;kFAC7D,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC,2JAAc;4EAAC,SAAS,MAAM,UAAU,CAAC,aAAa;;;;;;;;;;;;;;;;;4DAI5D,MAAM,UAAU,EAAE,6BACjB,8OAAC;;kFACC,8OAAC;wEAAI,WAAU;kFAAiC;;;;;;kFAChD,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC,2JAAc;4EAAC,SAAS,MAAM,UAAU,CAAC,WAAW;;;;;;;;;;;;;;;;;4DAI1D,MAAM,UAAU,EAAE,eAAe,CAAC,MAAM,UAAU,EAAE,iBAAiB,CAAC,MAAM,UAAU,EAAE,6BACvF,8OAAC;0EACC,cAAA,8OAAC,2JAAc;oEAAC,SAAS,MAAM,UAAU,CAAC,WAAW;;;;;;;;;;;4DAGxD,MAAM,QAAQ,EAAE,iBAAiB,CAAC,MAAM,UAAU,EAAE,+BACnD,8OAAC;;kFACC,8OAAC;wEAAI,WAAU;kFAA8C;;;;;;kFAC7D,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC,2JAAc;4EAAC,SAAS,MAAM,QAAQ,CAAC,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;uDAO/D,8DAA8D;4CAC9D,MAAM,UAAU,KAAK,mBAAmB,MAAM,UAAU,KAAK,iCAC3D,8OAAC;gDAAI,WAAU;0DAAuC;;;;;uDAGpD;4CAIL,MAAM,UAAU,EAAE,iBAAiB,MAAM,UAAU,EAAE,yBACpD,8OAAC;gDAAQ,WAAU;;kEACjB,8OAAC;wDAAQ,WAAU;kEAAoC;;;;;;kEAGvD,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC,2JAAc;4DACb,SAAS,MAAM,UAAU,EAAE,iBAAiB,MAAM,UAAU,EAAE;;;;;;;;;;;;;;;;uDAIlE;4CAGH,MAAM,UAAU,KAAK,eAAe,MAAM,UAAU,iBACnD,8OAAC;gDAAQ,WAAU;;kEACjB,8OAAC;wDAAQ,WAAU;kEAAoC;;;;;;kEAGvD,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DAAI,WAAU;sEACZ,KAAK,SAAS,CAAC,MAAM,UAAU,EAAE,MAAM;;;;;;;;;;;;;;;;uDAI5C;4CAGH,MAAM,UAAU,KAAK,iBAAiB,MAAM,UAAU,iBACrD,8OAAC;gDAAQ,WAAU;;kEACjB,8OAAC;wDAAQ,WAAU;kEAAoC;;;;;;kEAGvD,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DAAI,WAAU;sEACZ,KAAK,SAAS,CAAC,MAAM,UAAU,EAAE,MAAM;;;;;;;;;;;;;;;;uDAI5C;4CAGH,MAAM,UAAU,IAAI,OAAO,IAAI,CAAC,MAAM,UAAU,EAAE,MAAM,GAAG,mBAC1D,8OAAC;gDAAQ,WAAU;;kEACjB,8OAAC;wDAAQ,WAAU;kEAAoC;;;;;;kEAGvD,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DAAI,WAAU;sEACZ,KAAK,SAAS,CAAC,MAAM,UAAU,EAAE,MAAM;;;;;;;;;;;;;;;;;4CAO/C,MAAM,QAAQ,IAAI,OAAO,IAAI,CAAC,MAAM,QAAQ,EAAE,MAAM,GAAG,mBACtD,8OAAC;gDAAQ,WAAU;;kEACjB,8OAAC;wDAAQ,WAAU;kEAAoC;;;;;;kEAGvD,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DAAI,WAAU;sEACZ,KAAK,SAAS,CAAC,MAAM,QAAQ,EAAE,MAAM;;;;;;;;;;;;;;;;;4CAO7C,CAAC,eAAe,eAAe,WAAW,mBACzC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;kEAA6B;;;;;;oDAE3C,6BACC,8OAAC;wDAAQ,WAAU;;0EACjB,8OAAC;gEAAQ,WAAU;;kFACjB,8OAAC,0NAAQ;wEAAC,WAAU;;;;;;oEAAY;oEACvB,YAAY,IAAI;;;;;;;0EAE3B,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAc;;;;;;0FAC9B,8OAAC;gFAAK,WAAU;0FAAsC,YAAY,EAAE;;;;;;;;;;;;oEAErE,YAAY,MAAM,kBACjB,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAc;;;;;;0FAC9B,8OAAC,mIAAK;gFAAC,SAAQ;gFAAU,WAAU;0FAChC,YAAY,MAAM;;;;;;;;;;;;kFAIzB,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC,uKAAI;4EACH,MAAM,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE;4EAChC,WAAU;4EACV,SAAS,CAAC,IAAM,EAAE,eAAe;sFAClC;;;;;;;;;;;;;;;;;;;;;;;oDAQR,6BACC,8OAAC;wDAAQ,WAAU;;0EACjB,8OAAC;gEAAQ,WAAU;;kFACjB,8OAAC,6MAAK;wEAAC,WAAU;;;;;;oEAAY;oEACtB,YAAY,IAAI;;;;;;;0EAEzB,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAc;;;;;;0FAC9B,8OAAC;gFAAK,WAAU;0FAAsC,YAAY,EAAE;;;;;;;;;;;;oEAErE,YAAY,MAAM,kBACjB,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAc;;;;;;0FAC9B,8OAAC,mIAAK;gFAAC,SAAQ;gFAAU,WAAU;0FAChC,YAAY,MAAM;;;;;;;;;;;;kFAIzB,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC,uKAAI;4EACH,MAAM,CAAC,eAAe,EAAE,aAAa,MAAM,IAAI;4EAC/C,WAAU;4EACV,SAAS,CAAC,IAAM,EAAE,eAAe;sFAClC;;;;;;;;;;;;;;;;;;;;;;;oDAQR,6BACC,8OAAC;wDAAQ,WAAU;;0EACjB,8OAAC;gEAAQ,WAAU;;kFACjB,8OAAC,gNAAM;wEAAC,WAAU;;;;;;oEAAY;oEACjB,YAAY,IAAI;;;;;;;0EAE/B,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAc;;;;;;0FAC9B,8OAAC;gFAAK,WAAU;0FAAsC,YAAY,EAAE;;;;;;;;;;;;oEAErE,YAAY,MAAM,kBACjB,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;0FAAc;;;;;;0FAC9B,8OAAC,mIAAK;gFAAC,SAAQ;gFAAU,WAAU;0FAChC,YAAY,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oCAatC,MAAM,QAAQ,CAAC,MAAM,GAAG,mBACvB,8OAAC;wCAAI,WAAU;kDACZ,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAA,QAAS,YAAY,OAAO,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAtT5D,MAAM,EAAE;;;;;IA+TtB;IAEA,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,aAAa;;0BAC9B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,WAAU;;;;;;kDACjB,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;oCACvC,6BACC,8OAAC,mIAAK;wCAAC,SAAQ;wCAAU,WAAU;kDAAU;;;;;;;;;;;;0CAKjD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,qIAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS,IAAM,cAAc,gBAAgB,MAAM,CAAC;gDAAE;gDAAY,QAAQ;4CAAQ;wCAClF,OAAM;kDAEN,cAAA,8OAAC,6MAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,8OAAC,qIAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS,IAAM,cAAc,gBAAgB,MAAM,CAAC;gDAAE;gDAAY,QAAQ;4CAAS;wCACnF,OAAM;kDAEN,cAAA,8OAAC,0MAAI;4CAAC,WAAU;;;;;;;;;;;kDAElB,8OAAC,qIAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS,IAAM,cAAc,gBAAgB,MAAM,CAAC;gDAAE;gDAAY,QAAQ;4CAAS;wCACnF,OAAM;kDAEN,cAAA,8OAAC,uNAAO;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;oBAMxB,OAAO,MAAM,GAAG,mBACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,mBAAmB,CAAC;gCACnC,WAAU;;oCAET,gCACC,8OAAC,mOAAW;wCAAC,WAAU;;;;;6DAEvB,8OAAC,sOAAY;wCAAC,WAAU;;;;;;kDAE1B,8OAAC,6NAAS;wCAAC,WAAU;;;;;;oCAAY;;;;;;;4BAGlC,iCACC,8OAAC,iIAAI;gCAAC,WAAU;0CACd,cAAA,8OAAC,iLAAqB;oCACpB,QAAQ;oCACR,UAAU;oCACV,QAAO;;;;;;;;;;;;;;;;;;;;;;;YAQlB,0BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,4NAAO;oBAAC,WAAU;;;;;;;;;;uBAEnB,UAAU,MAAM,KAAK,kBACvB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6MAAK;wBAAC,WAAU;;;;;;kCACjB,8OAAC;kCAAE;;;;;;;;;;;qCAGL,8OAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAA,QAAS,YAAY;;;;;;;;;;;;AAK9C"}},
    {"offset": {"line": 4880, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface TabsContextValue {\r\n  value: string\r\n  onValueChange: (value: string) => void\r\n}\r\n\r\nconst TabsContext = React.createContext<TabsContextValue | undefined>(undefined)\r\n\r\ninterface TabsProps {\r\n  defaultValue?: string\r\n  value?: string\r\n  onValueChange?: (value: string) => void\r\n  children: React.ReactNode\r\n  className?: string\r\n}\r\n\r\nconst Tabs = ({ defaultValue, value: controlledValue, onValueChange, children, className }: TabsProps) => {\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue || \"\")\r\n  const value = controlledValue !== undefined ? controlledValue : internalValue\r\n  const handleValueChange = React.useCallback((newValue: string) => {\r\n    if (controlledValue === undefined) {\r\n      setInternalValue(newValue)\r\n    }\r\n    onValueChange?.(newValue)\r\n  }, [controlledValue, onValueChange])\r\n\r\n  return (\r\n    <TabsContext.Provider value={{ value, onValueChange: handleValueChange }}>\r\n      <div className={className}>{children}</div>\r\n    </TabsContext.Provider>\r\n  )\r\n}\r\n\r\ninterface TabsListProps extends React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nconst TabsList = React.forwardRef<HTMLDivElement, TabsListProps>(\r\n  ({ className, ...props }, ref) => (\r\n    <div\r\n      ref={ref}\r\n      className={cn(\r\n        \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nTabsList.displayName = \"TabsList\"\r\n\r\ninterface TabsTriggerProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  value: string\r\n}\r\n\r\nconst TabsTrigger = React.forwardRef<HTMLButtonElement, TabsTriggerProps>(\r\n  ({ className, value, ...props }, ref) => {\r\n    const context = React.useContext(TabsContext)\r\n    if (!context) {\r\n      throw new Error(\"TabsTrigger must be used within Tabs\")\r\n    }\r\n    const isActive = context.value === value\r\n\r\n    return (\r\n      <button\r\n        ref={ref}\r\n        type=\"button\"\r\n        role=\"tab\"\r\n        aria-selected={isActive}\r\n        className={cn(\r\n          \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n          isActive && \"bg-background text-foreground shadow-sm\",\r\n          !isActive && \"text-muted-foreground\",\r\n          className\r\n        )}\r\n        onClick={() => context.onValueChange(value)}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTabsTrigger.displayName = \"TabsTrigger\"\r\n\r\ninterface TabsContentProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  value: string\r\n}\r\n\r\nconst TabsContent = React.forwardRef<HTMLDivElement, TabsContentProps>(\r\n  ({ className, value, ...props }, ref) => {\r\n    const context = React.useContext(TabsContext)\r\n    if (!context) {\r\n      throw new Error(\"TabsContent must be used within Tabs\")\r\n    }\r\n    const isActive = context.value === value\r\n\r\n    if (!isActive) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        role=\"tabpanel\"\r\n        className={cn(\r\n          \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTabsContent.displayName = \"TabsContent\"\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAHA;;;;AAUA,MAAM,4BAAc,sNAAmB,CAA+B;AAUtE,MAAM,OAAO,CAAC,EAAE,YAAY,EAAE,OAAO,eAAe,EAAE,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAa;IACnG,MAAM,CAAC,eAAe,iBAAiB,GAAG,iNAAc,CAAC,gBAAgB;IACzE,MAAM,QAAQ,oBAAoB,YAAY,kBAAkB;IAChE,MAAM,oBAAoB,oNAAiB,CAAC,CAAC;QAC3C,IAAI,oBAAoB,WAAW;YACjC,iBAAiB;QACnB;QACA,gBAAgB;IAClB,GAAG;QAAC;QAAiB;KAAc;IAEnC,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAO,eAAe;QAAkB;kBACrE,cAAA,8OAAC;YAAI,WAAW;sBAAY;;;;;;;;;;;AAGlC;AAIA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;AAIf,SAAS,WAAW,GAAG;AAMvB,MAAM,4BAAc,mNAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE;IAC/B,MAAM,UAAU,mNAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,WAAW,QAAQ,KAAK,KAAK;IAEnC,qBACE,8OAAC;QACC,KAAK;QACL,MAAK;QACL,MAAK;QACL,iBAAe;QACf,WAAW,IAAA,kHAAE,EACX,mSACA,YAAY,2CACZ,CAAC,YAAY,yBACb;QAEF,SAAS,IAAM,QAAQ,aAAa,CAAC;QACpC,GAAG,KAAK;;;;;;AAGf;AAEF,YAAY,WAAW,GAAG;AAM1B,MAAM,4BAAc,mNAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE;IAC/B,MAAM,UAAU,mNAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,WAAW,QAAQ,KAAK,KAAK;IAEnC,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,kHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEF,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 4986, "column": 0}, "map": {"version":3,"sources":["file:///C:/work/AARD/ui/app/workflows/%5BworkflowId%5D/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useParams } from 'next/navigation'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { ArrowLeft, ExternalLink, Download } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { useWorkflowEvents } from '@/lib/hooks/use-api'\r\nimport { EnhancedWorkflowGraph } from '@/components/workflow/enhanced-workflow-graph'\r\nimport { WorkflowTimeline } from '@/components/chat/workflow-timeline'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { useState, useEffect } from 'react'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\nexport default function WorkflowVisualizationPage() {\r\n  const params = useParams()\r\n  const workflowId = params.workflowId as string\r\n  const [activeTab, setActiveTab] = useState<'graph' | 'timeline'>('graph')\r\n  \r\n  const { data: workflowData, isLoading, error } = useWorkflowEvents(workflowId, true)\r\n  const events = workflowData?.events || []\r\n  const entities = workflowData?.entities || []\r\n  \r\n  // Debug logging\r\n  useEffect(() => {\r\n    if (workflowData) {\r\n      console.log('Workflow Data:', {\r\n        eventsCount: events.length,\r\n        entitiesCount: entities.length,\r\n        events: events.map(e => ({ id: e.id, source: e.event_source, type: e.event_type, message: e.message })),\r\n        entities: entities.map(e => ({ id: e.id, type: e.type, name: e.name })),\r\n      })\r\n    }\r\n    if (error) {\r\n      console.error('Workflow Events Error:', error)\r\n    }\r\n  }, [workflowData, events, entities, error])\r\n\r\n  const handleExportGraph = () => {\r\n    // TODO: Implement graph export (PNG/SVG)\r\n    alert('Export functionality coming soon')\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8 max-w-[95%]\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <Link href=\"/chat\">\r\n          <Button variant=\"ghost\" className=\"mb-4\">\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Back to Chat\r\n          </Button>\r\n        </Link>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold tracking-tight\">\r\n              Workflow Visualization\r\n            </h1>\r\n            <p className=\"text-muted-foreground mt-1\">\r\n              Complete execution flow from message receipt to response\r\n            </p>\r\n            <div className=\"flex items-center gap-2 mt-2\">\r\n              <Badge variant=\"outline\">Workflow ID: {workflowId.slice(0, 8)}...</Badge>\r\n              {events.length > 0 && (\r\n                <Badge variant=\"secondary\">{events.length} events</Badge>\r\n              )}\r\n              {entities.length > 0 && (\r\n                <Badge variant=\"secondary\">{entities.length} entities</Badge>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button variant=\"outline\" onClick={handleExportGraph}>\r\n              <Download className=\"h-4 w-4 mr-2\" />\r\n              Export\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      {isLoading ? (\r\n        <Card>\r\n          <CardContent className=\"p-12 text-center\">\r\n            <Loader2 className=\"h-8 w-8 mx-auto mb-4 animate-spin text-muted-foreground\" />\r\n            <p className=\"text-muted-foreground\">Loading workflow data...</p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : error ? (\r\n        <Card>\r\n          <CardContent className=\"p-12 text-center\">\r\n            <p className=\"text-red-500 mb-2\">Error loading workflow data</p>\r\n            <p className=\"text-sm text-muted-foreground\">{error.message}</p>\r\n            <p className=\"text-xs text-muted-foreground mt-2\">Workflow ID: {workflowId}</p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : events.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"p-12 text-center\">\r\n            <p className=\"text-muted-foreground\">No workflow events found</p>\r\n            <p className=\"text-xs text-muted-foreground mt-2\">Workflow ID: {workflowId}</p>\r\n            <p className=\"text-xs text-muted-foreground\">Check if events exist in the database</p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'graph' | 'timeline')}>\r\n          <TabsList className=\"mb-4\">\r\n            <TabsTrigger value=\"graph\">Graph View</TabsTrigger>\r\n            <TabsTrigger value=\"timeline\">Timeline View</TabsTrigger>\r\n          </TabsList>\r\n          \r\n          <TabsContent value=\"graph\" className=\"mt-0\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Workflow Graph</CardTitle>\r\n                <CardDescription>\r\n                  Visual representation of all events and entities with their relationships\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <EnhancedWorkflowGraph \r\n                  events={events} \r\n                  entities={entities}\r\n                  height=\"calc(100vh - 350px)\"\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n          \r\n          <TabsContent value=\"timeline\" className=\"mt-0\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Execution Timeline</CardTitle>\r\n                <CardDescription>\r\n                  Chronological view of all workflow events with details\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <WorkflowTimeline workflowId={workflowId} />\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        </Tabs>\r\n      )}\r\n\r\n      {/* Entities Summary */}\r\n      {entities.length > 0 && (\r\n        <Card className=\"mt-6\">\r\n          <CardHeader>\r\n            <CardTitle>Created Entities</CardTitle>\r\n            <CardDescription>\r\n              Entities (tasks, plans, tools) created during this workflow\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n              {entities.map((entity) => (\r\n                <div\r\n                  key={entity.id}\r\n                  className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <Badge variant=\"outline\" className=\"capitalize\">\r\n                      {entity.type}\r\n                    </Badge>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium\">{entity.name}</p>\r\n                      {entity.status && (\r\n                        <p className=\"text-xs text-muted-foreground\">{entity.status}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  {entity.type === 'task' && (\r\n                    <Link href={`/tasks/${entity.id}`}>\r\n                      <Button variant=\"ghost\" size=\"sm\">\r\n                        <ExternalLink className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </Link>\r\n                  )}\r\n                  {entity.type === 'plan' && (\r\n                    <Link href={`/plans/${entity.id}`}>\r\n                      <Button variant=\"ghost\" size=\"sm\">\r\n                        <ExternalLink className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </Link>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}