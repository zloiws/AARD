# –¢–µ—Å—Ç Workflow Visualization –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞

## –¶–µ–ª—å —Ç–µ—Å—Ç–∞
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é workflow –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞–Ω–∞ –∏ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ:
1. –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. –ü—Ä–æ–º–ø—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–¥–∞–∂–µ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ)
3. –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (tasks, plans) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
4. Workflow ID –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

## –®–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ UI
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/tasks/new`
2. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
   ```
   –°–æ–∑–¥–∞—Ç—å REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
   ```
3. –ù–∞–∂–º–∏—Ç–µ "Create Task"

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞
1. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–¥–∞—á–∏: `/tasks/{task_id}`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–ª–∞–Ω —Å–æ–∑–¥–∞–ª—Å—è –≤ —Å–µ–∫—Ü–∏–∏ "Plans"
3. –ï—Å–ª–∏ –ø–ª–∞–Ω –Ω–µ —Å–æ–∑–¥–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ API:
   ```bash
   POST /api/plans
   Body: { "task_id": "<task_id>" }
   ```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Workflow Visualization
1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç: `http://localhost:3000/chat`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–∑–¥–∞—Å—Ç –ø–ª–∞–Ω:
   ```
   –°–æ–∑–¥–∞–π –ø–ª–∞–Ω –¥–ª—è –∑–∞–¥–∞—á–∏: —Å–æ–∑–¥–∞—Ç—å REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
   ```
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ –æ—Ç –º–æ–¥–µ–ª–∏
4. –í –æ—Ç–≤–µ—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é "Execution Timeline"
5. –ù–∞–∂–º–∏—Ç–µ "Full View" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª–Ω–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ workflow

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

#### –í Graph View:
- ‚úÖ –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –°—Ç—Ä–µ–ª–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
- ‚úÖ –ù–æ–¥—ã –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∏ —á–∏—Ç–∞–µ–º—ã–µ
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "üìù PROMPT" –≤–∏–¥–µ–Ω –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
- ‚úÖ –°—É—â–Ω–æ—Å—Ç–∏ (tasks, plans) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–æ–¥—ã
- ‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –≤–∏–¥–Ω—ã

#### –í Timeline View:
- ‚úÖ –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ
- ‚úÖ –ü—Ä–æ–º–ø—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–º –≤–∏–¥–µ:
  - System Prompt (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - User Prompt (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ü—Ä–æ–º–ø—Ç –Ω–µ —É–∫–∞–∑–∞–Ω" –¥–ª—è —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –ø—Ä–æ–º–ø—Ç–∞
- ‚úÖ Reasoning –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
- ‚úÖ –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏
- ‚úÖ –ú–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ —Å–æ–±—ã—Ç–∏—è

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `workflow_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞ —á–∞—Ç–∞ (–≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è)
2. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:3000/workflows/{workflow_id}`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: Graph View –∏ Timeline View

## –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ

### –°–æ–±—ã—Ç–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞–Ω–∞:
1. **USER_INPUT** - –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **EXECUTION_STEP** - –†–∞–∑–±–æ—Ä –∑–∞–ø—Ä–æ—Å–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
3. **EXECUTION_STEP** - –í—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å
4. **MODEL_REQUEST** - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ –º–æ–¥–µ–ª–∏ (—Å –ø—Ä–æ–º–ø—Ç–æ–º!)
5. **MODEL_RESPONSE** - –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏
6. **EXECUTION_STEP** - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
7. **COMPLETION** - –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ

### –ü—Ä–æ–º–ø—Ç—ã:
- **System Prompt** –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–æ–±—ã—Ç–∏–∏ MODEL_REQUEST
- –ï—Å–ª–∏ system_prompt –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –∑–∞–ø—Ä–æ—Å–µ, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ü—Ä–æ–º–ø—Ç –Ω–µ —É–∫–∞–∑–∞–Ω"
- System Prompt –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –°—É—â–Ω–æ—Å—Ç–∏:
- **Task** - —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
- **Plan** - —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–ª–∞–Ω (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω)

## –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```javascript
   // –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
   Workflow Data: { eventsCount: ..., entitiesCount: ..., ... }
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab - –∑–∞–ø—Ä–æ—Å –∫ `/api/workflow-events?workflow_id=...&include_entities=true`

### –ï—Å–ª–∏ –ø—Ä–æ–º–ø—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `event_data` –µ—Å—Ç—å –ø–æ–ª—è:
   - `system_prompt`
   - `user_prompt`
   - `full_prompt`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `metadata` –º–æ–∂–µ—Ç –±—ã—Ç—å `system_prompt`

### –ï—Å–ª–∏ workflow_id –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ —á–∞—Ç–∞ –µ—Å—Ç—å `workflow_id`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `workflow_id`

## API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è workflow
GET /api/workflow-events?workflow_id={workflow_id}&include_entities=true

# –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –≤—Ä—É—á–Ω—É—é
POST /api/plans
Body: { "task_id": "<task_id>" }
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ –≤—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:
- ‚úÖ –ü–æ–ª–Ω—É—é —Ü–µ–ø–æ—á–∫—É —Å–æ–±—ã—Ç–∏–π –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –ü—Ä–æ–º–ø—Ç—ã –≤ —Å–æ–±—ã—Ç–∏—è—Ö MODEL_REQUEST –∏ MODEL_RESPONSE
- ‚úÖ –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (tasks, plans) –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–æ–¥—ã
- ‚úÖ –ß–µ—Ç–∫—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å —Å—Ç—Ä–µ–ª–∫–∞–º–∏
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∏ —á–∏—Ç–∞–µ–º—ã–µ –Ω–æ–¥—ã
- ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π
