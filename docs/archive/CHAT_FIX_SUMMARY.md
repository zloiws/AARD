# Исправления для работы чата с моделями

## Проблема
Модели не загружались при отправке запроса через веб-интерфейс.

## Решение

### 1. Улучшена логика выбора модели
- Теперь поддерживается выбор моделей, которые есть на сервере, но не обязательно в конфигурации
- Если модель не найдена в конфигурации, используется любой доступный сервер с запрошенной моделью
- Это позволяет использовать модели, полученные через `/api/models/server/models`

### 2. Увеличены таймауты
- HTMX таймаут увеличен до 120 секунд (для первой загрузки модели в GPU)
- Добавлено информационное сообщение о загрузке модели

### 3. Улучшена обработка ошибок
- Добавлена обработка таймаутов в веб-интерфейсе
- Показываются понятные сообщения об ошибках

### 4. Исправлена работа с именами моделей
- Теперь используется запрошенное имя модели, даже если оно отличается от имени в конфигурации
- Это позволяет использовать любые модели с сервера

## Тестирование

Все тесты проходят успешно:
- ✅ Автоматический выбор модели
- ✅ Выбор конкретной модели
- ✅ Модель с другого сервера

## Важно

**Модели загружаются в GPU по требованию!**
- Первый запрос может занять 15-20 секунд (загрузка в GPU)
- Последующие запросы быстрее (модель уже в GPU)
- Это нормальное поведение Ollama

