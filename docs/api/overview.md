# API Overview

## Введение

AARD API предоставляет RESTful интерфейс для взаимодействия с системой автономных агентов. API построен на FastAPI и поддерживает:

- Асинхронные операции
- WebSocket для real-time обновлений
- Streaming ответов
- OpenAPI документацию (Swagger UI)

## Базовые концепции

### Агенты
Агенты - это автономные сущности, которые могут выполнять задачи, использовать инструменты и взаимодействовать друг с другом.

### Планы
Планы - это структурированные последовательности шагов для выполнения задач. Планы могут требовать утверждения перед выполнением.

### Задачи
Задачи - это единицы работы, которые система должна выполнить. Задачи могут быть разбиты на подзадачи и шаги плана.

### Инструменты
Инструменты - это функции, которые агенты могут вызывать для выполнения действий (например, выполнение кода, поиск в интернете).

### Промпты
Промпты - это шаблоны для взаимодействия с LLM. Промпты версионируются и могут улучшаться на основе метрик.

### Workflow
Workflow отслеживает выполнение задач и планов, предоставляя события и состояние выполнения.

## Основные endpoints

### Chat
- `POST /api/chat/` - Отправить сообщение и получить ответ от LLM
- `GET /api/chat/session/{session_id}` - Получить историю сессии
- `POST /api/chat/session` - Создать новую сессию
- `DELETE /api/chat/session/{session_id}` - Удалить сессию

### Agents
- `GET /api/agents/` - Список всех агентов
- `POST /api/agents/` - Создать нового агента
- `GET /api/agents/{agent_id}` - Получить информацию об агенте
- `PUT /api/agents/{agent_id}` - Обновить агента
- `DELETE /api/agents/{agent_id}` - Удалить агента

### Plans
- `POST /api/plans/` - Создать новый план
- `GET /api/plans/` - Список всех планов
- `GET /api/plans/{plan_id}` - Получить план
- `POST /api/plans/{plan_id}/approve` - Утвердить план
- `POST /api/plans/{plan_id}/execute` - Выполнить план
- `POST /api/plans/{plan_id}/replan` - Перепланировать

### Tasks
- `GET /api/tasks/` - Список задач
- `POST /api/tasks/` - Создать задачу
- `GET /api/tasks/{task_id}` - Получить задачу
- `PUT /api/tasks/{task_id}` - Обновить задачу

### Tools
- `GET /api/tools/` - Список инструментов
- `POST /api/tools/` - Создать инструмент
- `GET /api/tools/{tool_id}` - Получить инструмент
- `PUT /api/tools/{tool_id}` - Обновить инструмент

## OpenAPI документация

Интерактивная документация API доступна по адресу:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## Примеры использования

См. [Examples](../examples/) для примеров использования API.

## Обработка ошибок

Все ошибки возвращаются в стандартном формате:

```json
{
  "detail": "Error message",
  "status_code": 400
}
```

Коды статусов:
- `200` - Успешно
- `201` - Создано
- `400` - Неверный запрос
- `401` - Не авторизован
- `403` - Доступ запрещен
- `404` - Не найдено
- `429` - Превышен лимит запросов
- `500` - Внутренняя ошибка сервера

