# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã observability

**–î–∞—Ç–∞:** 2025-12-03  
**–í–µ—Ä—Å–∏—è:** 0.1.0

## –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã observability:
- Health Checks
- Prometheus Metrics
- Logging System
- Traces
- Integration

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Health Checks ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (8/8)

- ‚úì Basic health check (`/health`)
- ‚úì Detailed health check (`/health/detailed`)
  - ‚úì –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
  - ‚úì –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è (4 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
  - ‚úì Database: healthy
  - ‚úì Ollama servers: healthy
  - ‚úì Task queues: healthy
  - ‚úì Recent activity: healthy
- ‚úì Readiness check (`/health/readiness`)
- ‚úì Liveness check (`/health/liveness`)

**–í—ã–≤–æ–¥:** –í—Å–µ health check endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã.

### 2. Prometheus Metrics ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (7/7)

- ‚úì Metrics endpoint –¥–æ—Å—Ç—É–ø–µ–Ω (`/metrics`)
- ‚úì –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:
  - ‚úì `http_requests_total`
  - ‚úì `http_request_duration_seconds`
  - ‚úì `llm_requests_total`
  - ‚úì `plan_executions_total`
  - ‚úì `queue_tasks_total`
  - ‚úì `db_queries_total`
- ‚úì HTTP –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (6 –∑–∞–ø–∏—Å–µ–π)

**–í—ã–≤–æ–¥:** Prometheus –º–µ—Ç—Ä–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è.

### 3. Logging System ‚úÖ

**–°—Ç–∞—Ç—É—Å:** 4/5 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω—ã

#### JSON Format ‚úÖ
- ‚úì –õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úì –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç (timestamp, level, message)
- ‚úì –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

#### Log Context ‚ö†Ô∏è
- ‚ö†Ô∏è –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–ª—è (trace_id, span_id) –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ tracing –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### Log Levels ‚ö†Ô∏è
- ‚úì API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úì API –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É—Ä–æ–≤–Ω–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### Log Metrics ‚úÖ
- ‚úì API –º–µ—Ç—Ä–∏–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úì –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### Sensitive Data Filtering ‚úÖ
- ‚úì –ú–µ—Ö–∞–Ω–∏–∑–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ö†Ô∏è –ù–µ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. JSON —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è. –ù–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —É—Ä–æ–≤–Ω–µ–π –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã.

### 4. Traces ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (3/3)

- ‚úì Traces API –¥–æ—Å—Ç—É–ø–µ–Ω (`/api/traces`)
- ‚úì –ù–∞–π–¥–µ–Ω–æ 50 —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úì Trace detail endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ API.

### 5. Integration ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (2/2)

- ‚úì Health check –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
- ‚úì –ú–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–æ–≤

**–í—ã–≤–æ–¥:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã observability –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ.

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 29
–ü—Ä–æ–π–¥–µ–Ω–æ: 29 (100%)
–ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 0
```

## –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 5
–ü—Ä–æ–π–¥–µ–Ω–æ: 4 (80%)
–ß–∞—Å—Ç–∏—á–Ω–æ: 1 (Log Levels - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
```

## –í—ã–≤–æ–¥—ã

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
1. **Health Checks** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
2. **Prometheus Metrics** - –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
3. **JSON Logging** - —Ñ–æ—Ä–º–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
4. **Traces** - —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
5. **Integration** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
1. **Log Context** - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–ª—è –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ tracing)
2. **Log Levels** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è

### üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ trace_id –∏ span_id –≤–æ –≤—Å–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ middleware
2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º hot-reload –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
3. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ observability –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ù–µ–±–æ–ª—å—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –≤–Ω–µ—Å–µ–Ω—ã –≤ –±—É–¥—É—â–µ–º, –Ω–æ –æ–Ω–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã.

